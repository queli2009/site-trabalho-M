/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},109:(e,t,n)=>{var o=n(713);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},0:e=>{var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};e.exports&&(e.exports=t),"function"===typeof window.define&&window.define([],(function(){return t})),t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var n,o,r,s,i,a=this._tables[0][4],c=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new t.exception.invalid("invalid aes key size");for(this._key=[s=e.slice(0),i=[]],n=u;n<4*u+28;n++)r=s[n-1],(n%u===0||8===u&&n%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],n%u===0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),s[n]=s[n-u]^r;for(o=0;n;o++,n--)r=s[3&o?n:n-4],i[o]=n<=4||o<4?r:c[0][a[r>>>24]]^c[1][a[r>>16&255]]^c[2][a[r>>8&255]]^c[3][a[255&r]]},t.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,o,r,s,i,a,c=this._tables[0],u=this._tables[1],l=c[4],E=u[4],_=[],d=[];for(e=0;e<256;e++)d[(_[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!l[t];t^=o||1,n=d[n]||1)for(s=(s=n^n<<1^n<<2^n<<3^n<<4)>>8^255&s^99,l[t]=s,E[s]=t,a=16843009*_[r=_[o=_[t]]]^65537*r^257*o^16843008*t,i=257*_[s]^16843008*s,e=0;e<4;e++)c[e][t]=i=i<<24^i>>>8,u[e][s]=a=a<<24^a>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),u[e]=u[e].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size");var o,r,s,i,a=this._key[n],c=e[0]^a[0],u=e[n?3:1]^a[1],l=e[2]^a[2],E=e[n?1:3]^a[3],_=a.length/4-2,d=4,p=[0,0,0,0],f=this._tables[n],I=f[0],h=f[1],T=f[2],O=f[3],A=f[4];for(i=0;i<_;i++)o=I[c>>>24]^h[u>>16&255]^T[l>>8&255]^O[255&E]^a[d],r=I[u>>>24]^h[l>>16&255]^T[E>>8&255]^O[255&c]^a[d+1],s=I[l>>>24]^h[E>>16&255]^T[c>>8&255]^O[255&u]^a[d+2],E=I[E>>>24]^h[c>>16&255]^T[u>>8&255]^O[255&l]^a[d+3],d+=4,c=o,u=r,l=s;for(i=0;i<4;i++)p[n?3&-i:i]=A[c>>>24]<<24^A[u>>16&255]<<16^A[l>>8&255]<<8^A[255&E]^a[d++],o=c,c=u,u=l,l=E,E=o;return p}},t.bitArray={bitSlice:function(e,n,o){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===o?e:t.bitArray.clamp(e,o-n)},extract:function(e,t,n){var o=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-o^e[t/32+1|0]>>>o:e[t/32|0]>>>o)&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var o=e[e.length-1],r=t.bitArray.getPartial(o);return 32===r?e.concat(n):t.bitArray._shiftRight(n,r,0|o,e.slice(0,e.length-1))},bitLength:function(e){var n,o=e.length;return 0===o?0:(n=e[o-1],32*(o-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e;var o=(e=e.slice(0,Math.ceil(n/32))).length;return n&=31,o>0&&n&&(e[o-1]=t.bitArray.partial(n,e[o-1]&2147483648>>n-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var o,r=0;for(o=0;o<e.length;o++)r|=e[o]^n[o];return 0===r},_shiftRight:function(e,n,o,r){var s,i,a;for(void 0===r&&(r=[]);n>=32;n-=32)r.push(o),o=0;if(0===n)return r.concat(e);for(s=0;s<e.length;s++)r.push(o|e[s]>>>n),o=e[s]<<32-n;return i=e.length?e[e.length-1]:0,a=t.bitArray.getPartial(i),r.push(t.bitArray.partial(n+a&31,n+a>32?o:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},t.codec.utf8String={fromBits:function(e){var n,o,r="",s=t.bitArray.bitLength(e);for(n=0;n<s/8;n++)0===(3&n)&&(o=e[n/4]),r+=String.fromCharCode(o>>>24),o<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,o=[],r=0;for(n=0;n<e.length;n++)r=r<<8|e.charCodeAt(n),3===(3&n)&&(o.push(r),r=0);return 3&n&&o.push(t.bitArray.partial(8*(3&n),r)),o}},t.codec.hex={fromBits:function(e){var n,o="";for(n=0;n<e.length;n++)o+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return o.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,o,r=[];for(o=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",n=0;n<e.length;n+=8)r.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(r,4*o)}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,o){var r,s="",i=0,a=t.codec.base64._chars,c=0,u=t.bitArray.bitLength(e);for(o&&(a=a.substr(0,62)+"-_"),r=0;6*s.length<u;)s+=a.charAt((c^e[r]>>>i)>>>26),i<6?(c=e[r]<<6-i,i+=26,r++):(c<<=6,i-=6);for(;3&s.length&&!n;)s+="=";return s},toBits:function(e,n){e=e.replace(/\s|=/g,"");var o,r,s=[],i=0,a=t.codec.base64._chars,c=0;for(n&&(a=a.substr(0,62)+"-_"),o=0;o<e.length;o++){if((r=a.indexOf(e.charAt(o)))<0)throw new t.exception.invalid("this isn't base64!");i>26?(i-=26,s.push(c^r>>>i),c=r<<32-i):c^=r<<32-(i+=6)}return 56&i&&s.push(t.bitArray.partial(56&i,c,1)),s}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"===typeof e&&(e=t.codec.utf8String.toBits(e));var n,o=this._buffer=t.bitArray.concat(this._buffer,e),r=this._length,s=this._length=r+t.bitArray.bitLength(e);for(n=512+r&-512;n<=s;n+=512)this._block(o.splice(0,16));return this},finalize:function(){var e,n=this._buffer,o=this._h;for(e=(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)])).length+2;15&e;e++)n.push(0);for(n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);n.length;)this._block(n.splice(0,16));return this.reset(),o},_init:[],_key:[],_precompute:function(){var e,t=0,n=2;function o(e){return 4294967296*(e-Math.floor(e))|0}e:for(;t<64;n++){for(e=2;e*e<=n;e++)if(n%e===0)continue e;t<8&&(this._init[t]=o(Math.pow(n,.5))),this._key[t]=o(Math.pow(n,1/3)),t++}},_block:function(e){var t,n,o,r,s=e.slice(0),i=this._h,a=this._key,c=i[0],u=i[1],l=i[2],E=i[3],_=i[4],d=i[5],p=i[6],f=i[7];for(t=0;t<64;t++)t<16?n=s[t]:(o=s[t+1&15],r=s[t+14&15],n=s[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+s[15&t]+s[t+9&15]|0),n=n+f+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(p^_&(d^p))+a[t],f=p,p=d,d=_,_=E+n|0,E=l,l=u,c=n+((u=c)&l^E&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;i[0]=i[0]+c|0,i[1]=i[1]+u|0,i[2]=i[2]+l|0,i[3]=i[3]+E|0,i[4]=i[4]+_|0,i[5]=i[5]+d|0,i[6]=i[6]+p|0,i[7]=i[7]+f|0}},t.mode.ccm={name:"ccm",encrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(o)/8,E=u.bitLength(c)/8;if(s=s||64,r=r||[],l<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&E>>>8*i;i++);return i<15-l&&(i=15-l),o=u.clamp(o,8*(15-i)),a=t.mode.ccm._computeTag(e,n,o,r,s,i),c=t.mode.ccm._ctrMode(e,c,o,a,s,i),u.concat(c.data,c.tag)},decrypt:function(e,n,o,r,s){s=s||64,r=r||[];var i,a,c=t.bitArray,u=c.bitLength(o)/8,l=c.bitLength(n),E=c.clamp(n,l-s),_=c.bitSlice(n,l-s);if(l=(l-s)/8,u<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&l>>>8*i;i++);if(i<15-u&&(i=15-u),o=c.clamp(o,8*(15-i)),E=t.mode.ccm._ctrMode(e,E,o,_,s,i),a=t.mode.ccm._computeTag(e,E.data,o,r,s,i),!c.equal(E.tag,a))throw new t.exception.corrupt("ccm: tag doesn't match");return E.data},_computeTag:function(e,n,o,r,s,i){var a,c,u,l=[],E=t.bitArray,_=E._xor4;if((s/=8)%2||s<4||s>16)throw new t.exception.invalid("ccm: invalid tag length");if(r.length>4294967295||n.length>4294967295)throw new t.exception.bug("ccm: can't deal with 4GiB or more data");if(a=[E.partial(8,(r.length?64:0)|s-2<<2|i-1)],(a=E.concat(a,o))[3]|=E.bitLength(n)/8,a=e.encrypt(a),r.length)for((c=E.bitLength(r)/8)<=65279?l=[E.partial(16,c)]:c<=4294967295&&(l=E.concat([E.partial(16,65534)],[c])),l=E.concat(l,r),u=0;u<l.length;u+=4)a=e.encrypt(_(a,l.slice(u,u+4).concat([0,0,0])));for(u=0;u<n.length;u+=4)a=e.encrypt(_(a,n.slice(u,u+4).concat([0,0,0])));return E.clamp(a,8*s)},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l=t.bitArray,E=l._xor4,_=n.length,d=l.bitLength(n);if(u=l.concat([l.partial(8,i-1)],o).concat([0,0,0]).slice(0,4),r=l.bitSlice(E(r,e.encrypt(u)),0,s),!_)return{tag:r,data:[]};for(c=0;c<_;c+=4)u[3]++,a=e.encrypt(u),n[c]^=a[0],n[c+1]^=a[1],n[c+2]^=a[2],n[c+3]^=a[3];return{tag:r,data:l.clamp(n,d)}}},t.mode.ocb2={name:"ocb2",encrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");var a,c,u,l,E=t.mode.ocb2._times2,_=t.bitArray,d=_._xor4,p=[0,0,0,0],f=E(e.encrypt(o)),I=[];for(r=r||[],s=s||64,a=0;a+4<n.length;a+=4)p=d(p,c=n.slice(a,a+4)),I=I.concat(d(f,e.encrypt(d(f,c)))),f=E(f);return c=n.slice(a),u=_.bitLength(c),l=e.encrypt(d(f,[0,0,0,u])),c=_.clamp(d(c.concat([0,0,0]),l),u),p=d(p,d(c.concat([0,0,0]),l)),p=e.encrypt(d(p,d(f,E(f)))),r.length&&(p=d(p,i?r:t.mode.ocb2.pmac(e,r))),I.concat(_.concat(c,_.clamp(p,s)))},decrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");s=s||64;var a,c,u,l,E=t.mode.ocb2._times2,_=t.bitArray,d=_._xor4,p=[0,0,0,0],f=E(e.encrypt(o)),I=t.bitArray.bitLength(n)-s,h=[];for(r=r||[],a=0;a+4<I/32;a+=4)c=d(f,e.decrypt(d(f,n.slice(a,a+4)))),p=d(p,c),h=h.concat(c),f=E(f);if(u=I-32*a,l=e.encrypt(d(f,[0,0,0,u])),c=d(l,_.clamp(n.slice(a),u).concat([0,0,0])),p=d(p,c),p=e.encrypt(d(p,d(f,E(f)))),r.length&&(p=d(p,i?r:t.mode.ocb2.pmac(e,r))),!_.equal(_.clamp(p,s),_.bitSlice(n,I)))throw new t.exception.corrupt("ocb: tag doesn't match");return h.concat(_.clamp(c,u))},pmac:function(e,n){var o,r,s=t.mode.ocb2._times2,i=t.bitArray,a=i._xor4,c=[0,0,0,0],u=e.encrypt([0,0,0,0]);for(u=a(u,s(s(u))),o=0;o+4<n.length;o+=4)u=s(u),c=a(c,e.encrypt(a(u,n.slice(o,o+4))));return r=n.slice(o),i.bitLength(r)<128&&(u=a(u,s(u)),r=i.concat(r,[-2147483648,0,0,0])),c=a(c,r),e.encrypt(a(s(a(u,s(u))),c))},_times2:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},t.mode.gcm={name:"gcm",encrypt:function(e,n,o,r,s){var i,a=n.slice(0),c=t.bitArray;return s=s||128,r=r||[],i=t.mode.gcm._ctrMode(!0,e,a,r,o,s),c.concat(i.data,i.tag)},decrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(c);if(r=r||[],(s=s||128)<=l?(a=u.bitSlice(c,l-s),c=u.bitSlice(c,0,l-s)):(a=c,c=[]),i=t.mode.gcm._ctrMode(!1,e,c,r,o,s),!u.equal(i.tag,a))throw new t.exception.corrupt("gcm: tag doesn't match");return i.data},_galoisMultiply:function(e,n){var o,r,s,i,a,c=t.bitArray._xor4;for(s=[0,0,0,0],i=n.slice(0),o=0;o<128;o++){for(0!==(e[Math.floor(o/32)]&1<<31-o%32)&&(s=c(s,i)),a=0!==(1&i[3]),r=3;r>0;r--)i[r]=i[r]>>>1|(1&i[r-1])<<31;i[0]=i[0]>>>1,a&&(i[0]=i[0]^225<<24)}return s},_ghash:function(e,n,o){var r,s,i=o.length;for(r=n.slice(0),s=0;s<i;s+=4)r[0]^=4294967295&o[s],r[1]^=4294967295&o[s+1],r[2]^=4294967295&o[s+2],r[3]^=4294967295&o[s+3],r=t.mode.gcm._galoisMultiply(r,e);return r},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l,E,_,d,p,f,I,h,T,O=t.bitArray;for(f=o.length,I=O.bitLength(o),h=O.bitLength(r),T=O.bitLength(s),a=n.encrypt([0,0,0,0]),96===T?(c=s.slice(0),c=O.concat(c,[1])):(c=t.mode.gcm._ghash(a,[0,0,0,0],s),c=t.mode.gcm._ghash(a,c,[0,0,Math.floor(T/4294967296),4294967295&T])),u=t.mode.gcm._ghash(a,[0,0,0,0],r),_=c.slice(0),d=u.slice(0),e||(d=t.mode.gcm._ghash(a,u,o)),E=0;E<f;E+=4)_[3]++,l=n.encrypt(_),o[E]^=l[0],o[E+1]^=l[1],o[E+2]^=l[2],o[E+3]^=l[3];return o=O.clamp(o,I),e&&(d=t.mode.gcm._ghash(a,u,o)),p=[Math.floor(h/4294967296),4294967295&h,Math.floor(I/4294967296),4294967295&I],d=t.mode.gcm._ghash(a,d,p),l=n.encrypt(c),d[0]^=l[0],d[1]^=l[1],d[2]^=l[2],d[3]^=l[3],{tag:O.bitSlice(d,0,i),data:o}}},t.misc.hmac=function(e,n){this._hash=n=n||t.hash.sha256;var o,r=[[],[]],s=n.prototype.blockSize/32;for(this._baseHash=[new n,new n],e.length>s&&(e=n.hash(e)),o=0;o<s;o++)r[0][o]=909522486^e[o],r[1][o]=1549556828^e[o];this._baseHash[0].update(r[0]),this._baseHash[1].update(r[1]),this._resultHash=new n(this._baseHash[0])},t.misc.hmac.prototype.encrypt=t.misc.hmac.prototype.mac=function(e){if(this._updated)throw new t.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},t.misc.hmac.prototype.reset=function(){this._resultHash=new this._hash(this._baseHash[0]),this._updated=!1},t.misc.hmac.prototype.update=function(e){this._updated=!0,this._resultHash.update(e)},t.misc.hmac.prototype.digest=function(){var e=this._resultHash.finalize(),t=new this._hash(this._baseHash[1]).update(e).finalize();return this.reset(),t},t.misc.pbkdf2=function(e,n,o,r,s){if(o=o||1e3,r<0||o<0)throw t.exception.invalid("invalid params to pbkdf2");"string"===typeof e&&(e=t.codec.utf8String.toBits(e)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n));var i,a,c,u,l,E=new(s=s||t.misc.hmac)(e),_=[],d=t.bitArray;for(l=1;32*_.length<(r||1);l++){for(i=a=E.encrypt(d.concat(n,[l])),c=1;c<o;c++)for(a=E.encrypt(a),u=0;u<a.length;u++)i[u]^=a[u];_=_.concat(i)}return r&&(_=d.clamp(_,r)),_},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var o,r,s=[],i=this.isReady(n);if(i===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded");for(i&this._REQUIRES_RESEED&&this._reseedFromPools(!(i&this._READY)),o=0;o<e;o+=4)(o+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),r=this._gen4words(),s.push(r[0],r[1],r[2],r[3]);return this._gate(),s.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=e},addEntropy:function(e,n,o){o=o||"user";var r,s,i,a,c=(new Date).valueOf(),u=this._robins[o],l=this.isReady(),E=0;switch(void 0===(r=this._collectorIds[o])&&(r=this._collectorIds[o]=this._collectorIdNext++),void 0===u&&(u=this._robins[o]=0),this._robins[o]=(this._robins[o]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[u].update([r,this._eventId++,1,n,c,1,0|e]);break;case"object":if("[object Uint32Array]"===(a=Object.prototype.toString.call(e))){for(i=[],s=0;s<e.length;s++)i.push(e[s]);e=i}else for("[object Array]"!==a&&(E=1),s=0;s<e.length&&!E;s++)"number"!==typeof e[s]&&(E=1);if(!E){if(void 0===n)for(n=0,s=0;s<e.length;s++)for(i=e[s];i>0;)n++,i>>>=1;this._pools[u].update([r,this._eventId++,2,n,c,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this._pools[u].update([r,this._eventId++,3,n,c,e.length]),this._pools[u].update(e);break;default:E=1}if(E)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[u]+=n,this._poolStrength+=n,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(e){var t=this._PARANOIA_LEVELS[void 0!==e?e:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(e){var t=this._PARANOIA_LEVELS[e||this._defaultParanoia];return this._strength>=t||this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.addEventListener("touchmove",this._eventListener.touchCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.removeEventListener("touchmove",this._eventListener.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(e,t){this._callbacks[e][this._callbackI++]=t},removeEventListener:function(e,t){var n,o,r=this._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&r[o]===t&&s.push(o);for(n=0;n<s.length;n++)delete r[o=s[n]]},_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_gen4words:function(){for(var e=0;e<4&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key);for(var n=0;n<4&&(this._counter[n]=this._counter[n]+1|0,!this._counter[n]);n++);},_reseedFromPools:function(e){var n,o=[],r=0;for(this._nextReseed=o[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;n<16;n++)o.push(4294967296*Math.random()|0);for(n=0;n<this._pools.length&&(o=o.concat(this._pools[n].finalize()),r+=this._poolEntropy[n],this._poolEntropy[n]=0,e||!(this._reseedCount&1<<n));n++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=r,r>this._strength&&(this._strength=r),this._reseedCount++,this._reseed(o)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n,o;try{n=e.x||e.clientX||e.offsetX||0,o=e.y||e.clientY||e.offsetY||0}catch(e){n=0,o=0}0!=n&&0!=o&&t.random.addEntropy([n,o],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(e){var n=e.touches[0]||e.changedTouches[0],o=n.pageX||n.clientX,r=n.pageY||n.clientY;t.random.addEntropy([o,r],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window.orientation){var o=window.orientation;"number"===typeof o&&t.random.addEntropy(o,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var o,r=t.random._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&s.push(r[o]);for(o=0;o<s.length;o++)s[o](n)}},t.random=new t.prng(6),function(){try{var n,o,r;if(e.exports&&(o=null)&&o.randomBytes)n=o.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),t.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(r=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(r);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(r)}t.random.addEntropy(r,1024,"crypto.getRandomValues")}}catch(e){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}}(),t.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},_encrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add({iv:t.random.randomWords(4,0)},c.defaults);if(c._add(u,o),a=u.adata,"string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json encrypt: invalid parameters");return"string"===typeof e?(e=(s=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=s.salt):t.ecc&&e instanceof t.ecc.elGamal.publicKey&&(s=e.kem(),u.kemtag=s.tag,e=s.key.slice(0,u.ks/32)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n)),"string"===typeof a&&(u.adata=a=t.codec.utf8String.toBits(a)),i=new t.cipher[u.cipher](e),c._add(r,u),r.key=e,u.ct=t.mode[u.mode].encrypt(i,n,u.iv,a,u.ts),u},encrypt:function(e,n,o,r){if(e&&n){var s=t.json,i=s._encrypt.apply(s,arguments);return s.encode(i)}},_decrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add(c._add(c._add({},c.defaults),n),o,!0),l=u.adata;if("string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||!u.iv||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json decrypt: invalid parameters");return"string"===typeof e?(e=(i=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=i.salt):t.ecc&&e instanceof t.ecc.elGamal.secretKey&&(e=e.unkem(t.codec.base64.toBits(u.kemtag)).slice(0,u.ks/32)),"string"===typeof l&&(l=t.codec.utf8String.toBits(l)),a=new t.cipher[u.cipher](e),s=t.mode[u.mode].decrypt(a,u.ct,u.iv,l,u.ts),c._add(r,u),r.key=e,1===o.raw?s:t.codec.utf8String.fromBits(s)},decrypt:function(e,n,o,r){if(e&&n){var s=t.json;return s._decrypt(e,s.decode(n),o,r)}},encode:function(e){var n,o="{",r="";for(n in e)if(e.hasOwnProperty(n)){if(!n.match(/^[a-z0-9]+$/i))throw new t.exception.invalid("json encode: invalid property name");switch(o+=r+'"'+n+'":',r=",",typeof e[n]){case"number":case"boolean":o+=e[n];break;case"string":o+='"'+escape(e[n])+'"';break;case"object":o+='"'+t.codec.base64.fromBits(e[n],0)+'"';break;default:throw new t.exception.bug("json encode: unsupported type")}}return o+"}"},decode:function(e){if(!(e=e.replace(/\s/g,"")).match(/^\{.*\}$/))throw new t.exception.invalid("json decode: this isn't json!");var n,o,r=e.replace(/^\{|\}$/g,"").split(/,/),s={};for(n=0;n<r.length;n++){if(!(o=r[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new t.exception.invalid("json decode: this isn't json!");o[3]?s[o[2]]=parseInt(o[3],10):o[4]?s[o[2]]=o[2].match(/^(ct|adata|salt|iv)$/)?t.codec.base64.toBits(o[4]):unescape(o[4]):o[5]&&(s[o[2]]="true"===o[5])}return s},_add:function(e,n,o){if(void 0===e&&(e={}),void 0===n)return e;var r;for(r in n)if(n.hasOwnProperty(r)){if(o&&void 0!==e[r]&&e[r]!==n[r])throw new t.exception.invalid("required parameter overridden");e[r]=n[r]}return e},_subtract:function(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(o[n]=e[n]);return o},_filter:function(e,t){var n,o={};for(n=0;n<t.length;n++)void 0!==e[t[n]]&&(o[t[n]]=e[t[n]]);return o}},t.encrypt=t.json.encrypt,t.decrypt=t.json.decrypt,t.misc._pbkdf2Cache={},t.misc.cachedPbkdf2=function(e,n){var o,r,s,i,a=t.misc._pbkdf2Cache;return i=(n=n||{}).iter||1e3,(o=(r=a[e]=a[e]||{})[i]=r[i]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):t.random.randomWords(2,0)})[s=void 0===n.salt?o.firstSalt:n.salt]=o[s]||t.misc.pbkdf2(e,s,n.iter),{key:o[s].slice(0),salt:s.slice(0)}}},698:(e,t,n)=>{"use strict";n.d(t,{tV:()=>T,h$:()=>O,uP:()=>A,d9:()=>l,kn:()=>I,_A:()=>u,RH:()=>E,U2:()=>_,hK:()=>c,KT:()=>f,kH:()=>R,Cd:()=>N,m8:()=>g,t8:()=>h,Vj:()=>d});var o=n(742);function r(){}function s(){}function i(e,t){let n;t=t||1/0;const{length:o}=e;let r=null;const s=[];let i=0;for(;i<o;i++){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===o){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&((t-=3)>-1&&s.push(239,191,189),r=null);if(n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function a(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function c(e){if("string"===typeof e)return e.replace(/_/g,"-").toLowerCase()}function u(e){return null===e||"object"!==typeof e?e:(Object.keys(e).forEach((t=>{null!==e[t]&&"object"===typeof e[t]&&(e[t]=u(e[t]))})),Object.isFrozen(e)?e:Object.freeze(e))}function l(e){let t;if(null===e||"object"!==typeof e)return e;if("[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());try{t=new e.constructor}catch(e){return}return Object.keys(e).forEach((n=>{t[n]=l(e[n])})),t}function E(...e){const t={},n=e=>{for(const n in e)e.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(e[n])?t[n]=E(t[n],e[n]):t[n]=e[n])};for(let t=0;t<e.length;t++)n(e[t]);return t}function _(e,t,n){const o=t.split(".").reduce(((e,t)=>e&&void 0!==e[t]?e[t]:void 0),e);return o&&n?o[n]:o}function d(){return`${p()}${p()}-${p()}-${p("4")}-${p((Math.floor(10*Math.random())%4+8).toString(16))}-${p()}${p()}${p()}`}function p(e){let t=Math.floor(65535*Math.random()).toString(16);for(let e=4-t.length;e>0;e--)t=`0${t}`;return e=`${e}`.substring(0,4),!Number.isNaN(parseInt(e,16))&&e.length?e+t.substr(e.length):t}function f(e=""){const t=e.match(/[^.]+(?:\.com?(?:\.[a-z]{2})?|(?:\.[a-z]+))?$/i);if(t&&t.length)return t[0].replace(/:[0-9]+$/,"")}function I(e=""){if("string"!==typeof e)return 0;let t=-1;const n=function(){const e=new Array(256);for(let t=0;t<e.length;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e}();for(let o=0;o<e.length;o++)t=t>>>8^n[255&(t^e.charCodeAt(o))];return(-1^t)>>>0}function h(e,t,n){let o,r;for("string"===typeof t&&(t=t.split(".")),o=0,r=t.length-1;o<r;o++)"undefined"!==typeof e[t[o]]&&null!==e[t[o]]||(e[t[o]]={}),e=e[t[o]];return e[t[r]]=n,e}function T(e){const t=o.b$(e);return new s("utf-8").decode(t)}function O(e){const t=new r("utf-8").encode(e);return o.JQ(t)}function A(e){if(null!==e&&"object"===typeof e&&0!==Object.keys(e).length)return btoa(JSON.stringify(e))}function R(e){return("string"===typeof e||e instanceof String)&&/^([a-zA-Z\d]|-|_)+$/.test(e)}function N(e,t){return e.length<=t?e:`...${e.substring(e.length-t)}`}function g(e){return e.reduce(((e,[t,n])=>(e[t]=n,e)),{})}r.prototype.encode=function(e){return"undefined"===typeof Uint8Array?i(e):new Uint8Array(i(e))},s.prototype.decode=function(e){return function(e,t,n){let o="",r="";n=Math.min(e.length,n||1/0);for(let s=t=t||0;s<n;s++)e[s]<=127?(o+=a(r)+String.fromCharCode(e[s]),r=""):r+=`%${e[s].toString(16)}`;return o+a(r)}(e,0,e.length)}},742:(e,t)=>{"use strict";t.b$=function(e){var t,n,s=c(e),i=s[0],a=s[1],u=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),l=0,E=a>0?i-4:i;for(n=0;n<E;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.JQ=function(e){for(var t,o=e.length,r=o%3,s=[],i=16383,a=0,c=o-r;a<c;a+=i)s.push(u(e,a,a+i>c?c:a+i));1===r?(t=e[o-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=s.length;i<a;++i)n[i]=s[i],o[s.charCodeAt(i)]=i;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,o){for(var r,s,i=[],a=t;a<o;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},961:(e,t,n)=>{var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var n=s._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(n){return r(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return s.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var i=[];return n.forEach((function(t){i.push(e(t))})),s.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(t){return r(n,e.charAt(t))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,r,s,i={},a={},c="",u="",l="",E=2,_=3,d=2,p=[],f=0,I=0;for(s=0;s<e.length;s+=1)if(c=e.charAt(s),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=_++,a[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(i,u))l=u;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<d;o++)f<<=1,I==t-1?(I=0,p.push(n(f)),f=0):I++;for(r=l.charCodeAt(0),o=0;o<8;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1}else{for(r=1,o=0;o<d;o++)f=f<<1|r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1}0==--E&&(E=Math.pow(2,d),d++),delete a[l]}else for(r=i[l],o=0;o<d;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1;0==--E&&(E=Math.pow(2,d),d++),i[u]=_++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<d;o++)f<<=1,I==t-1?(I=0,p.push(n(f)),f=0):I++;for(r=l.charCodeAt(0),o=0;o<8;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1}else{for(r=1,o=0;o<d;o++)f=f<<1|r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1}0==--E&&(E=Math.pow(2,d),d++),delete a[l]}else for(r=i[l],o=0;o<d;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1;0==--E&&(E=Math.pow(2,d),d++)}for(r=2,o=0;o<d;o++)f=f<<1|1&r,I==t-1?(I=0,p.push(n(f)),f=0):I++,r>>=1;for(;;){if(f<<=1,I==t-1){p.push(n(f));break}I++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var r,s,i,a,c,u,l,E=[],_=4,d=4,p=3,f="",I=[],h={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)E[r]=r;for(i=0,c=Math.pow(2,2),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 2:return""}for(E[3]=l,s=l,I.push(l);;){if(h.index>t)return"";for(i=0,c=Math.pow(2,p),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;switch(l=i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;E[d++]=e(i),l=d-1,_--;break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(a>0?1:0)*u,u<<=1;E[d++]=e(i),l=d-1,_--;break;case 2:return I.join("")}if(0==_&&(_=Math.pow(2,p),p++),E[l])f=E[l];else{if(l!==d)return null;f=s+s.charAt(0)}I.push(f),E[d++]=s+f.charAt(0),s=f,0==--_&&(_=Math.pow(2,p),p++)}}};return s}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},486:e=>{!function(t){"use strict";"function"===typeof bootstrap?bootstrap("promise",t):e.exports=t()}((function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var t,n=R(),o=function(){},r=function(){var e={task:void 0,next:null},t=e,n=!1,o=void 0,s=!1,i=[];function a(){for(var t,o;e.next;)t=(e=e.next).task,e.task=void 0,(o=e.domain)&&(e.domain=void 0,o.enter()),c(t,o);for(;i.length;)c(t=i.pop());n=!1}function c(e,t){try{e()}catch(e){if(s)throw t&&t.exit(),setTimeout(a,0),t&&t.enter(),e;setTimeout((function(){throw e}),0)}t&&t.exit()}if(r=function(e){t=t.next={task:e,domain:s&&process.domain,next:null},n||(n=!0,o())},"object"===typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,o=function(){process.nextTick(a)};else if("function"===typeof setImmediate)o="undefined"!==typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!==typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=l,u.port1.onmessage=a,a()};var l=function(){u.port2.postMessage(0)};o=function(){setTimeout(a,0),l()}}else o=function(){setTimeout(a,0)};return r.runAfter=function(e){i.push(e),n||(n=!0,o())},r}(),s=Function.call;function i(e){return function(){return s.apply(e,arguments)}}var a,c=i(Array.prototype.slice),u=i(Array.prototype.reduce||function(e,t){var n=0,o=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=o)throw new TypeError}for(;n<o;n++)n in this&&(t=e(t,this[n],n));return t}),l=i(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),E=i(Array.prototype.map||function(e,t){var n=this,o=[];return u(n,(function(r,s,i){o.push(e.call(t,s,i,n))}),void 0),o}),_=Object.create||function(e){function t(){}return t.prototype=e,new t},d=Object.defineProperty||function(e,t,n){return e[t]=n.value,e},p=i(Object.prototype.hasOwnProperty),f=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},I=i(Object.prototype.toString);a="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e};function h(t,n){if(e&&n.stack&&"object"===typeof t&&null!==t&&t.stack){for(var o=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(d(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),o.unshift(r.stack));o.unshift(t.stack);var s=function(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;++o){var r=t[o];A(r)||T(r)||!r||n.push(r)}return n.join("\n")}(o.join("\nFrom previous event:\n"));d(t,"stack",{value:s,configurable:!0})}}function T(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function O(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(e);return o?[o[1],Number(o[2])]:void 0}function A(e){var o=O(e);if(!o)return!1;var r=o[0],s=o[1];return r===t&&s>=n&&s<=Y}function R(){if(e)try{throw new Error}catch(e){var n=e.stack.split("\n"),o=O(n[0].indexOf("@")>0?n[1]:n[2]);if(!o)return;return t=o[0],o[1]}}function N(e){return e instanceof C?e:D(e)?function(e){var t=S();return N.nextTick((function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}})),t.promise}(e):B(e)}N.resolve=N,N.nextTick=r,N.longStackSupport=!1;var g=1;function S(){var t,n=[],o=[],r=_(S.prototype),s=_(C.prototype);if(s.promiseDispatch=function(e,r,s){var i=c(arguments);n?(n.push(i),"when"===r&&s[1]&&o.push(s[1])):N.nextTick((function(){t.promiseDispatch.apply(t,i)}))},s.valueOf=function(){if(n)return s;var e=w(t);return P(e)&&(t=e),e},s.inspect=function(){return t?t.inspect():{state:"pending"}},N.longStackSupport&&e)try{throw new Error}catch(e){s.stack=e.stack.substring(e.stack.indexOf("\n")+1),s.stackCounter=g++}function i(r){t=r,N.longStackSupport&&e&&(s.source=r),u(n,(function(e,t){N.nextTick((function(){r.promiseDispatch.apply(r,t)}))}),void 0),n=void 0,o=void 0}return r.promise=s,r.resolve=function(e){t||i(N(e))},r.fulfill=function(e){t||i(B(e))},r.reject=function(e){t||i(x(e))},r.notify=function(e){t||u(o,(function(t,n){N.nextTick((function(){n(e)}))}),void 0)},r}function m(e){if("function"!==typeof e)throw new TypeError("resolver must be a function.");var t=S();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function L(e){return m((function(t,n){for(var o=0,r=e.length;o<r;o++)N(e[o]).then(t,n)}))}function C(e,t,n){void 0===t&&(t=function(e){return x(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var o=_(C.prototype);if(o.promiseDispatch=function(n,r,s){var i;try{i=e[r]?e[r].apply(o,s):t.call(o,r,s)}catch(e){i=x(e)}n&&n(i)},o.inspect=n,n){var r=n();"rejected"===r.state&&(o.exception=r.reason),o.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?o:e.value}}return o}function y(e,t,n,o){return N(e).then(t,n,o)}function w(e){if(P(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function P(e){return e instanceof C}function D(e){return(t=e)===Object(t)&&"function"===typeof e.then;var t}"object"===typeof process&&process&&process.env&&process.env.Q_DEBUG&&(N.longStackSupport=!0),N.defer=S,S.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(n)}},N.Promise=m,N.promise=m,m.race=L,m.all=$,m.reject=x,m.resolve=N,N.passByCopy=function(e){return e},C.prototype.passByCopy=function(){return this},N.join=function(e,t){return N(e).join(t)},C.prototype.join=function(e){return N([this,e]).spread((function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)}))},N.race=L,C.prototype.race=function(){return this.then(N.race)},N.makePromise=C,C.prototype.toString=function(){return"[object Promise]"},C.prototype.then=function(e,t,n){var o=this,r=S(),s=!1;return N.nextTick((function(){o.promiseDispatch((function(t){s||(s=!0,r.resolve(function(t){try{return"function"===typeof e?e(t):t}catch(e){return x(e)}}(t)))}),"when",[function(e){s||(s=!0,r.resolve(function(e){if("function"===typeof t){h(e,o);try{return t(e)}catch(e){return x(e)}}return x(e)}(e)))}])})),o.promiseDispatch(void 0,"when",[void 0,function(e){var t,o=!1;try{t=function(e){return"function"===typeof n?n(e):e}(e)}catch(e){if(o=!0,!N.onerror)throw e;N.onerror(e)}o||r.notify(t)}]),r.promise},N.tap=function(e,t){return N(e).tap(t)},C.prototype.tap=function(e){return e=N(e),this.then((function(t){return e.fcall(t).thenResolve(t)}))},N.when=y,C.prototype.thenResolve=function(e){return this.then((function(){return e}))},N.thenResolve=function(e,t){return N(e).thenResolve(t)},C.prototype.thenReject=function(e){return this.then((function(){throw e}))},N.thenReject=function(e,t){return N(e).thenReject(t)},N.nearer=w,N.isPromise=P,N.isPromiseAlike=D,N.isPending=function(e){return P(e)&&"pending"===e.inspect().state},C.prototype.isPending=function(){return"pending"===this.inspect().state},N.isFulfilled=function(e){return!P(e)||"fulfilled"===e.inspect().state},C.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},N.isRejected=function(e){return P(e)&&"rejected"===e.inspect().state},C.prototype.isRejected=function(){return"rejected"===this.inspect().state};var U,v,k,b=[],G=[],M=[],F=!0;function V(){b.length=0,G.length=0,F||(F=!0)}function x(e){var t=C({when:function(t){return t&&function(e){if(F){var t=l(G,e);-1!==t&&("object"===typeof process&&"function"===typeof process.emit&&N.nextTick.runAfter((function(){var n=l(M,e);-1!==n&&(process.emit("rejectionHandled",b[t],e),M.splice(n,1))})),G.splice(t,1),b.splice(t,1))}}(this),t?t(e):this}},(function(){return this}),(function(){return{state:"rejected",reason:e}}));return function(e,t){F&&("object"===typeof process&&"function"===typeof process.emit&&N.nextTick.runAfter((function(){-1!==l(G,e)&&(process.emit("unhandledRejection",t,e),M.push(e))})),G.push(e),t&&"undefined"!==typeof t.stack?b.push(t.stack):b.push("(no stack) "+t))}(t,e),t}function B(e){return C({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return f(e)}},void 0,(function(){return{state:"fulfilled",value:e}}))}function W(e,t,n){return N(e).spread(t,n)}function K(e,t,n){return N(e).dispatch(t,n)}function $(e){return y(e,(function(e){var t=0,n=S();return u(e,(function(o,r,s){var i;P(r)&&"fulfilled"===(i=r.inspect()).state?e[s]=i.value:(++t,y(r,(function(o){e[s]=o,0===--t&&n.resolve(e)}),n.reject,(function(e){n.notify({index:s,value:e})})))}),void 0),0===t&&n.resolve(e),n.promise}))}function H(e){if(0===e.length)return N.resolve();var t=N.defer(),n=0;return u(e,(function(o,r,s){var i=e[s];n++,y(i,(function(e){t.resolve(e)}),(function(e){if(0===--n){var o=e||new Error(""+e);o.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+o.message,t.reject(o)}}),(function(e){t.notify({index:s,value:e})}))}),void 0),t.promise}function j(e){return y(e,(function(e){return e=E(e,N),y($(E(e,(function(e){return y(e,o,o)}))),(function(){return e}))}))}N.resetUnhandledRejections=V,N.getUnhandledReasons=function(){return b.slice()},N.stopUnhandledRejectionTracking=function(){V(),F=!1},V(),N.reject=x,N.fulfill=B,N.master=function(e){return C({isDef:function(){}},(function(t,n){return K(e,t,n)}),(function(){return N(e).inspect()}))},N.spread=W,C.prototype.spread=function(e,t){return this.all().then((function(t){return e.apply(void 0,t)}),t)},N.async=function(e){return function(){function t(e,t){var s;if("undefined"===typeof StopIteration){try{s=n[e](t)}catch(e){return x(e)}return s.done?N(s.value):y(s.value,o,r)}try{s=n[e](t)}catch(e){return function(e){return"[object StopIteration]"===I(e)||e instanceof a}(e)?N(e.value):x(e)}return y(s,o,r)}var n=e.apply(this,arguments),o=t.bind(t,"next"),r=t.bind(t,"throw");return o()}},N.spawn=function(e){N.done(N.async(e)())},N.return=function(e){throw new a(e)},N.promised=function(e){return function(){return W([this,$(arguments)],(function(t,n){return e.apply(t,n)}))}},N.dispatch=K,C.prototype.dispatch=function(e,t){var n=this,o=S();return N.nextTick((function(){n.promiseDispatch(o.resolve,e,t)})),o.promise},N.get=function(e,t){return N(e).dispatch("get",[t])},C.prototype.get=function(e){return this.dispatch("get",[e])},N.set=function(e,t,n){return N(e).dispatch("set",[t,n])},C.prototype.set=function(e,t){return this.dispatch("set",[e,t])},N.del=N.delete=function(e,t){return N(e).dispatch("delete",[t])},C.prototype.del=C.prototype.delete=function(e){return this.dispatch("delete",[e])},N.mapply=N.post=function(e,t,n){return N(e).dispatch("post",[t,n])},C.prototype.mapply=C.prototype.post=function(e,t){return this.dispatch("post",[e,t])},N.send=N.mcall=N.invoke=function(e,t){return N(e).dispatch("post",[t,c(arguments,2)])},C.prototype.send=C.prototype.mcall=C.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])},N.fapply=function(e,t){return N(e).dispatch("apply",[void 0,t])},C.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},N.try=N.fcall=function(e){return N(e).dispatch("apply",[void 0,c(arguments,1)])},C.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},N.fbind=function(e){var t=N(e),n=c(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(c(arguments))])}},C.prototype.fbind=function(){var e=this,t=c(arguments);return function(){return e.dispatch("apply",[this,t.concat(c(arguments))])}},N.keys=function(e){return N(e).dispatch("keys",[])},C.prototype.keys=function(){return this.dispatch("keys",[])},N.all=$,C.prototype.all=function(){return $(this)},N.any=H,C.prototype.any=function(){return H(this)},N.allResolved=(U=j,v="allResolved",k="allSettled",function(){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(v+" is deprecated, use "+k+" instead.",new Error("").stack),U.apply(U,arguments)}),C.prototype.allResolved=function(){return j(this)},N.allSettled=function(e){return N(e).allSettled()},C.prototype.allSettled=function(){return this.then((function(e){return $(E(e,(function(e){function t(){return e.inspect()}return(e=N(e)).then(t,t)})))}))},N.fail=N.catch=function(e,t){return N(e).then(void 0,t)},C.prototype.fail=C.prototype.catch=function(e){return this.then(void 0,e)},N.progress=function(e,t){return N(e).then(void 0,void 0,t)},C.prototype.progress=function(e){return this.then(void 0,void 0,e)},N.fin=N.finally=function(e,t){return N(e).finally(t)},C.prototype.fin=C.prototype.finally=function(e){if(!e||"function"!==typeof e.apply)throw new Error("Q can't apply finally callback");return e=N(e),this.then((function(t){return e.fcall().then((function(){return t}))}),(function(t){return e.fcall().then((function(){throw t}))}))},N.done=function(e,t,n,o){return N(e).done(t,n,o)},C.prototype.done=function(e,t,n){var o=function(e){N.nextTick((function(){if(h(e,r),!N.onerror)throw e;N.onerror(e)}))},r=e||t||n?this.then(e,t,n):this;"object"===typeof process&&process&&process.domain&&(o=process.domain.bind(o)),r.then(void 0,o)},N.timeout=function(e,t,n){return N(e).timeout(t,n)},C.prototype.timeout=function(e,t){var n=S(),o=setTimeout((function(){t&&"string"!==typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)}),e);return this.then((function(e){clearTimeout(o),n.resolve(e)}),(function(e){clearTimeout(o),n.reject(e)}),n.notify),n.promise},N.delay=function(e,t){return void 0===t&&(t=e,e=void 0),N(e).delay(t)},C.prototype.delay=function(e){return this.then((function(t){var n=S();return setTimeout((function(){n.resolve(t)}),e),n.promise}))},N.nfapply=function(e,t){return N(e).nfapply(t)},C.prototype.nfapply=function(e){var t=S(),n=c(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},N.nfcall=function(e){var t=c(arguments,1);return N(e).nfapply(t)},C.prototype.nfcall=function(){var e=c(arguments),t=S();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},N.nfbind=N.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var n=t.concat(c(arguments)),o=S();return n.push(o.makeNodeResolver()),N(e).fapply(n).fail(o.reject),o.promise}},C.prototype.nfbind=C.prototype.denodeify=function(){var e=c(arguments);return e.unshift(this),N.denodeify.apply(void 0,e)},N.nbind=function(e,t){var n=c(arguments,2);return function(){var o=n.concat(c(arguments)),r=S();return o.push(r.makeNodeResolver()),N((function(){return e.apply(t,arguments)})).fapply(o).fail(r.reject),r.promise}},C.prototype.nbind=function(){var e=c(arguments,0);return e.unshift(this),N.nbind.apply(void 0,e)},N.nmapply=N.npost=function(e,t,n){return N(e).npost(t,n)},C.prototype.nmapply=C.prototype.npost=function(e,t){var n=c(t||[]),o=S();return n.push(o.makeNodeResolver()),this.dispatch("post",[e,n]).fail(o.reject),o.promise},N.nsend=N.nmcall=N.ninvoke=function(e,t){var n=c(arguments,2),o=S();return n.push(o.makeNodeResolver()),N(e).dispatch("post",[t,n]).fail(o.reject),o.promise},C.prototype.nsend=C.prototype.nmcall=C.prototype.ninvoke=function(e){var t=c(arguments,1),n=S();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},N.nodeify=function(e,t){return N(e).nodeify(t)},C.prototype.nodeify=function(e){if(!e)return this;this.then((function(t){N.nextTick((function(){e(null,t)}))}),(function(t){N.nextTick((function(){e(t)}))}))},N.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Y=R();return N}))},281:(e,t,n)=>{"use strict";function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=o(n(109));function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"===typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function u(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t){return function(){return t(e.apply(this,arguments))}}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}t.UY=function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}var i,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:c.INIT}))throw new Error(s(12));if("undefined"===typeof n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))}))}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var o=!1,r={},c=0;c<a.length;c++){var u=a[c],l=n[u],E=e[u],_=l(E,t);if("undefined"===typeof _){t&&t.type;throw new Error(s(14))}r[u]=_,o=o||_!==E}return(o=o||a.length!==Object.keys(e).length)?r:e}},t.MT=function e(t,n,o){var r;if("function"===typeof n&&"function"===typeof o||"function"===typeof o&&"function"===typeof arguments[3])throw new Error(s(0));if("function"===typeof n&&"undefined"===typeof o&&(o=n,n=void 0),"undefined"!==typeof o){if("function"!==typeof o)throw new Error(s(1));return o(e)(t,n)}if("function"!==typeof t)throw new Error(s(2));var a=t,l=n,E=[],_=E,d=!1;function p(){_===E&&(_=E.slice())}function f(){if(d)throw new Error(s(3));return l}function I(e){if("function"!==typeof e)throw new Error(s(4));if(d)throw new Error(s(5));var t=!0;return p(),_.push(e),function(){if(t){if(d)throw new Error(s(6));t=!1,p();var n=_.indexOf(e);_.splice(n,1),E=null}}}function h(e){if(!u(e))throw new Error(s(7));if("undefined"===typeof e.type)throw new Error(s(8));if(d)throw new Error(s(9));try{d=!0,l=a(l,e)}finally{d=!1}for(var t=E=_,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:c.INIT}),(r={dispatch:h,subscribe:I,getState:f,replaceReducer:function(e){if("function"!==typeof e)throw new Error(s(10));a=e,h({type:c.REPLACE})}})[i]=function(){var e,t=I;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[i]=function(){return this},e},r}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(698);if(!!!window.Promise){const e="This browser is not supported by OneID because it does not honor Promise.";throw console.warn(e),new Error(e)}Object.fromEntries=Object.fromEntries||e.m8})(),(()=>{"use strict";const e={ERROR:5,WARN:4,INFO:3,DEBUG:2,LOG:1,OFF:100};let t=e.INFO,o=!1;const r={ERROR:"color:#FC0C1B;background-color:#FFEFEF",WARN:"color:#5B3A06;background-color:#FFFBE6",INFO:"color:#363F47;background-color:#e1e9ff",DEBUG:"color:#444;background-color:#eee",LOG:"color:#000;background-color:transparent",DEFAULT:"color:#000;background-color:transparent;font-weight:",ONEID:"color:#2887b4;background-color:transparent;font-weight:bold"};let s=c();function i(e){"number"===typeof e&&(t=e,s=c())}function a(n){return t>e[n]?(e="",t={})=>{}:o?function(e){const t=["%c[OneID]%c %c[%s]%c: ",r.ONEID,r.DEFAULT,r[e],e,r.DEFAULT];return window.console[e.toLowerCase()].bind(window.console,...t)}(n):function(e){return window.console[e.toLowerCase()].bind(window.console,"[OneID] [%s]: ",e)}(n)}function c(){return{error:a("ERROR"),warn:a("WARN"),info:a("INFO"),debug:a("DEBUG"),log:a("LOG")}}var u=n(698);const l=/^\.?www/,E=/^\.?www\./,_=/^(.+)@([a-z0-9-]+)(\.([a-z]+))+$/i,d=/^[a-z]{2}-[A-Z]{2}$/,p=/LOGIN_FLOW|RECOVERY_FLOW|CONTACT_CSR_FLOW/i,f=/-(DEV|VALID|VAL|QA|STAGE|PROD)$/,I=/^{?[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}}?$/,h={LOG_LEVEL:"oid_loglevel",FEATURE_FLAGS:"oid_feature"};function T(e){return e&&document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")||null}function O(e,t,n){if(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${n?`; path=${n}`:""}`,t&&!l.test(t)){const o=`www${/^\./.test(t)?"":"."}${t}`;s.debug(`also deleting cookie from ${o}`),O(e,o,n)}return!0}function A(e,t,n,o,r,i){let a,c=!1;if(E.test(n)&&(n=n.replace(l,""),c=!0),!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;if(a=`${e}=${t}`,r&&r instanceof Date&&(a+=`; expires=${r.toUTCString()}`),n&&(a+=`; domain=${n}`),o&&(a+=`; path=${o}`),i&&(a+="; secure"),document.cookie=a,c){const t=`www${/^\./.test(n)?"":"."}${n}`;s.debug(`calling delete on domain ${t}`),O(e,t,o||"")}return!0}const R={getCookieDomain:function(){const e=(0,u.KT)(window.location.hostname);return e?`.${e}`:".go.com"}};function N(){let e=window.location.hostname;return"localhost"===e?e:(e=e.replace(E,""),`.${e}`)}const g={};function S(){return g}function m(e,t){Array.isArray(g[e])||(g[e]=[]),g[e].push(t)}function L(e,t){if(Array.isArray(g[e]))if("undefined"!==typeof t)for(let n=0;n<g[e].length;n++)g[e][n]===t&&g[e].splice(n,1);else g[e]=[]}function C(e,t){const n=S();Array.isArray(n[e])&&n[e].forEach((e=>{try{e(t)}catch(e){}}))}function y(e,t,n,o,r){return{status:e,response:t,statusText:o,headers:(s=n,(s||"").split("\n").map((e=>{const t=e.indexOf(":")||0;return[e.substr(0,t).trim(),e.substr(t+1).trim()]})).filter((e=>!!e[0])).reduce(((e,t)=>{const[n,o]=t;return{[n]:o,...e}}),{})),debug:{xhrFailureReason:r}};var s}function w(e,t,n,o,r){return new Promise((s=>{const i=new XMLHttpRequest;let a;i.open(e,t,!0),Object.keys(o||{}).forEach((e=>{const t=o[e];"undefined"!==typeof t&&i.setRequestHeader((e||"").toLowerCase(),t)})),i.onload=()=>{clearTimeout(a),s(function(e){const t=e.statusText||"",n="response"in e?e.response:e.responseText,o=e.getAllResponseHeaders();let{status:r}=e;return 0===r&&(r=n?200:0),y(r,n,o,t)}(i))},i.onabort=()=>{clearTimeout(a),s(y(-1,null,null,"","onabort"))},i.onerror=()=>{clearTimeout(a),s(y(-1,null,null,"","onerror"))},i.send("undefined"!==n?n:null),"number"===typeof r&&r>0&&(a=setTimeout((()=>{s(y(-1,null,null,"","setTimeout"))}),r))}))}function P(e){const t=e||{},{responseData:n,headers:o,status:r}=function(e){let t;try{t={...JSON.parse(e.response)}}catch(e){t={}}return{responseData:t,headers:e.headers||{},status:e.status||-1}}(e),s=n.data||n||null,i=n.error||null,a=-1===r,c=!a&&!!i,u=a||c,{debug:l}=t,E={status:r,data:s,error:i,headers:o,isError:u,isNetworkError:a,isAppError:c,debug:l};if(a)throw E;return E}function D(e){let{url:t}=e.request;const{method:n,body:o,headers:r,query:s,timeoutMs:i}=e.request,a=function(e={}){const t=[];return Object.keys(e).forEach((n=>{Array.isArray(e[n])?e[n].forEach((e=>{t.push([n,e])})):t.push([n,e[n]])})),t.map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}(s);return a&&(t+=`?${a}`),w(n,t,JSON.stringify(o),r,i).then((t=>Object.assign(e,{response:P(t)})))}function U(e,t){const n=this[e];if("function"!==typeof t)throw new Error("Mutator must be a function");-1===n.indexOf(t)&&n.push(t)}function v(e){return async t=>{const n=await e(t);return void 0===n?t:n}}function k(e,...t){const n=e(...t),o=this.request,r=this.response;let s=Promise.resolve({request:n,response:null});o.forEach((e=>{s=s.then(v(e))}));let i=s.then(D);return r.forEach((e=>{i=i.then(v(e))})),i.then((e=>e.response))}function b(e){const t={request:[],response:[]},n={};return Object.keys(e).forEach((o=>{n[o]=k.bind(t,e[o])})),n.addRequestMutator=U.bind(t,"request"),n.addResponseMutator=U.bind(t,"response"),n}let G;const M={langPref:"en-US",cssOverride:""};function F(){return G}const V={AGEBAND_COUNTRY:"ac",AGEBAND_GATING:"ab2",AGEBAND_DOB:"abdob",API:"api",IDENTIFIER:"idn",MUTEX:"mtx",OBO:"obo",RECOVERY_TOKEN:"rt",S2:"s2",SWID:"SWID",LOWERCASE_SWID:"swid",SWID_NT:"SWID_NT",TOKEN:"token",TRUST_STATE:"ts"};function x(e,t=!1){if(!e)return;const n=new Date(Date.now());n.setFullYear(n.getFullYear()+1),A(V.SWID,e,R.getCookieDomain(),"/",n),t&&A(V.SWID_NT,1,R.getCookieDomain(),"/",n)}function B(){return T(V.SWID)}const W={TOP:"|",VERSION:"=",DOUBLE_CHAR:"#",TRIPLE_CHAR:"$",NEGATIVE:"-"},K={STRING:"string",DATE:"date",INT:"int",BOOLEAN:"boolean",UUID:"uuid",UNKNOWN:"unknown",JSON:"json",STRING_RAW:"string_raw"},$={currentVersion:"5",versions:{4:[{key:"token.access_token",type:K.STRING},{key:"token.swid",type:K.UUID},{key:"token.refresh_token",type:K.STRING},{key:"token.ttl",type:K.INT},{key:"token.refresh_ttl",type:K.INT},{key:"token.sso",type:K.UUID},{key:"token.created",type:K.STRING},{key:"token.lastChecked",type:K.STRING},{key:"token.expires",type:K.STRING},{key:"token.refresh_expires",type:K.STRING},{key:"token.authenticator",type:K.STRING},{key:"token.blue_cookie",type:K.STRING},{key:"token.high_trust_expires_in",type:K.INT},{key:"token.initial_grant_in_chain_time",type:K.INT},{key:"token.id_token",type:K.STRING},{key:"token.sessionTransferKey",type:K.STRING}],5:[{key:"token",type:K.JSON},{key:"id_token",type:K.STRING_RAW}]},vals:{4:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~",5:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~"}};function H(e,t=$.currentVersion){const n=$.versions[t];if(!n)return;const o={token:(0,u.d9)(e.token),id_token:e.token.id_token};return delete o.token.id_token,delete o.token.scope,t+W.VERSION+function(e,t){return t.map((t=>function(e,t){let n;const o=$.vals[$.currentVersion];if(!e||!t||!t.key||!t.type)return;if(n=(0,u.U2)(e,t.key),"undefined"===typeof n||null===n)return;switch(t.type){case K.STRING:n=a(n);break;case K.DATE:n=c(n);break;case K.INT:n=s(n);break;case K.BOOLEAN:n=E(n);break;case K.UUID:n=l(n);break;case K.STRING_RAW:break;case K.JSON:n=r(n);break;default:n=a(n)}return n;function r(e){return"object"!==typeof e?e:(0,u.h$)(JSON.stringify(e))}function s(e){let t="";if(e=parseInt(e,10),!Number.isNaN(e)){if(0===e)return o.charAt(0);for(e<0&&(t=W.NEGATIVE,e*=-1);e>0;){const n=Math.floor(e/o.length),r=e-n*o.length;t+=o.charAt(r),e=n}return t}}function i(e,t){for(let n=0;n<t;n++)e+=o.charAt(0);return e}function a(e){let t,n="";if("undefined"!==typeof e&&null!==e)return`${e}`.split("").forEach((e=>{t=s(e.charCodeAt()-32),2===t.length?t=W.DOUBLE_CHAR+t:3===t.length&&(t=W.TRIPLE_CHAR+t),n+=t})),n}function c(e){return"[object Date]"!==Object.prototype.toString.call(e)&&(e=new Date(e)),s(e.getTime())}function l(e){let t="",n="";const r=8;if("[object String]"!==Object.prototype.toString.call(e)||!I.test(e))return a(e);n+=/^{[^}]*}$/.test(e)?"1":"0",n+=/[A-F]/.test(e)?"1":"0",e=e.replace(/[{\-}]/g,"");const c=Math.floor(e.length/r);for(let n=0;n<c;n++){const o=e.substr(n*r,r),a=s(parseInt(o,16));t+=i(a,6-a.length)}return`${o.charAt(parseInt(n,2))}${t}`}function E(e){if("true"===e||"1"===e||!0===e||1===e)e=1;else{if("false"!==e&&"0"!==e&&!1!==e&&0!==e)return;e=0}return s(e)}}(e,t))).join(W.TOP)}(o,n)}function j(e){if(!e)return;const t=e.substring(e.indexOf(W.VERSION)+1),n=e.substring(0,e.indexOf(W.VERSION)),o=$.versions[n];if(!o)return;const r=function(e,t,n){const o={};return e.split("|").forEach(((e,r)=>{(0,u.t8)(o,t[r].key,function(e,t,n){if(""===e)return null;const o=$.vals[n]||$.vals[$.currentVersion];switch(t.type){case K.STRING:e=i(e);break;case K.DATE:e=a(e);break;case K.INT:e=s(e);break;case K.BOOLEAN:e=l(e);break;case K.UUID:e=c(e);break;case K.STRING_RAW:break;case K.JSON:e=r(e)}return e;function r(e){let t;try{const n=(0,u.tV)(e);t=JSON.parse(n)}catch(t){return e}return t}function s(e){let t=0,n=1,r=1;if(0!==(e=(e||"").split("")).length)return e[0]===W.NEGATIVE&&(n=-1,e.splice(0,1)),e.forEach((e=>{t+=o.indexOf(e)*r,r*=o.length})),t*n}function i(e){let t=0;const n=e.length;let o,r="";if(0!==n){for(;t<n;){switch(e[t]){case W.DOUBLE_CHAR:o=2,t+=1;break;case W.TRIPLE_CHAR:o=3,t+=1;break;default:o=1}r+=String.fromCharCode(s(e.substr(t,o))+32),t+=o}return r}}function a(e){if(e=s(e))return new Date(e)}function c(e){let t=parseInt(o.indexOf(e[0]),10),n=!1,r=!1,a="";const c=6,u=e;Number.isNaN(t)||(t=t.toString(2),t.length<2&&(t=`0${t}`),n="1"===t[0],r="1"===t[1],e=e.substring(1));const l=Math.floor(e.length/c);for(let t=0;t<l;t++){let n=s(e.substr(t*c,c)).toString(16);for(;n.length<8;)n=`0${n}`;a+=n}a=r?a.toUpperCase():a.toLowerCase();const E=`${(n?"{":"")+a.substring(0,8)}-${a.substring(8,12)}-${a.substring(12,16)}-${a.substring(16,20)}-${a.substring(20)}${n?"}":""}`;return I.test(E)?E:i(u)}function l(e){return 1===s(e)}}(e,t[r],n))})),o}(t,o,n),{token:s}=r;return s.id_token=r.id_token,s.isExpired=Y(s),s}function Y(e){return!(q(e)&&Date.now()<e.exp)}function q(e){if(!e)return!1;return"string"===typeof e.swid&&"number"===typeof e.iat&&"string"===typeof e.access_token&&"number"===typeof e.exp&&(!e.refresh_token||"number"===typeof e.refresh_exp)}function Z(e){const{exp:t,iat:n}=e,o=n+.8*(t-n);return Date.now()>o}function z(e){return new Promise((t=>{const n={};window.addEventListener("message",(function o(r){r.data&&r.data.targetName===e&&("comm-bootstrap-start"===r.data.event&&r.source.postMessage({event:"comm-bootstrap-ack",targetName:e},"*"),"comm-bootstrap-data"===r.data.event&&(n[r.data.port]=r.ports[0],Object.keys(n).length>=r.data.ports.length&&(window.removeEventListener("message",o),t(n))))}))}))}function Q(e,t=3e4){const n=Object.keys(e.frames).reduce(((t,n)=>({...t,[n]:{name:n,window:e.frames[n].window,ports:{},origin:e.frames[n].origin}})),{}),o=[];return Object.keys(e.frames).forEach((t=>{const o=n[t];e.frames[t].channels.forEach((e=>{const r=n[e];if(!o.ports[e]){const n=new MessageChannel;o.ports[e]=n.port1,r.ports[t]=n.port2}}))})),Object.keys(n).forEach((e=>{var r;o.push(function(e,t){return new Promise(((n,o)=>{const r=Date.now(),s=setInterval(i,100);function i(){if(Date.now()-r>t)return c(),void o(new Error("Bootstrap timed out"));e.window.postMessage({event:"comm-bootstrap-start",targetName:e.name},e.origin)}function a(t){const o=t.data&&t.data.targetName;t.source===e.window&&o&&o===e.name&&t.data&&"comm-bootstrap-ack"===t.data.event&&(c(),n())}function c(){clearInterval(s),window.removeEventListener("message",a)}window.addEventListener("message",a),i()}))}(n[e],t).then((r=n[e],()=>{const e=Object.keys(r.ports);for(const t of e)r.window.postMessage({event:"comm-bootstrap-data",targetName:r.name,ports:e,port:t},r.origin,[r.ports[t]])})))})),Promise.all(o)}const X=["CALL","CALL_DONE","EVENT"];function J(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_=+";let t="";for(let n=0;n<24;n+=1){t+=e[Math.floor(Math.random()*e.length)]}return t}function ee(e,t="DEFAULT"){const n=`PatchBay[${t}]`,o={},r={},i={};return Object.keys(e).forEach((t=>{e[t].onmessage=function(e){return t=>{if(!t||!t.data||"object"!==typeof t.data)return;const{data:n}=t;-1!==X.indexOf(n.type)&&(a(n.name,e,n),setTimeout(c.bind(null,n.name)))}}(t)})),{addHandler:function(e,t){if("function"!==typeof t)return;o[e]=t,c(e)},message:l,broadcast:function(t,n){const o={id:J(),type:"EVENT",data:n,name:t};a(t,null,o),setTimeout(c.bind(null,t)),Object.keys(e).forEach((e=>{l(e,t,n)}))},call:function(e,t,o){return new Promise(((r,a)=>{const c=J();s.debug(`${n}: call() invoked, target=${e}, name=${t}, id=${c}`),i[c]={resolve:r,reject:a},E(e,t,"CALL",o,c)}))}};function a(e,t,o){s.debug(`${n}: queueMessage(name=${e}, source=${t})`),r[e]||(r[e]=[]),r[e].push({source:t,data:o})}function c(e){if(s.debug(`${n}: flushQueue(name=${e})`),!Array.isArray(r[e])||r[e].length<1)return void s.debug(`${n}: Nothing in queue for '${e}', exit early`);const t=[];for(;r[e].length;){const{source:a,data:c}=r[e].pop(),l=c&&c.type||void 0,E=c&&c.id||void 0,_=`${n} - ${E||"NO_ID"}`;if(s.debug(`${_}: flushQueue loop, source=${a}, type=${l}`),"CALL"===l||"EVENT"===l){let n;if(!o[e]){s.debug(`${_}: flushQueue loop, NO HANDLER FOR name=${e}, deferring`),t.push({source:a,data:c});continue}s.debug(`${_}: flushQueue loop, about to call handler for name=${e}`),n=o[e](c&&c.data),s.debug(`${_}: flushQueue loop, obtained return value from name=${e}`),"CALL"===l&&(n&&n.then||(s.debug(`${_}: flushQueue loop, handler for name=${e} returned plain value`),n=Promise.resolve(n)),n.then((t=>{s.debug(`${_}: flushQueue, promise resolved for name=${e}, messaging back`),u(a,e,t,E,"resolved")})).catch((t=>{s.debug(`${_}: flushQueue, promise caught error for name=${e}, messaging back`),u(a,e,t,E,"rejected")})))}if("CALL_DONE"===l){const{status:e}=c;if(!i[E]){s.debug(`${_}: flushQueue loop, pendingCalls EMPTY FOR id=${E}!!!`);continue}"resolved"===e?(s.debug(`${_}: flushQueue loop, resolving promise for id=${E}`),i[E].resolve(c.data)):(s.debug(`${_}: flushQueue loop, rejecting promise for id=${E}`),i[E].reject(c.data)),delete i[E]}}for(const o of t)s.debug(`${n}: flushQueue, pushing deferred item back into queue, name=${e}`),r[e].push(o)}function u(e,t,n,o,r){E(e,t,"CALL_DONE",n,o,r)}function l(e,t,n){E(e,t,"EVENT",n)}function E(o,r,i,u,l,E){if(l=l||J(),o===t)return s.debug(`${n}: Target is self...`),a(r,o,{id:l,type:i,name:r,data:u,status:E}),void setTimeout(c.bind(null,r));e[o]?e[o].postMessage({id:l,type:i,name:r,data:u,status:E}):s.debug(`${n}: Target '${o}' has not been registered!!!`)}}const te=z("outer").then((e=>new ee(e,"outer"))),ne=/^stg-|-stg\.|^stg\.cdn/,oe=/^qa-|-qa\.|:3001$|^qa\.cdn|^edna\.cdn/,re=/^val-|-val\.|^val\.cdn/,se={QA:"QA",STG:"STAGE",PROD:"PROD",VAL:"VALID"};let ie=se.PROD,ae="";function ce(e="outer"){const t="outer"===e?(document.querySelector('script[src*="/OneID.js"]')||document.querySelector('script[src*="/OneIDMigrate.js"]')||document.querySelector('script[src*="/DisneyID.js"]')||{}).src:window.location.href,n=!!document.querySelector('script[src*="/DisneyID.js"]'),{href:o,host:r}=new URL(t);return ae=n?"outer"===e?o.replace(/^(.*)\/v2\/outer\/DisneyID\.js(?:.+)?/,"$1/v4"):o.split("/bundle")[0]:"outer"===e?o.replace(/^(.*)\/OneID(?:Migrate)?\.js/,"$1"):o.split("/bundle")[0],ne.test(r.toLowerCase())?ie=se.STG:oe.test(r.toLowerCase())?ie=se.QA:re.test(r.toLowerCase())?ie=se.VAL:void 0}function ue(){return ie}const le={AGEBAND_TIMEOUT:18e5,GUEST_TOKEN_TIMEOUT:216e5,LAUNCH_METHOD_TIMEOUT:3e4,LONG_COOKIE_YEAR_TIMEOUT:33,MAX_MUTEX_ATTEMPTS:5,MUTEX_WAIT_INTERVAL:5e3,MUTEX_TIMEOUT:2e4,OTP_RECOVERY_TIMEOUT:9e5,PULSE_TIMEOUT:700,SESSION_TIMER_POLL_INTERVAL:1e4,SHOW_SENT_MESSAGE_TIMEOUT:3e3,SUCCESS_ANIMATION_TIMEOUT:2e3,TRUST_TIMEOUT:18e5};function Ee(){const e=F(),t=ue();return te.then((n=>n.call("responder","get.cookie",`${e&&e.clientId}-${t}.${V.TOKEN}`).then((e=>j(e))).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))))}var _e=n(961);const de=[];function pe(){if(!de.length)return"";let e=de.join("|");return e.length>600&&(e=e.slice(-600)),`0|${(0,_e.compressToBase64)(e)}`}function fe(e,t,n,o){let r;const i=`WorkflowManager[${e}]: `;return{runWorkflow:function(){s.debug(`${i}WorkflowManager.runWorkflow`),s.debug(`${i}name :`,e),r=n||Object.keys(t[0])[0],s.debug(`${i}step :`,r),c()}};function a(){const e=t.find((e=>Object.keys(e)[0]===r));return e&&e[r]}function c(){var t;s.debug(`${i}Executing step ${r}`),t=`${e.toUpperCase()}>${r}`,de.push(t);const n=a(),o=Object.keys(n.results);try{n.stepExecution(u,o)}catch(e){throw s.error(e),e}}function u(t){s.debug(`${i}Step complete, result ${t}`);const{results:n}=a()||{};if(r=n&&n[t],r)return c();s.debug(`${i}Workflow complete:`,e),o&&o(t)}}const Ie={ACTION_NAME:"action_name",ERROR_CATEGORY:"error_category",ERROR_CODES:"error_codes",FLOW:"flow",SUBFLOW:"subflow",INFO:"info",NEW_RELIC:"newRelic",PAGE_VIEW:"pageView",PROBLEM:"problem",STACK_TRACE:"stack_trace",TRANSACTION_ID:"transaction_id",API_FORCE_TOKEN_REFRESH:"api:force:tokenrefresh",API_GET_ACTIVITY_STATUS:"api:get:activitystatus",API_GET_GUEST_DATA:"api:get:guest",API_GET_GUEST_NEWSLETTERS:"api:get:guestnewsletters",API_GET_INLINE_NEWSLETTERS:"api:get:inlinenewsletters",API_GET_LICENSE_PLATE_DATA_BAG:"api:get:licenseplate:databag",API_GET_LOGGED_IN_STATUS:"api:get:loggedinstatus",API_GET_TRUST_STATE_STATUS:"api:get:truststatestatus",API_INIT:"api:init",API_LAUNCH_EMAILVERIFICATION:"api:launch:emailverification",API_LAUNCH_GUESTFLOW:"api:launch:guestflow",API_LAUNCH_IDENTITYFLOW:"api:launch:identityflow",API_LAUNCH_LICENSE_PLATE:"api:launch:licenseplate",API_LAUNCH_LOGIN:"api:launch:login",API_LAUNCH_OTP_ONDEMAND:"api:launch:otp:ondemand",API_LAUNCH_LOGIN_BY_SWID:"api:launch:loginbyswid",API_LAUNCH_NEWSLETTERS:"api:launch:newsletters",API_LAUNCH_PROFILE:"api:launch:profile",API_LAUNCH_REAUTH:"api:launch:reauth",API_LAUNCH_REGISTRATION:"api:launch:registration",API_LAUNCH_SOCIAL_REGISTRATION:"api:launch:socialregistration",API_LOGOUT:"api:logout",API_REDEEM_LICENSE_PLATE_CODE:"api:redeem:licenseplate:code",API_REDEEM_SESSION_TRANSFER:"api:redeem:sessiontransfer",API_REDEEM_MAGIC_LINK_TOKEN:"api:redeem:magiclinktoken",API_SET_DO_NOT_DISTURB:"api:set:donotdisturb",API_SET_INLINE_NEWSLETTERS:"api:set:inlinenewsletters",API_GET_PPC:"api:get:ppc",API_SET_PPC:"api:set:ppc",EVENT_CLOSE:"event:ui:close",EVENT_LOGOUT:"event:logout",EVENT_AGE_GATED:"event:agegated",EVENT_CREATE:"event:create",EVENT_ERROR:"event:error",EVENT_EXPIRED_SESSION:"event:expiredsession",EVENT_EXTERNAL_LINK_EPC:"event:externallink:epc",EVENT_EXTERNAL_LINK_MYACCOUNT:"event:externallink:myaccount",EVENT_INIT:"event:init",EVENT_LOGIN:"event:login",EVENT_LOGIN_OBO:"event:login:obo",EVENT_LOW_TRUST:"event:lowtrust",EVENT_OPT_IN:"event:optin",EVENT_REAUTH:"event:reauth",EVENT_REGISTRATION_OTP_CLOSE:"event:registration:otp:close",EVENT_REFRESH:"event:refresh",EVENT_UPDATE:"event:update",BU_EVENT_TO_ACTION_NAME:{"age-gated":"EVENT_AGE_GATED",close:"EVENT_CLOSE",create:"EVENT_CREATE",error:"EVENT_ERROR",init:"EVENT_INIT",login:"EVENT_LOGIN",logout:"EVENT_LOGOUT","low-trust":"EVENT_LOW_TRUST","opt-in":"EVENT_OPT_IN",reauth:"EVENT_REAUTH",refresh:"EVENT_REFRESH",update:"EVENT_UPDATE"},CLICK_PASSWORD_CHECK_RESET_PASSWORD:"click:passwordcheck:resetpassword",CLICK_PASSWORD_CHECK_SKIP_RESET:"click:passwordcheck:skipreset",CLICK_REGISTER_BUTTON_ON_LOGIN:"click:button:login:createaccount",CLICK_LOGIN_LINK_ON_REGISTER:"click:link:register:signin",LOG_APPLICATION_ERROR:"log:application:error",LOG_ARKOSE_ERROR:"log:arkose:error",LOG_INVALID_DISPLAY_OPTION:"log:invalid:displayoption",LOG_INVALID_LEGAL_CONFIG:"log:invalid:legalconfig",LOG_INVALID_MARKETING_CONFIG:"log:invalid:marketingconfig",LOG_INVALID_OID_CONFIG:"log:invalid:oidconfig",LOG_MISSING_GUEST_DATA_ON_LOGOUT:"log:missing:guestdata:on:logout",LOG_MISSING_L10N:"log:missing:l10n",LOG_PATCHBAY_ERROR:"log:patchbay:error",LOG_PPU:"log:ppu",LOG_RECAPTCHA_ERROR:"log:recaptcha:error",LOG_UNEXPECTED_ERROR:"log:unexpected:error",LOG_VERSION_MISMATCH:"log:version:mismatch",LOG_MOBILE_DATA_MISMATCH:"log:mobile:data:mismatch",LOG_PHONE_FORMATTING_ERROR:"log:application:phone:formatting:error",SERVICE_DCF:"service:dcf",SERVICE_CHECK_AUTHORIZATION:"service:checkauthorization",SERVICE_CREATE:"service:register",SERVICE_DATE_OF_BIRTH_VALIDATE:"service:dob:validate",SERVICE_DISPLAY_NAME_VALIDATE:"service:displayname:validate",SERVICE_DOWNLOAD_CONFIG:"service:download:config",SERVICE_EMAIL_VALIDATE:"service:email:validate",SERVICE_GUEST_FLOW:"service:guestflow",SERVICE_LICENSE_PLATE_PEEK:"service:licenseplate:peek",SERVICE_LICENSE_PLATE_REDEEM:"service:licenseplate:redeem",SERVICE_LOGIN:"service:login",SERVICE_LOGIN_RECOVERY:"service:login:recovery",SERVICE_LOGOUT:"service:logout",SERVICE_NEWSLETTERS_GALC:"service:newsletters:galc",SERVICE_NEWSLETTERS_GEOGATED:"service:newsletters:geogated",SERVICE_OTP_EMAIL_VERIFICATION:"service:otprequest:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_REDEEM:"service:otpredeem:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_RESEND:"service:otprequest:emailverification:resend",SERVICE_OTP_EMAIL_UPDATE:"service:otprequest:update:email",SERVICE_OTP_EMAIL_UPDATE_REDEEM:"service:otpredeem:update:email",SERVICE_OTP_EMAIL_UPDATE_RESEND:"service:otprequest:update:email:resend",SERVICE_OTP_LOGIN_RECOVERY_METHODS:"service:otplogin:recovery:methods",SERVICE_OTP_LOGIN_BY_SWID_REQUEST:"service:otp:loginbyswid:request",SERVICE_OTP_LOGIN_BY_SWID_REDEEM:"service:otp:loginbyswid:redeem",SERVICE_OTP_LOGIN_RECOVERY_METHODS_SWID:"service:otplogin:recovery:methods:swid",SERVICE_OTP_LOGIN_REDEEM:"service:otpredeem",SERVICE_OTP_LOGIN_REQUEST_OTP:"service:otprecovery",SERVICE_OTP_LOGIN_RESEND_EMAIL:"service:otplogin:resend:email",SERVICE_OTP_LOGIN_RESEND_SMS:"service:otplogin:resend:sms",SERVICE_OTP_LOGIN_RESET_PASSWORD:"service:otplogin:resetpassword",SERVICE_OTP_LOGIN_UPGRADE_NRT:"service:otplogin:upgradenrt",SERVICE_OTP_ONDEMAND_REQUEST:"service:otp:ondemand:request",SERVICE_OTP_ONDEMAND_REDEEM:"service:otp:ondemand:redeem",SERVICE_OTP_ONDEMAND_RECOVERY_METHODS:"service:otp.ondemand:recovery:methods",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST:"service:otprequest:securityflag:login",SERVICE_OTP_SECURITY_FLAG_LOGIN_REDEEM:"service:otpredeem:securityflag:login",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST:"service:otprequest:securityflag:recovery",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REDEEM:"service:otpredeem:securityflag:recovery",SERVICE_OTP_PASSWORD_UPDATE:"service:otprequest:update:password",SERVICE_OTP_PASSWORD_UPDATE_EMAIL:"service:otprequest:update:password:email",SERVICE_OTP_PASSWORD_UPDATE_SMS:"service:otprequest:update:password:sms",SERVICE_OTP_PASSWORD_UPDATE_RESEND:"service:otprequest:update:password:resend",SERVICE_OTP_PASSWORD_UPDATE_RESEND_EMAIL:"service:otprequest:update:password:resend:email",SERVICE_OTP_PASSWORD_UPDATE_RESEND_SMS:"service:otprequest:update:password:resend:sms",SERVICE_OTP_PASSWORD_UPDATE_REDEEM:"service:otpredeem:update:password",SERVICE_OTP_PHONE_VERIFICATION:"service:otprequest:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_REDEEM:"service:otpredeem:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_RESEND:"service:otprequest:phoneverification:resend",SERVICE_PASSWORD_VALIDATE:"service:password:validate",SERVICE_PPU_PROFILE:"service:update:ppu:profile",SERVICE_PPU_PASSWORD:"service:update:ppu:password",SERVICE_REAUTH:"service:reauth",SERVICE_RECAPTCHA_CHECKBOX:"service:recaptchacheckbox",SERVICE_REFRESH_GUEST:"service:refresh:guest",SERVICE_REFRESH_TOKEN:"service:refresh:token",SERVICE_REGISTRATION_AGEGATED:"service:registration:agegated",SERVICE_REGISTRATION_GALC:"service:registration:galc",SERVICE_REGISTRATION_PIL2_NOTIFY:"service:registration:pil2:notify",SERVICE_SESSION_TRANSFER_ACTIVATE:"service:sessiontransfer:activate",SERVICE_REGISTRATION_OTP_SENT:"service:registration:otp:sent",SERVICE_REGISTRATION_OTP_RESEND:"service:registration:otp:resend",SERVICE_UPDATE_GUEST:"service:update:guest",SERVICE_UPDATE_GUEST_CREDENTIALS:"service:update:guestcredentials",SERVICE_UPDATE_MARKETING:"service:update:marketing",SERVICE_UPDATE_PASSWORD_RECOVERY_METHODS:"service:update:password:otp:recovery:methods",SERVICE_USERNAME_VALIDATE:"service:username:validate",ID_TOKEN_MASK_LENGTH:6},he={action_name:"string",alternateConfig:"string",anon:"string",appid:"string",browser:"string - added by Log.go service",client_id:"string",connection_type:"string",context:"string",conversation_id:"string",error_category:"string",error_codes:"string",experience:"string",flow:"string",id_token:"string",info:"string",lightbox_version:"string",os:"string - added by Log.go service",platform:"string - added by Log.go service",problem:"string",process_time:"string",referrer_host:"string - added by Log.go service",reporting:"string",sdk_version:"string",source:"string",stack_trace:"string",subflow:"string",swid:"string",timestamp:"string",trace:"string",transaction_id:"string",user_agent:"string - added by Log.go service"};const Te={appid:"DTCI-ONEID-UI"};let Oe;let Ae=!1,Re={},Ne={},ge=!0;function Se(){const{clientId:e,langPref:t,debug:n}=F()||{};Te.client_id=`${e}-${ue()}`,Te.locale=t,Te.sdk_version=`web ${window.ONEID_WEB_SDK_VERSION}`,function(){const e="https://feet-qa.segds.engsvc.go.com/",t="https://feet-stg.segds.engsvc.go.com/",n="https://log.go.com/",o=ue();Oe=o!==se.QA?o!==se.STG?n:t:e}(),n&&n.experimentalFeatures&&(window.newRelicRequests=[],ge=!1),Ae=!0}function me(e={}){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"optionalConfigs.experience");t&&!Pe(t)&&(t=null),n&&!De(n)&&(s.warn("optionalConfigs.experience does not pass validation, values will be ignored"),n=null),Ne=t||n?{reporting:t,...n&&{experience:n}}:{},Ne.conversationId=(0,u.Vj)()}function Le(){let e={...Re.reporting,...Ne.reporting};return Pe(e)||(s.warn("Combined reporting config does not pass validation, values will be ignored"),e={...Re.reporting}),e.experience=Ne.experience||Re.experience,e.conversationId=Ne.conversationId,{optionalConfigs:{reporting:e}}}function Ce(e){Ae||Se();const t=Date.now(),n={action_name:e};return{send:(e={})=>we({...n,...e,process_time:Date.now()-t||1})}}const ye={[Ie.API_GET_ACTIVITY_STATUS]:2,[Ie.API_GET_GUEST_DATA]:2,[Ie.API_GET_GUEST_NEWSLETTERS]:2,[Ie.API_GET_LOGGED_IN_STATUS]:2,[Ie.API_GET_TRUST_STATE_STATUS]:2,[Ie.API_INIT]:2,[Ie.API_SET_DO_NOT_DISTURB]:2,[Ie.EVENT_CLOSE]:2,[Ie.EVENT_INIT]:2,[Ie.EVENT_LOW_TRUST]:2};function we(e){s.debug("metricsNewRelic.sendNewRelicLog"),Ae||Se(),e={...Te,timestamp:Date.now(),...e};const{context:t,source:n,experience:o,conversationId:r,mid:i,...a}=(e.hasOwnProperty("reporting")?e.reporting:(0,u.U2)(Le(),"optionalConfigs.reporting"))||{};t&&(e.context=t),n&&(e.source=n),e.conversation_id=r||(0,u.Vj)(),o&&(e.experience=o),e.reporting=function(e,t){const n=[];Object.keys(t).forEach((e=>{n.push(`${e}(${t[e]})`)})),e&&n.push(`m-id(${e})`);return n.join(",")}(i,a),e.reporting||delete e.reporting,window.ONEID_WEB_SDK_MIGRATION&&(e[Ie.INFO]=e[Ie.INFO]?`${e[Ie.INFO]},isV4Migration(true)`:"isV4Migration(true)");const c=("string"===typeof e.action_name?e.action_name:"").toLowerCase(),l=ye[c];if(ge&&"number"===typeof l&&Math.random()>l/100)return void s.debug("not sending log - coin toss was tails.");const E=pe();var _;!e.trace&&E.length&&(e.trace=E),_=e,Object.keys(_).forEach((e=>{he[e]&&(_[e]||!1===_[e])||(s.debug(`analyticsUtils.removeInvalidNewRelicField: Removing key/value pair ${e}/${_[e]}`),delete _[e])}));const d=B();e.swid=d,e.anon=/{.+}/.test(d)?"false":"true";const p=Ee().then((t=>{const n=(0,u.U2)(t,"id_token");n&&(e.id_token=(0,u.Cd)(n,Ie.ID_TOKEN_MASK_LENGTH));const o=new b({sendLog:e=>({method:"GET",url:`${Oe}log`,body:{},headers:{},query:e})});return o.sendLog(e)}));if(window.newRelicRequests){const e=new Promise((e=>{p.finally(e)})).then((()=>{window.newRelicRequests=window.newRelicRequests.filter((t=>t!==e)),s.debug(`Removed resolved promise from 'newRelicRequests', ${window.newRelicRequests.length} remain`)}));window.newRelicRequests=[...window.newRelicRequests,e],s.debug(`Added promise to 'newRelicRequests', ${window.newRelicRequests.length} are now currently outstanding`)}return p}function Pe(e){let t=0;for(const n in e){if(!/^[a-zA-Z0-9_]{1,30}$/.test(n))return!1;if(e[n].length>100)return!1;if(t+=1,t>10)return!1}return!0}function De(e){return!(!e||"string"!==typeof e)&&!!/^[A-Z0-9\.\-\_]+\.EXP$/g.test(e)}function Ue(e,t,n){let o=`payload-included(${!!t})`;(e&&"error"===e.toLowerCase()||!1)&&t&&(o=`${o},event-payload(${t})`),n&&(o=`${o},${n}`),we({[Ie.ACTION_NAME]:Ie[Ie.BU_EVENT_TO_ACTION_NAME[e]]||e,[Ie.INFO]:o}),C(e,t)}function ve(){return te.then((e=>e.call("inner","config.getSiteConfig"))).then(u._A)}const ke={getGuest:"getGuest",guestLogin:"guestLogin",guestMarketingOptIn:"guestMarketingOptIn",guestRecoveryMethods:"guestRecoveryMethods",guestRegister:"guestRegister",guestUpdateBySWID:"guestUpdateBySWID",loginWithRecoveryToken:"loginWithRecoveryToken",requestOTPCodePhoneVerification:"requestOTPCodePhoneVerification",notificationOTPRecovery:"notificationOTPRecovery",notificationOTPUpdateCredentials:"notificationOTPUpdateCredentials",loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID:"loginWithRecoveryToken",otpRedeem:"otpRedeem",otpRedeemEmailVerification:"otpRedeemEmailVerification",otpRedeemUpdateCredentials:"otpRedeemUpdateCredentials",otpChangePassword:"otpChangePassword",otpUpgradeNRT:"otpUpgradeNRT",parentNotification:"parentNotification",validateDateOfBirth:"validateDateOfBirth",validateEmail:"validateEmail",validatePassword:"validatePassword",validateDisplayName:"validateDisplayName",activateSessionTransfer:"activateSessionTransfer"},be={checkAuthorization:function({accessToken:e,swid:t}){const n={method:"",url:"",body:{},headers:{},query:{}},o=`/guest/check-authorization/${t}`;return n.headers.authorization=`BEARER ${e}`,{...n,method:"GET",url:o,eventName:Ie.SERVICE_CHECK_AUTHORIZATION}},getGuest:function({accessToken:e,swid:t}){const n={method:"",url:"",body:{},headers:{},query:{}},o=`/guest/${t}`;return n.query.feature="always-get-entitlements",n.query.expand=["profile","displayname","linkedaccounts","marketing","entitlements","s2"],n.headers.authorization=`BEARER ${e}`,{...n,method:"GET",url:o,eventName:Ie.SERVICE_REFRESH_GUEST,storeResponseKey:ke.getGuest}},guestFlow:function(e,t=Ie.SERVICE_GUEST_FLOW){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest-flow",body:{email:e},eventName:t}},guestLogin:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o,arkoseToken:r}){const s={method:"",url:"",body:{},headers:{},query:{}};e&&(s.headers["device-id"]=e);o&&(s.headers["g-recaptcha-token"]=o);r&&(s.headers["g-arkose-token"]=r);return{...s,method:"POST",url:"/guest/login",body:{loginValue:t,password:n},eventName:Ie.SERVICE_LOGIN,storeResponseKey:ke.guestLogin}},guestReauth:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o,accessToken:r}){const s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${r}`,e&&(s.headers["device-id"]=e);o&&(s.headers["g-recaptcha-token"]=o);return{...s,method:"POST",url:"/guest/reauth",body:{loginValue:t,password:n},eventName:Ie.SERVICE_REAUTH,storeResponseKey:ke.guestLogin}},guestMarketingOptIn:function(e={}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/marketing",body:e,eventName:Ie.SERVICE_UPDATE_MARKETING,storeResponseKey:ke.guestMarketingOptIn}},guestRecoveryMethods:function({loginValue:e,eventName:t=Ie.SERVICE_OTP_LOGIN_RECOVERY_METHODS}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/recovery-methods",body:{loginValue:e},eventName:t,storeResponseKey:ke.guestRecoveryMethods}},guestRecoveryMethodsBySWID:function({swid:e,eventName:t=Ie.SERVICE_OTP_LOGIN_RECOVERY_METHODS_SWID}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/recovery-methods-swid",body:{swid:e},eventName:t,storeResponseKey:ke.guestRecoveryMethods}},guestRegister:function(e={}){const{password:t,profile:{username:n}={}}=e,o={autogeneratePassword:!t,autogenerateUsername:!n},r={method:"",url:"",body:{},headers:{},query:{}};e.recaptchaToken&&(r.headers["g-recaptcha-token"]=e.recaptchaToken);e.arkoseToken&&(r.headers["g-arkose-token"]=e.arkoseToken);return{...r,method:"POST",url:"/guest/register",body:e,query:o,eventName:Ie.SERVICE_CREATE,storeResponseKey:ke.guestRegister}},guestUpdateBySWID:function({guest:e,swid:t,accessToken:n,eventName:o,deviceId:r}){const s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${n}`,r&&(s.headers["device-id"]=r);return{...s,query:{feature:"no-password-reuse"},method:"POST",url:`/guest/${t}`,body:(0,u.d9)(e),eventName:o,storeResponseKey:ke.guestUpdateBySWID}},guestValidate:function({body:e,eventName:t,storeResponseKey:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/validate",body:e,eventName:t,storeResponseKey:n}},licensePlatePeek:function(e){return{method:"",url:"",body:{},headers:{},query:{},method:"GET",url:`/license-plate/code/${e}`,eventName:Ie.SERVICE_LICENSE_PLATE_PEEK}},licensePlateRedeem:function(e,t){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/license-plate/code/${e}/activate`,body:{refreshToken:t},eventName:Ie.SERVICE_LICENSE_PLATE_REDEEM}},loginWithRecoveryToken:function({swid:e,recoveryToken:t,deviceId:n}){const o={method:"",url:"",body:{},headers:{},query:{}};n&&(o.headers["device-id"]=n);return o.query.expand=["profile","displayname","linkedaccounts","marketing","entitlements","s2"],{...o,method:"POST",url:"/guest/login/recoveryToken",body:{swid:e,recoveryToken:t},eventName:Ie.SERVICE_LOGIN_RECOVERY,storeResponseKey:ke.loginWithRecoveryToken}},logout:function({swid:e,tokenAndClientIds:t=[]}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/guest/${e}/logout`,body:{tokenAndClientIds:t},eventName:Ie.SERVICE_LOGOUT}},notificationOTPEmailVerification:function({accessToken:e,eventName:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/email-verification",headers:{authorization:`BEARER ${e}`},eventName:t}},notificationOTPRecovery:function({recoveryPayload:e,eventName:t,intent:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/recovery",body:e,query:{intent:n},eventName:t,storeResponseKey:ke.notificationOTPRecovery}},notificationOTPUpdateCredentials:function({accessToken:e,eventName:t,body:n=null}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/notification/otp/update-credentials",eventName:t,body:n,storeResponseKey:ke.notificationOTPUpdateCredentials}},notificationOTPRegistration:function({email:e,accessToken:t,assessmentId:n,arkoseSessionId:o,eventName:r=Ie.SERVICE_REGISTRATION_OTP_SENT}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/registration",body:{email:e,assessmentId:n,arkoseSessionId:o},eventName:r}},oboLogin:function({oboToken:e,swid:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/login/on-behalf-of",body:{swid:t},headers:{Authorization:`BEARER ${e}`}}},otpRedeem:function({otpCode:e,sessionIds:t,eventName:n,assessmentId:o,arkoseSessionId:r}){const s={passcode:e,sessionIds:t};o&&(s.assessmentId=o);r&&(s.arkoseSessionId=r);return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/otp/redeem",body:s,eventName:n,storeResponseKey:ke.otpRedeem}},otpRedeemEmailVerification:function({accessToken:e,otpCode:t,sessionIds:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/otp/verify-email",body:{passcode:t,sessionIds:n},eventName:Ie.SERVICE_OTP_EMAIL_VERIFICATION_REDEEM,storeResponseKey:ke.otpRedeemEmailVerification}},otpRedeemUpdateCredentials:function({accessToken:e,otpCode:t,sessionIds:n,eventName:o,deviceId:r}){const s={passcode:t,sessionIds:n},i={method:"",url:"",body:{},headers:{},query:{}};i.headers.authorization=`BEARER ${e}`,r&&(i.headers["device-id"]=r);return{...i,method:"POST",url:"/otp/redeem-update-credentials",body:s,eventName:o,storeResponseKey:ke.otpRedeemUpdateCredentials}},otpChangeEmail:function({recoveryToken:e,swid:t,newEmail:n,deviceId:o}){const r=`/guest/${t}/update-credentials`,s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${e}`,o&&(s.headers["device-id"]=o);return{...s,method:"POST",url:r,body:{email:n},eventName:Ie.SERVICE_UPDATE_GUEST_CREDENTIALS}},otpChangePassword:function({recaptchaToken:e,recoveryToken:t,swid:n,newPassword:o,loginValue:r,deviceId:s}){const i=`/clickback-token/change-password/${n}`,a={method:"",url:"",body:{},headers:{},query:{}};a.headers.authorization=`BEARER ${t}`,s&&(a.headers["device-id"]=s);e&&(a.headers["g-recaptcha-token"]=e);return{...a,method:"POST",url:i,body:{newPassword:o,loginValue:r},eventName:Ie.SERVICE_OTP_LOGIN_RESET_PASSWORD,storeResponseKey:ke.otpChangePassword}},updateCredentialsBySWID:function({recoveryToken:e,swid:t,newPassword:n,eventName:o,deviceId:r}){const s=`/guest/${t}/update-credentials`,i={method:"",url:"",body:{},headers:{},query:{}};i.headers.authorization=`BEARER ${e}`,r&&(i.headers["device-id"]=r);return{...i,method:"POST",url:s,storeResponseKey:ke.loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID,body:{password:n},eventName:o}},otpUpgradeNRT:function({recaptchaToken:e,recoveryToken:t,swid:n,password:o,username:r}){const s=`/clickback-token/upgrade-nrt/${n}`;return{method:"",url:"",body:{},headers:{},query:{},method:"PUT",url:s,headers:{"g-recaptcha-token":e,authorization:`BEARER ${t}`},body:{password:o,username:r},eventName:Ie.SERVICE_OTP_LOGIN_UPGRADE_NRT,storeResponseKey:ke.otpUpgradeNRT}},refreshAuthorization:function({refreshToken:e,deviceId:t}){const n={method:"",url:"",body:{},headers:{},query:{}};t&&(n.headers["device-id"]=t);return{...n,method:"POST",url:"/guest/refresh-auth",body:{refreshToken:e},eventName:Ie.SERVICE_REFRESH_TOKEN}},redeemOTPCodePhoneVerification:function({otpCode:e,sessionIds:t,swid:n,accessToken:o,eventName:r}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${o}`},method:"POST",url:`/guest/${n}/verify/otp`,body:{passcode:e,sessionIds:t},eventName:r,storeResponseKey:ke.redeemOTPCodePhoneVerification}},requestOTPCodePhoneVerification:function({phoneGuid:e,accessToken:t,eventName:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/verification",body:{phoneGuid:e},eventName:n,storeResponseKey:ke.requestOTPCodePhoneVerification}},sendParentNotification:function({swid:e,accessToken:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/notification/parental-approval/${e}`,headers:{authorization:`BEARER ${t}`},eventName:Ie.EVENT_REGISTRATION_PIL2_NOTIFY,storeResponseKey:ke.parentNotification}},deleteAccount:function({guest:e,swid:t,accessToken:n,eventName:o}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${n}`},method:"DELETE",url:`/guest/${t}`,body:{},eventName:o,storeResponseKey:ke.deleteAccount}},activateSessionTransfer:function({accessToken:e,refreshToken:t,sessionTransferKey:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`,"Content-Type":"application/json"},method:"POST",url:"/session/transfer/activate",body:{refreshToken:t,sessionTransferKey:n},storeResponseKey:ke.activateSessionTransfer,eventName:Ie.SERVICE_SESSION_TRANSFER_ACTIVATE}},authenticateViaSessionTransferKey:function({sessionTransferKey:e,eventName:t=Ie.API_REDEEM_SESSION_TRANSFER}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/session/transfer/redeem",body:{sessionTransferKey:e},eventName:t}}};const Ge={ACCOUNT_FOUND:"ACCOUNT_FOUND",ACCOUNT_INACTIVE_VERIFICATION_REQUIRED:"ACCOUNT_INACTIVE_VERIFICATION_REQUIRED",ACCOUNT_IS_CHILDED:"ACCOUNT_IS_CHILDED",ACCOUNT_MAPPING_NOT_FOUND:"ACCOUNT_MAPPING_NOT_FOUND",ACCOUNT_MAPPING_NOT_FOUND_AND_EMAIL_NOT_FOUND:"ACCOUNT_MAPPING_NOT_FOUND_AND_EMAIL_NOT_FOUND",ACCOUNT_MAPPING_NOT_FOUND_BUT_EMAIL_FOUND:"ACCOUNT_MAPPING_NOT_FOUND_BUT_EMAIL_FOUND",ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED:"ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED",AUTHORIZATION_ACCOUNT_LOCKED_OUT:"AUTHORIZATION_ACCOUNT_LOCKED_OUT",AUTHORIZATION_ACCOUNT_SECURITY_LOCKED_OUT:"AUTHORIZATION_ACCOUNT_SECURITY_LOCKED_OUT",AUTHORIZATION_BAD_EXTERNAL_TOKEN:"AUTHORIZATION_BAD_EXTERNAL_TOKEN",AUTHORIZATION_CREDENTIALS:"AUTHORIZATION_CREDENTIALS",AUTHORIZATION_EXTERNAL_ID_MISMATCH:"AUTHORIZATION_EXTERNAL_ID_MISMATCH",AUTHORIZATION_INVALID_NETWORK:"AUTHORIZATION_INVALID_NETWORK",AUTHORIZATION_INVALID_OR_EXPIRED_TOKEN:"AUTHORIZATION_INVALID_OR_EXPIRED_TOKEN",AUTHORIZATION_INVALID_REFRESH_TOKEN:"AUTHORIZATION_INVALID_REFRESH_TOKEN",AUTHORIZATION_MASE_ERROR:"AUTHORIZATION_MASE_ERROR",AUTHORIZATION_PARENTAL_CONSENT_REQUIRED:"AUTHORIZATION_PARENTAL_CONSENT_REQUIRED",AUTHORIZATION_OTP_VERIFICATION_REQUIRED:"AUTHORIZATION_OTP_VERIFICATION_REQUIRED",CLIENT_CONFIG_ERROR:"CLIENT_CONFIG_ERROR",CONTACT_CSR:"CONTACT_CSR",DEVICE_LINK_INVALID_OTP_CODE:"DEVICE_LINK_INVALID_OTP_CODE",DEVICE_LINK_LOCKOUT_REACHED:"DEVICE_LINK_LOCKOUT_REACHED",DISALLOWED_VALUE:"DISALLOWED_VALUE",GUEST_GATED_AGEBAND:"GUEST_GATED_AGEBAND",GUEST_GATED_BOTH_EMAIL_VERIFICATION:"GUEST_GATED_BOTH_EMAIL_VERIFICATION",GUEST_GATED_EMAIL:"GUEST_GATED_EMAIL",GUEST_GATED_EMAIL_VERIFICATION:"GUEST_GATED_EMAIL_VERIFICATION",GUEST_GATED_EMBARGOED:"GUEST_GATED_EMBARGOED",GUEST_GATED_LOCATION:"GUEST_GATED_LOCATION",GUEST_GATED_PARENT_EMAIL_VERIFICATION:"GUEST_GATED_PARENT_EMAIL_VERIFICATION",GUEST_GATED_UNKNOWN:"GUEST_GATED_UNKNOWN",INUSE_VALUE:"INUSE_VALUE",INVALID_SESSION_TRANSFER_KEY:"INVALID_SESSION_TRANSFER_KEY",INVALID_PASSWORD_USING_PROFILE_INFORMATION:"INVALID_PASSWORD_USING_PROFILE_INFORMATION",INVALID_PASSWORD_PASSWORD_SAME_AS_USERNAME:"INVALID_PASSWORD_PASSWORD_SAME_AS_USERNAME",INVALID_PASSWORD_PASSWORD_SAME_AS_FIRSTNAME:"INVALID_PASSWORD_PASSWORD_SAME_AS_FIRSTNAME",INVALID_PASSWORD_PASSWORD_SAME_AS_LASTNAME:"INVALID_PASSWORD_PASSWORD_SAME_AS_LASTNAME",INVALID_VALUE:"INVALID_VALUE",INVALID_VALUE_LIKE_EMAIL:"INVALID_VALUE_LIKE_EMAIL",INVALID_VALUE_PASSWORD_SIZE:"INVALID_VALUE_PASSWORD_SIZE",INVALID_VALUE_PASSWORD_CREDITCARD:"INVALID_VALUE_PASSWORD_CREDITCARD",INVALID_VALUE_PASSWORD_PHONE_NUMBER:"INVALID_VALUE_PASSWORD_PHONE_NUMBER",INVALID_VALUE_PASSWORD_LIKE_PHONE_NUMBER:"INVALID_VALUE_PASSWORD_LIKE_PHONE_NUMBER",INVALID_VALUE_PASSWORD_TOO_COMMON:"INVALID_VALUE_PASSWORD_TOO_COMMON",INVALID_VALUE_PASSWORD_TOO_SHORT:"INVALID_VALUE_PASSWORD_TOO_SHORT",INVALID_VALUE_PASSWORD_TOO_LONG:"INVALID_VALUE_PASSWORD_TOO_LONG",INVALID_VALUE_PASSWORD_MISSING_EXPECTED_CHARS:"INVALID_VALUE_PASSWORD_MISSING_EXPECTED_CHARS",INVALID_VALUE_PASSWORD_TRIM:"INVALID_VALUE_PASSWORD_TRIM",INVALID_SIZE:"INVALID_SIZE",LOGIN_VALUE_INVALID:"LOGIN_VALUE_INVALID",MARKETING_LONG_FORM_ENABLED:"MARKETING_LONG_FORM_ENABLED",MISSING_VALUE:"MISSING_VALUE",NRT_ACCOUNT:"NRT_ACCOUNT",PASSWORDS_DONT_MATCH:"PASSWORDS_DONT_MATCH",PHONE_NOT_FOUND:"PHONE_NOT_FOUND",PHONE_NOT_VERIFIED:"PHONE_NOT_VERIFIED",PHONE_VERIFICATION_NOT_ALLOWED:"PHONE_VERIFICATION_NOT_ALLOWED",PPU_LEGAL:"PPU_LEGAL",PPU_MARKETING:"PPU_MARKETING",PPU_SECURITY:"PPU_SECURITY",PROFILE_DISABLED:"PROFILE_DISABLED",PROFILE_NOT_FOUND:"PROFILE_NOT_FOUND",PROFILE_USER_BANNED:"PROFILE_USER_BANNED",RATE_LIMITED:"RATE_LIMITED",RATE_LIMITED_API:"RATE_LIMITED_API",SERVICE_ERROR:"SERVICE_ERROR",SYSTEM_UNAVAILABLE:"SYSTEM_UNAVAILABLE",TOKEN_TOO_SHORT:"TOKEN_TOO_SHORT",UNKNOWN_ACCOUNT_STATUS:"UNKNOWN_ACCOUNT_STATUS",UNKNOWN_ERROR:"UNKNOWN_ERROR",VALID_ETAG_REQUIRED:"VALID_ETAG_REQUIRED"},Me={isPPU:[Ge.PPU_MARKETING,Ge.PPU_LEGAL],isMarketingPPU:[Ge.PPU_MARKETING],isGating:[Ge.GUEST_GATED_AGEBAND,Ge.GUEST_GATED_UNKNOWN,Ge.GUEST_GATED_EMBARGOED,Ge.GUEST_GATED_EMAIL,Ge.GUEST_GATED_LOCATION,Ge.GUEST_GATED_BOTH_EMAIL_VERIFICATION,Ge.GUEST_GATED_EMAIL_VERIFICATION,Ge.GUEST_GATED_PARENT_EMAIL_VERIFICATION,Ge.AUTHORIZATION_ACCOUNT_LOCKED_OUT,Ge.ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED,Ge.PROFILE_DISABLED,Ge.ACCOUNT_IS_CHILDED,Ge.PROFILE_USER_BANNED],isGeoGated:[Ge.GUEST_GATED_LOCATION],isVerifyEmailGated:[Ge.GUEST_GATED_BOTH_EMAIL_VERIFICATION,Ge.GUEST_GATED_EMAIL_VERIFICATION,Ge.GUEST_GATED_PARENT_EMAIL_VERIFICATION],isAgebandGated:[Ge.GUEST_GATED_AGEBAND],isBanned:[Ge.PROFILE_USER_BANNED],isDisabled:[Ge.PROFILE_DISABLED,Ge.ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED],isSecurityFlagged:[Ge.AUTHORIZATION_ACCOUNT_SECURITY_LOCKED_OUT],isPil2:[Ge.AUTHORIZATION_PARENTAL_CONSENT_REQUIRED],isAccountMappingError:[Ge.ACCOUNT_MAPPING_NOT_FOUND_BUT_EMAIL_FOUND,Ge.NRT_ACCOUNT,Ge.DISALLOWED_VALUE,Ge.UNKNOWN_ACCOUNT_STATUS],isActionableInputError:[Ge.MISSING_VALUE,Ge.INVALID_VALUE,Ge.INUSE_VALUE,Ge.DISALLOWED_VALUE],isAccountMappingNotFoundError:[Ge.ACCOUNT_MAPPING_NOT_FOUND,Ge.ACCOUNT_MAPPING_NOT_FOUND_AND_EMAIL_NOT_FOUND],isAuthorizationError:[Ge.AUTHORIZATION_CREDENTIALS,Ge.AUTHORIZATION_BAD_EXTERNAL_TOKEN,Ge.AUTHORIZATION_EXTERNAL_ID_MISMATCH],isMarketingLongform:[Ge.MARKETING_LONG_FORM_ENABLED],isEtagMismatch:[Ge.VALID_ETAG_REQUIRED],isServiceError:[Ge.SERVICE_ERROR,Ge.UNKNOWN_ERROR,Ge.SYSTEM_UNAVAILABLE],isLockedOut:[Ge.AUTHORIZATION_ACCOUNT_LOCKED_OUT],isMase:[Ge.AUTHORIZATION_MASE_ERROR],isOtpAuthError:[Ge.PHONE_NOT_FOUND,Ge.PHONE_NOT_VERIFIED,Ge.PHONE_VERIFICATION_NOT_ALLOWED],isOtpCodeLockedOut:[Ge.DEVICE_LINK_LOCKOUT_REACHED],isOtpRequired:[Ge.AUTHORIZATION_INVALID_NETWORK,Ge.ACCOUNT_INACTIVE_VERIFICATION_REQUIRED,Ge.AUTHORIZATION_OTP_VERIFICATION_REQUIRED],isInvalidLoginValue:[Ge.LOGIN_VALUE_INVALID,Ge.PROFILE_NOT_FOUND],isInvalidOtpCode:[Ge.DEVICE_LINK_INVALID_OTP_CODE],isInvalidAccessToken:[Ge.AUTHORIZATION_INVALID_OR_EXPIRED_TOKEN],isInvalidRefreshToken:[Ge.AUTHORIZATION_INVALID_REFRESH_TOKEN],isInvalidRecaptchaToken:[Ge.TOKEN_TOO_SHORT],isInvalidSessionTransferKeyError:[Ge.INVALID_SESSION_TRANSFER_KEY],isRateLimited:[Ge.RATE_LIMITED,Ge.RATE_LIMITED_API]},Fe={ACTIONABLE_INPUT:"ACTIONABLE_INPUT",AC_OR_CONFIG_ERROR:"AC_OR_CONFIG_ERROR",ADVISORY:"ADVISORY",AUTHORIZATION_OTP_VERIFICATION_REQUIRED:"AUTHORIZATION_OTP_VERIFICATION_REQUIRED",FAILURE_BY_DESIGN:"FAILURE_BY_DESIGN",FAILURE_CONTACT_CSR:"FAILURE_CONTACT_CSR",GC_CODE_OR_CONFIG_ERROR:"GC_CODE_OR_CONFIG_ERROR",GUEST_BLOCKED:"GUEST_BLOCKED",INVALID_INPUT:"INVALID_INPUT",PPU_ACTIONABLE_INPUT:"PPU_ACTIONABLE_INPUT",SYSTEM_UNAVAILABLE:"SYSTEM_UNAVAILABLE",UNAUTHORIZED:"UNAUTHORIZED",UNKNOWN_ERROR:"UNKNOWN_ERROR"},Ve={CHILD:"CHILD",TEEN:"TEEN",ADULT:"ADULT"},xe="reduced",Be={MACHINE_GENERATED:"MACHINE_GENERATED",GUEST_GENERATED:"GUEST_GENERATED"};function We(e){const t=(0,u.U2)(e,"error.errors"),n=(0,u.U2)(e,"error.keyCategory");return!t||!n||!(0,u.U2)(t,"length")?[]:t.filter((function(e){return e.category===n}))}function Ke(e){const t={[Ge.MISSING_VALUE]:e=>e.inputName,[Ge.PPU_LEGAL]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.disclosures)||[]).map((e=>e.disclosureCode)).join()},[Ge.PPU_MARKETING]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.entities)||[]).map((e=>e.code)).join()}};return e.map((e=>{const n=t[e.code]&&t[e.code](e);return n?`${e.code}:${n}`:e.code})).join(";")}function $e(e,t){return function(e,t,n=null){if(!Array.isArray(e))return[];Array.isArray(t)||(t=[t]);n&&!Array.isArray(n)&&(n=[n]);return(e||[]).filter((e=>-1!==t.indexOf(e.code)&&(!n||-1!==n.indexOf(e.inputName))))}(e,t)[0]}const He={};function je(e,t){He[e]=t}function Ye(e){return He[e]}function qe(e){delete He[e]}function Ze(){for(const e in He)delete He[e]}function ze(e){if(e)return Qe().then((t=>{const{s2CookieName:n,s2Domain:o}=t,r=R.getCookieDomain(),s=new Date(Date.now());s.setFullYear(s.getFullYear()+le.LONG_COOKIE_YEAR_TIMEOUT),A(n,e,o,"/",s),T(n)!==e&&r&&A(n,e,r,"/",s)}))}function Qe(){return ve().then((e=>{const{clientInfo:t={}}=e,n=t["s2-domain"]||window.location.hostname,o=t["s2-namespace"];return{s2CookieName:o?`${o}_${V.S2}`:V.S2,s2Domain:n,s2Namespace:o}}))}let Xe={language:null,featureFlags:["no-password-reuse"],endpoint:null,clientId:null};const Je=new b(be),et=Je;function tt(e){e.response.parsedErrors=function(e){if(!e)return null;const t=We(e),n=(0,u.U2)(e,"error.keyCategory");let o={};switch(Object.keys(Me).forEach((e=>{$e(t,Me[e])&&(o[e]=!0)})),n){case Fe.PPU_ACTIONABLE_INPUT:o.isPPU=!0;break;case Fe.ADVISORY:o.isAdvisoryError=!0;break;case Fe.ACTIONABLE_INPUT:o.isActionableInputError=!0;const e=t.reduce(((e,t)=>{if(!t||!t.inputName)return e;const n=`${t.inputName}`,o=n.startsWith("profile.addresses"),r=(0,u.U2)(t,"data.type");if(o&&r){const o=`addresses.${r}.${n.replace(/.*\./,"")}`;return Object.assign(e,{[o]:t.code})}if(!o){const o=n.replace(/.*\./,"");return Object.assign(e,{[o]:t.code})}return e}),{});o.clientErrors=Object.keys(e).length?e:null,o.clientErrorsRawInputNames=t.filter((e=>e.inputName)).map((e=>e.inputName))}const r=(0,u.U2)($e(t,Ge.AUTHORIZATION_CREDENTIALS),"data")||{};o.isAuthorizationError&&r.passwordOrigin===Be.MACHINE_GENERATED&&(o.isLoginSetPassword=!0);const s=e.isValid&&!e.isValid(),i=500===e.status;return(s||i||n===Ge.SYSTEM_UNAVAILABLE)&&(o.isServiceError=!0),t.forEach((e=>{e.code===Ge.INVALID_VALUE&&"profile.region"===e.inputName&&(o.isInvalidRegionError=!0)})),0===Object.keys(o).length&&(o=null),o&&!o.clientErrors&&(o.clientErrors=null,o.clientErrorsRawInputNames=null),o}(e.response),(0,u.U2)(e.response.parsedErrors,"isPPU")&&je("ppuErrors",(0,u.U2)(e.response,"error.errors"))}let nt;et.addRequestMutator((e=>{e.request.headers={...e.request.headers,"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache",Expires:"-1"};const t=(0,u.U2)(F(),"debug.geoIP");t&&(e.request.headers["x-forwarded-for"]=t)})),et.addRequestMutator((e=>{e.request.query.langPref=Xe.language})),et.addRequestMutator((e=>{e.request.query.feature=Xe.featureFlags})),et.addRequestMutator((e=>{e.request.url=`${Xe.endpoint}/client/${Xe.clientId}${e.request.url}`})),et.addRequestMutator((e=>{nt=(0,u.Vj)();const t=Ye("workflowOptions"),n=(0,u.U2)(t,"options.optionalConfigs.reporting.conversationId")||(0,u.Vj)();e.request.headers={...e.request.headers,"conversation-id":n,"correlation-id":nt}})),et.addRequestMutator((e=>{if(!e.request.headers.authorization)return new Promise((t=>{te.then((n=>{n.call("responder","get.cookie",`${Xe.clientId}.${V.API}`).then((n=>{n&&(e.request.headers.authorization=`APIKEY ${n}`),t()})).catch((()=>t()))}))}))})),et.addRequestMutator((e=>{const t=Ye("workflowOptions");if(t){const n=(0,u.U2)(t,"options.optionalConfigs.reporting");e.request.headers={...e.request.headers,"oneid-reporting":(0,u.uP)(n)}}})),et.addRequestMutator((e=>{e.newRelicLog=Ce(e.request.eventName||"missing_action_name")})),et.addResponseMutator((e=>{const{errorCodes:t,keyCategory:n,statusCode:o}=function(e){const t=(0,u.U2)(e,"error.keyCategory")||"";return{errorCodes:((0,u.U2)(e,"error.errors")||[]).map((e=>{let t=e.code;e.inputName&&(t+=`:${e.inputName}`);const n=(0,u.U2)(e,"data.disclosures");return n&&n.forEach((e=>{t+=`:${e.disclosureCode}`})),t}))||[],keyCategory:t,statusCode:(0,u.U2)(e,"status")||null}}(e.response),r=Ye("logoutType"),i={[Ie.ERROR_CATEGORY]:n,[Ie.ERROR_CODES]:t.join(","),[Ie.TRANSACTION_ID]:nt};r&&(i[Ie.INFO]=`logoutType(${r})`,qe("logoutType")),!o||o>=400&&o<500||o>=200&&o<300||(i[Ie.PROBLEM]=!0),s.debug("sending log : ",JSON.stringify(i,null,2)),e.newRelicLog.send(i),e.request.storeResponseKey&&je(e.request.storeResponseKey,e.response)})),et.addResponseMutator((e=>{const t=e.response&&e.response.headers["api-key"];if(t){const e=new Date;e.setDate(e.getDate()+1),te.then((n=>n.message("responder","set.cookie",{key:`${Xe.clientId}.${V.API}`,value:t,expires:e})))}})),et.addResponseMutator((e=>{const t=(0,u.U2)(e.response,"data.s2");t&&ze(t)})),et.addResponseMutator((e=>{tt(e)}));const ot={ALREADY_INITIALIZED:"Already initialized",CALLBACK_MISMATCH:"Network Connect Callback URI does not match origin",CONFIG_SET:"Configuration options have already been set",CROSS_FRAME_COMMUNICATION_TIMEOUT:"Could not initialize cross frame communication",DISNEYID_DEPRECATED:"`DisneyID` global object is soon to be deprecated. Use `OneID` instead.",INNER_APP_TIMEOUT:"OneID app timed out",INVALID_ARGUMENT:"Invalid argument",INVALID_COOKIE_DOMAIN:"Provided cookieDomain is invalid",INVALID_PAIRING_CODE:"INVALID_PAIRING_CODE",MISSING_PAIRING_CODE:"MISSING_PAIRING_CODE",MISSING_REFRESH_TOKEN:"MISSING_REFRESH_TOKEN",MISSING_SWID:"MISSING_SWID",NO_CALLBACK:"No Network Connect Callback URI passed",NO_CLIENT_ID:"clientId not provided",NO_CONFIG_OPTIONS:"No configuration options provided",NO_DATA:"NO_DATA",NO_PROFILE:"Could not read guest profile data",NO_RESPONDER_PAGE:"responderPage not provided",NO_SITE_CONFIG:"Could not get site config",NO_VALID_CAMPAIGN:"NO_VALID_CAMPAIGN",NOT_ENABLED:"Not enabled",NOT_IMPLEMENTED:"Not implemented",NOT_INITIALIZED:"Not initialized",PROFILE_UPDATE_INVALID:"PROFILE_UPDATE_INVALID",SESSION_ESTABLISHED:"Session already established",SESSION_NOT_ESTABLISHED:"Session not established",UNKNOWN_ERROR:"An unknown error occurred",UNSUPPORTED_LOCALE:"Unsupported locale"},rt={FAILURE_BY_DESIGN:"FAILURE_BY_DESIGN",UNKNOWN_ERROR:"UNKNOWN_ERROR"};function st(e){return new Promise(((t,n)=>{Je.licensePlatePeek(e).then((e=>{if((0,u.U2)(e,"parsedErrors.isActionableInputError"))return n({errorCodes:ot.INVALID_PAIRING_CODE});t(e)})).catch((()=>n({errorCodes:rt.UNKNOWN_ERROR})))}))}function it(){const{clientId:e,langPref:t,cssOverride:n,debug:o={}}=F(),{country:r,disableSetFocus:s,dynamicConfigOverride:i,siteConfigOverride:a,geoIP:c,iOSAutomation:u,testProfileFlag:l,disableFocusLock:E,showL10nKeys:_,gcEndpoint:d}=o,p=window.ONEID_WEB_SDK_MIGRATION?"bundleMigration":"bundle",f=T(h.LOG_LEVEL)||"INFO",I=T(h.FEATURE_FLAGS),O=ae.replace("https://ui-qa.registerdisney","https://uiv4-qa.registerdisney"),A=new URL(O);return A.pathname=`${A.pathname}/${p}/web/${e}/${t}`,n&&A.searchParams.append("cssOverride",n),r&&A.searchParams.append("countryCode",r),i&&A.searchParams.append("dynamicConfigOverride",JSON.stringify(i)),a&&A.searchParams.append("siteConfigOverride",JSON.stringify(a)),f&&A.searchParams.append("logLevel",f),u&&A.searchParams.append("iOSAutomation","true"),l&&A.searchParams.append("testProfileFlag","Y"),c&&A.searchParams.append("geoIP",c),I&&A.searchParams.append("featureFlags",I),s&&A.searchParams.append("disableSetFocus","true"),E&&A.searchParams.append("disableFocusLock","true"),_&&A.searchParams.append("showL10nKeys","true"),d&&A.searchParams.append("gcEndpoint",d),A.href}function at(){const{clientId:e,responderPage:t}=F(),n=ue(),o=new URL(t);return o.searchParams.append("clientId",e),o.searchParams.append("environment",n),o.href}function ct(){return/(ipad|iphone|ipod)/gi.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}const ut=function(){const e=document.querySelector("html"),t=document.createElement("style");let n;const o=ct();var r;o&&(null===(r=document.querySelector("[name=viewport]"))||void 0===r||r.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"));return{showLightbox:function(){e&&e.classList.add("oneid-lightbox-open"),n.style.display="block",n.style.width="100%",n.style.height="100%",n.classList.add("state-active"),n.querySelector("#oneid-iframe").focus()},hideLightbox:function(){e&&e.classList.remove("oneid-lightbox-open"),n.style.display="none",n.classList.remove("state-active"),document.getElementById("oneid-iframe").blur()},createInner:function(){t.setAttribute("id","oneid-style"),t.setAttribute("type","text/css"),t.innerHTML=`\n    div#oneid-wrapper {\n      position: fixed;\n      top: 0;\n      left: 0;\n      /* This is here to render the images before showing the iframe */\n      width: 1px;\n      height: 1px;\n    }\n    div#oneid-wrapper.state-active {\n      z-index: 9999999;\n      opacity: 1;\n      transition: opacity 300ms;\n      -webkit-transition: opacity 300ms;\n    }\n    iframe#oneid-iframe {\n      width: 100%;\n      height: 100%;\n    }\n\n    ${o?"body {min-height: 100% !important;}":""}\n\n    html.oneid-lightbox-open {\n      overflow: hidden;\n      ${o?"height: 100%;":""}\n    }\n\n    html.oneid-lightbox-open body {\n      overflow: hidden;\n      ${o?"height: 100%;":""}\n    }\n    `;const e=s({name:"oneid-iframe",title:"Account",documentURL:it()});return n=document.createElement("div"),n.setAttribute("id","oneid-wrapper"),n.appendChild(e),lt().then((()=>{document.head.appendChild(t),document.body.appendChild(n),n.style.display="none"})),e},createResponder:function(){const e=s({name:"oneid-secure-responder",documentURL:at()});return e.style.display="none",lt().then((()=>{document.body.appendChild(e)})),e}};function s({name:e,title:t="",documentURL:n}){const o=document.createElement("iframe");return o.setAttribute("id",e),o.setAttribute("name",e),o.setAttribute("frameborder","0"),o.setAttribute("title",t),o.setAttribute("src",n),o}}();function lt(){return new Promise((e=>{const{readyState:t}=document;if("complete"===t||"loaded"===t||"interactive"===t)return e();document.addEventListener("DOMContentLoaded",(()=>e()),{once:!0})}))}function Et(){return pt(le.LAUNCH_METHOD_TIMEOUT)}function _t(e,t){if(!t)return!1;const n=e.newsletters;s.debug("newslettersConfig :",n);for(const e of Object.values(n))if(Object.keys(e||{}).includes(t))return!0;return!1}function dt(){return ve().then((e=>e?Promise.resolve():Promise.reject({errorCodes:ot.NO_SITE_CONFIG})))}function pt(e=3e4,t=ot.INNER_APP_TIMEOUT){let n;const o=Object.assign(new Promise(((r,s)=>{n=setTimeout((()=>{s({errorCodes:t}),o.wasRejected=!0}),e)})),{cancel:()=>(clearTimeout(n),this)});return o}function ft(e,t={}){var n,o;const r=F(),s=(0,u.U2)(e,"optionalConfigs.displayOptions.cssContext"),i=null!==(n=null!==(o=(0,u.U2)(e,"optionalConfigs.displayOptions.darkMode"))&&void 0!==o?o:(0,u.U2)(r,"optionalConfigs.displayOptions.darkMode"))&&void 0!==n?n:(0,u.U2)(window.BrandingConfig,"branding.brand.darkMode"),a=(0,u.U2)(e,"optionalConfigs.displayOptions.suppressCreateAccountOpt"),c=(0,u.U2)(e,"optionalConfigs.displayOptions.hideCloseButtonEverywhere");if(void 0!==s)if((0,u.kH)(s))t.displayOptions={...t.displayOptions,cssContext:s};else{Ce(Ie.LOG_INVALID_DISPLAY_OPTION).send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:"cssContext",[Ie.INFO]:`cssContext(${s})`})}if(void 0!==i)if("boolean"===typeof i)t.displayOptions={...t.displayOptions,darkMode:i};else{Ce(Ie.LOG_INVALID_DISPLAY_OPTION).send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:"darkMode",[Ie.INFO]:`darkMode(${i})`})}return void 0!==c&&"boolean"===typeof c&&(t.displayOptions={...t.displayOptions,hideCloseButtonEverywhere:c}),void 0!==a&&"boolean"===typeof a&&(t.displayOptions={...t.displayOptions,suppressCreateAccountOpt:a}),t.options=Le(),t.allowSkip=!!(0,u.U2)(e,"allowSkip"),t}function It(){return T(V.OBO)}function ht(){return s.debug("[OBO Cookie] - delete obo cookie",V.OBO,N()),O(V.OBO,N(),"/")}var Tt=n(0),Ot=n.n(Tt);const At={ADULT:"X",TEEN:"Y",CHILD:"Z"};function Rt(e){if(!e)return Promise.resolve();const{clientId:t}=F(),n=`${t}-${ue()}.${V.IDENTIFIER}`;return te.then((t=>t.call("responder","set.cookie",{key:n,value:e,expires:0,secure:!0}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-identity)",[Ie.STACK_TRACE]:t})}))))}const Nt="00";function gt(){const{clientId:e}=F(),t=ue();try{localStorage.removeItem(`${e}-${t}.guest`)}catch(e){}}function St(){return Ye("tokenData")?mt():Ee().then((e=>{if(e&&!Y(e))return je("tokenData",e),mt()}))}function mt(){const{clientId:e}=F(),t=ue();return function(){const{clientId:e}=F(),t=`${e}-${ue()}.${V.IDENTIFIER}`;return te.then((e=>e.call("responder","get.cookie",t).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-identity)",[Ie.STACK_TRACE]:t})}))))}().then((n=>{const o=Ye("tokenData"),r=(0,u.U2)(o,"access_token");if(!r||!n)return;const s=function(e,t,n,o){let r=null;try{r=localStorage.getItem(`${n}-${o}.guest`)}catch(e){}return function(e,t,n){let o=null;try{o=JSON.parse(Ot().decrypt(e.substring(Nt.length)+t,n))}catch(e){}return o}(`${e}`,t,r)}(n,r,e,t);if(!s)return Lt();return(0,u.t8)(s,"guest.token",o)}))}function Lt(){const{clientId:e}=F(),t=ue(),n=Ye("tokenData"),o=(0,u.U2)(n,"access_token"),r=(0,u.U2)(n,"swid");return Je.getGuest({accessToken:o,swid:r}).then((r=>{if(200!==r.status)return null;const s=(0,u.U2)(r.data,"token")||n,i={...r.data,token:s};je("getGuestResponse",r),je("guest",i);return Rt(yt({guest:i,token:s},o,e,t)),i}))}function Ct(e,t){return new Promise((n=>{const o=(0,u.U2)(e,"guest");if(!o)return;let r;r=t?function(e){if(!e)return Promise.resolve();const{clientId:t}=F(),n=ue(),o=new Date(Date.now());o.setFullYear(o.getFullYear()+le.LONG_COOKIE_YEAR_TIMEOUT);const r=H({token:e});return te.then((e=>e.call("responder","set.cookie",{key:`${t}-${n}.${V.TOKEN}`,value:r,expires:o,secure:!0}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))))}(e.token):Promise.resolve();const{clientId:i}=F(),a=ue();let c;c=(0,u.U2)(e,"token.access_token")?Promise.resolve(e):Ee();const l=function(e){const t=At[(0,u.U2)(e,"profile.ageBand")||""],n=(0,u.U2)(e,"profile.region")||(0,u.U2)(e,"profile.countryCodeDetected"),o=t+n,{clientId:r}=F(),i=ue();if(!t||!n||!e)return Promise.resolve();const a=new Date(Date.now());return a.setFullYear(a.getFullYear()+le.LONG_COOKIE_YEAR_TIMEOUT),te.then((e=>e.call("responder","set.cookie",{key:`${r}-${i}-${V.AGEBAND_COUNTRY}`,value:o,expires:a}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-ageBandCountry)",[Ie.STACK_TRACE]:t})}))))}(o);Promise.all([c,r,l]).then((t=>{Rt(yt(e,(0,u.U2)(t[0],"token.access_token"),i,a)).then(n),je("wasLoggedIn",!0),je("guest",o)}))}))}function yt(e,t,n,o){const r=function(e,t){const n=(0,u.d9)(e),o=JSON.stringify(n),r=(0,u.kn)(JSON.stringify({guest:e.guest})).toString(16);return{data:Ot().encrypt(r+t,o),checksum:Nt+r}}({guest:e.guest,created:(new Date).toISOString()},t);try{localStorage.setItem(`${n}-${o}.guest`,r.data)}catch(e){}return r.checksum}const wt={API:"api",INVALID_ACCESS_TOKEN:"invalid_access_token",INVALID_REFRESH:"invalid_refresh",LOGGED_OUT_IN_OTHER_TAB:"logged_out_in_other_tab",REAUTH_CHANGE_ACCOUNT:"reauth_change_account",OBO:"obo_logout",GET_GUEST_GC_ERROR:"get_guest_gc_error",GET_GUEST_SESSION_ERROR:"get_guest_session_error",GET_GUEST_MISSING_SESSION_DATA:"get_guest_missing_session_data",GULC:"gulc",UNKNOWN:"unknown"};function Pt(e,t={}){const{clientId:n}=F(),o=ue(),r=t.refresh_token,s=[];return r&&s.push({clientId:`${n}-${o}`,token:r}),e&&s.length?Je.logout({swid:e,tokenAndClientIds:s}):Promise.resolve()}const Dt={AGE_GATED:"age-gated",CLOSE:"close",CREATE:"create",EMAIL_VERIFICATION:"email-verification",ERROR:"error",INIT:"init",LOGIN:"login",LOGOUT:"logout",LOW_TRUST:"low-trust",OPT_IN:"opt-in",REAUTH:"reauth",REFRESH:"refresh",UPDATE:"update"};function Ut(e){const t=e||wt.UNKNOWN,n=`reason(${t})`;Ue(Dt.LOGOUT,t,n)}function vt(e){const{clientId:t}=F(),n=ue(),o=Ye("logoutReason");return je("loggedIn",!1),St().then((r=>(gt(),Pt((0,u.U2)(r,"profile.swid"),(0,u.U2)(r,"token")).then((()=>te.then((r=>(r.message("inner","guest.logout"),x((0,u.Vj)()),r.call("responder","guest.logout",`${t}-${n}`).finally((()=>(Ut(o),e("done"))))))))))))}const kt=[{readToken:{stepExecution:function(e){return Ee().then((t=>t?(je("tokenData",t),(0,u.U2)(t,"access_token")&&!Y(t)?e("readGuestFromLocalStorage"):(je("logoutType","norefresh"),je("logoutReason",wt.GET_GUEST_SESSION_ERROR),void e("forceLogout"))):e())).catch((()=>e()))},results:{readGuestFromLocalStorage:"readGuestFromLocalStorage",forceLogout:"forceLogout"}}},{readGuestFromLocalStorage:{stepExecution:function(e){const t=Ye("workflowOptions"),n=(0,u.U2)(t,"forceRefresh"),o=(0,u.U2)(t,"fullPayloadRequested");mt().then((t=>{if(!t)return e("getGuestFromGuestController");t&&je("guest",t);const r=(0,u.U2)(t,"token.created"),s=!!r&&new Date(r).getTime()+le.GUEST_TOKEN_TIMEOUT<Date.now(),i=(0,u.U2)(t,"payload")===xe;if(s||n||i&&o)return e("getGuestFromGuestController");e()}))},results:{getGuestFromGuestController:"getGuestFromGuestController"}}},{getGuestFromGuestController:{stepExecution:function(e){const t=Ye("tokenData"),n=Ye("guest")||{token:t},o=(0,u.U2)(n,"token.access_token"),r=(0,u.U2)(n,"token.swid")||(0,u.U2)(n,"profile.swid");return o&&r?Je.getGuest({accessToken:o,swid:r}).then((t=>{je("getGuestResponse",t);const o=(0,u.U2)(t.data,"token")||n.token;if(200===t.status)return je("guest",{...t.data,token:o}),e("saveSession");const r=(0,u.U2)(t,"parsedErrors")||{};return r.isSecurityFlagged||r.isDisabled||r.isInvalidAccessToken?(je("logoutType","getGuest"),je("logoutReason",wt.GET_GUEST_GC_ERROR),e("forceLogout")):e()})):(je("logoutType","getGuest"),je("logoutReason",wt.GET_GUEST_MISSING_SESSION_DATA),e("forceLogout"))},results:{forceLogout:"forceLogout",saveSession:"saveSession"}}},{forceLogout:{stepExecution:vt,results:{}}},{saveSession:{stepExecution:function(e){const t=Ye("guest")||{};return t&&t.token?Ct({guest:t,token:t.token}).then(e):e()},results:{}}}];const bt="/";function Gt(){const{clientId:e}=F(),t=`${e}-${ue()}`;return`${V.MUTEX}${(0,u.kn)(t).toString(16)}`}function Mt(){return T(Gt())}function Ft(){return new Promise((e=>{if(Mt())return s.debug("Mutex#cookie already present"),e(!1);setTimeout((()=>{if(Mt())return s.debug("Mutex#cookie already present"),e(!1);s.debug("Mutex#setting cookie");const t=new Date(Date.now()+le.MUTEX_TIMEOUT);return A(Gt(),"0",R.getCookieDomain(),bt,t),e(!0)}),Math.floor(1e3*Math.random()+1e3))}))}let Vt=!1;function xt(){return Vt}function Bt(e){Vt=!!e}var Wt=n(281);const Kt={CLEAR_API_CALLBACK:"CLEAR_API_CALLBACK",CLEAR_APP_LOADING:"CLEAR_APP_LOADING",CLEAR_CLIENT_ERRORS:"CLEAR_CLIENT_ERRORS",CLEAR_GC_RESPONSES:"CLEAR_GC_RESPONSES",CLEAR_HIDE_LOADING_SPINNER_ONCE:"CLEAR_HIDE_LOADING_SPINNER_ONCE",CLEAR_PROMPT_RESULT:"CLEAR_PROMPT_RESULT",CLEAR_WORKFLOW_DATA:"CLEAR_WORKFLOW_DATA",CLEAR_WORKFLOW_OPTIONS:"CLEAR_WORKFLOW_OPTIONS",SET_APP_LOADING:"SET_APP_LOADING",SET_APP_SUCCESS:"SET_APP_SUCCESS",SET_BUNDLER_STATUS:"SET_BUNDLER_STATUS",SET_BUNDLER_URL:"SET_BUNDLER_URL",SET_CLIENT_ERROR:"SET_CLIENT_ERROR",SET_CLIENT_ERRORS:"SET_CLIENT_ERRORS",SET_COUNTRY:"SET_COUNTRY",SET_DEBUG_OPTIONS:"SET_DEBUG_OPTIONS",SET_DYNAMIC_CONFIG:"SET_DYNAMIC_CONFIG",SET_GC_RESPONSE:"SET_GC_RESPONSE",SET_GLOBAL_CONFIG:"SET_GLOBAL_CONFIG",SET_GUEST_ADDRESS_FIELD:"SET_GUEST_ADDRESS_FIELD",SET_GUEST_CHANGES:"SET_GUEST_CHANGES",SET_GUEST_DISPLAY_NAME:"SET_GUEST_DISPLAY_NAME",SET_GUEST_LEGAL_ASSERTIONS:"SET_GUEST_LEGAL_ASSERTIONS",SET_GUEST_MARKETING:"SET_GUEST_MARKETING",SET_GUEST_PROFILE:"SET_GUEST_PROFILE",SET_GUEST:"SET_GUEST",SET_HIDE_LOADING_SPINNER_ONCE:"SET_HIDE_LOADING_SPINNER_ONCE",SET_IS_MOBILE_SDK:"SET_IS_MOBILE_SDK",SET_L10N:"SET_L10N",SET_LANGUAGE:"SET_LANGUAGE",SET_LOCALE:"SET_LOCALE",SET_MOBILE_CONFIG:"SET_MOBILE_CONFIG",SET_PROMPT_RESULT:"SET_PROMPT_RESULT",SET_SITE_CONFIG:"SET_SITE_CONFIG",SET_UI_FOCUS:"SET_UI_FOCUS",SET_VIEW_RENDERED:"SET_VIEW_RENDERED",SET_VIEW_SCHEMA:"SET_VIEW_SCHEMA",SET_VIEW_TO_BUILD:"SET_VIEW_TO_BUILD",SET_WORKFLOW_DATA:"SET_WORKFLOW_DATA",SET_WORKFLOW_OPTIONS:"SET_WORKFLOW_OPTIONS",UNSET_CLIENT_ERROR:"UNSET_CLIENT_ERROR",UNSET_GUEST_ADDRESS_FIELD:"UNSET_GUEST_ADDRESS_FIELD",UNSET_GUEST_CHANGES:"UNSET_GUEST_CHANGES",UNSET_GUEST_EMAIL_CHANGE:"UNSET_GUEST_EMAIL_CHANGE",UNSET_GUEST:"UNSET_GUEST",UPDATE_API_CALLBACK:"UPDATE_API_CALLBACK",UPDATE_GUEST_LEGAL_ASSERTIONS:"UPDATE_GUEST_LEGAL_ASSERTIONS",UPDATE_GUEST_MARKETING_LIST:"UPDATE_GUEST_MARKETING_LIST",UPDATE_GUEST_PHONE_LIST:"UPDATE_GUEST_PHONE_LIST"},$t=function(e=Ht,t){switch(t.type){case Kt.UPDATE_API_CALLBACK:return{...e,...t.payload};case Kt.CLEAR_API_CALLBACK:return Ht;default:return e}},Ht=null;const jt=function(e=Yt,t){let n=e;switch(t.type){case Kt.SET_APP_LOADING:n={globalOverlayClass:"active",loadingIndicatorClass:"state-loading",...t.payload};break;case Kt.SET_APP_SUCCESS:n={globalOverlayClass:"active",loadingIndicatorClass:"state-success",...t.payload};break;case Kt.CLEAR_APP_LOADING:n={...Yt};break;default:return e}return n},Yt={globalOverlayClass:"",loadingIndicatorClass:""};const qt=function(e={},t){let n;if(t.type!==Kt.SET_BUNDLER_STATUS)return e;n=t.payload;return n};const Zt=function(e={},t){let n;if(t.type!==Kt.SET_BUNDLER_URL)return e;n=t.payload;return n};const zt=function(e=Qt,t){switch(t.type){case Kt.SET_CLIENT_ERRORS:return{...t.payload};case Kt.SET_CLIENT_ERROR:return{...e,...t.payload};case Kt.UNSET_CLIENT_ERROR:const n=Object.keys(t.payload);if(1!==n.length||null===e)return e;if(t.payload.legal){const{[t.payload.legal]:n,...o}=e.legal;if(0===Object.keys(o).length){const{legal:t,...n}=e;return n}return{...e,legal:o}}const{[n[0]]:o,...r}=e;return r;case Kt.CLEAR_CLIENT_ERRORS:return Qt;default:return e}},Qt=null;const Xt=function(e="US",t){let n;if(t.type!==Kt.SET_COUNTRY)return e;n=t.payload;return n};const Jt=function(e=en,t){let n;if(t.type!==Kt.SET_DEBUG_OPTIONS)return e;n=t.payload;return n},en={};const tn=function(e=nn,t){let n;if(t.type!==Kt.SET_DYNAMIC_CONFIG)return e;n=t.payload;return n},nn={};const on=function(e=rn,t){let n;if(t.type!==Kt.SET_GLOBAL_CONFIG)return e;n=t.payload;return n},rn={};const sn=function(e={},t){let n=e;switch(t.type){case Kt.SET_GUEST:for(const n in t.payload)null===t.payload[n]&&e[n]&&delete t.payload[n];n=(0,u.RH)(e,t.payload);break;case Kt.UNSET_GUEST:n={};break;default:return e}return n};const an=function(e=cn,t){let n=e;const{payload:o}=t;switch(t.type){case Kt.SET_GUEST_CHANGES:n={...e,...t.payload};break;case Kt.SET_GUEST_DISPLAY_NAME:n={...e,displayName:{...e.displayName,...t.payload}};break;case Kt.SET_GUEST_PROFILE:n={...e,profile:{...e.profile,...t.payload}};break;case Kt.SET_GUEST_ADDRESS_FIELD:let r;if(e.profile.addresses){const n=e.profile.addresses.findIndex((e=>e.type===t.payload.type));r=n>=0?[...e.profile.addresses.slice(0,n),{...e.profile.addresses[n],...t.payload},...e.profile.addresses.slice(n+1)]:[...e.profile.addresses,t.payload]}else r=[{...t.payload}];n={...e,profile:{...e.profile,addresses:r}};break;case Kt.UNSET_GUEST_ADDRESS_FIELD:const s=e.profile.addresses.findIndex((e=>e.type===t.payload.type));if(s>=0){let o=e.profile.addresses.map((e=>({...e})));delete o[s][t.payload.field],o=o.filter((e=>Object.keys(e).length>1)),n={...e,profile:{...e.profile,addresses:o}}}break;case Kt.SET_GUEST_MARKETING:const i=t.payload.map((e=>({code:e.name||e.code,subscribed:e.checked,textId:e.textId})));n={...e,marketing:i};break;case Kt.SET_GUEST_LEGAL_ASSERTIONS:const a=(t,n)=>{const{disclosureCode:o}=n,r=(0,u.U2)(e,`legalAssertions.${o}.accepted`)?e.legalAssertions[o].accepted:!n.requiresActiveConsent;return{...t,[n.disclosureCode]:{accepted:r}}},c=t.payload.reduce(a,{});n={...e,legalAssertions:c};break;case Kt.UPDATE_GUEST_LEGAL_ASSERTIONS:const l={...e.legalAssertions,...t.payload};n={...e,legalAssertions:l};break;case Kt.UPDATE_GUEST_MARKETING_LIST:const E=e.marketing.map((e=>e.textId===o.textId?{...e,subscribed:o.subscribed}:e));n={...e,marketing:E};break;case Kt.UPDATE_GUEST_PHONE_LIST:{const{type:o,number:r,internationalPrefix:s,countryCode:i,phoneGuid:a}=t.payload,c=e.profile.phones||[],u=c.findIndex((e=>e.type===o));let l;const E=r?[{type:o,number:r,internationalPrefix:s,countryCode:i,phoneGuid:a}]:[];l=u>=0?[...c.slice(0,u),...E,...c.slice(u+1)]:[...c,...E],n={...e,profile:{...e.profile,phones:l}};break}case Kt.UNSET_GUEST_EMAIL_CHANGE:delete e.profile.email,n={...e};break;case Kt.UNSET_GUEST_CHANGES:n={...cn};break;default:return e}return n},cn={displayName:{},email:void 0,marketing:[],profile:{},legalAssertions:{}};const un=function(e={},t){switch(t.type){case Kt.SET_GC_RESPONSE:return{...e,[t.payload.key]:t.payload.response};case Kt.CLEAR_GC_RESPONSES:return{};default:return e}};const ln=function(e=En,t){let n;switch(t.type){case Kt.SET_HIDE_LOADING_SPINNER_ONCE:return n=!0,n;case Kt.CLEAR_HIDE_LOADING_SPINNER_ONCE:return n=!1,n;default:return e}},En=!1;const _n=function(e=dn,t={type:"none"}){if(t.type===Kt.SET_L10N)return function(e){function t(n){const o=e[n]||"";return o&&"string"===typeof o&&0===o.indexOf("@:")?t(o.replace("@:","")):o}return Object.keys(e).map((n=>{e[n]=t(n)})),e}(pn(t.payload));return e},dn={};function pn(e){const t={};for(const n in e)if(e.hasOwnProperty(n))if("object"===typeof e[n]){const o=pn(e[n]);for(const e in o)o.hasOwnProperty(e)&&(t[`${n}.${e}`]=o[e])}else t[n]=e[n];return t}const fn=function(e="en",t){let n;if(t.type!==Kt.SET_LANGUAGE)return e;n=t.payload;return n};const In=function(e="en-US",t){let n;if(t.type!==Kt.SET_LOCALE)return e;n=t.payload;return n};const hn=function(e={},t){if(t.type===Kt.SET_MOBILE_CONFIG)return{...e,...t.payload};return e};const Tn=function(e=!1,t){if(t.type===Kt.SET_IS_MOBILE_SDK)return t.payload;return e};const On=function(e=An,t){switch(t.type){case Kt.SET_PROMPT_RESULT:return{...e,...t.payload};case Kt.CLEAR_PROMPT_RESULT:return{...An};default:return e}},An={prompt:"",stepName:""};const Rn=function(e=Nn,t=null){let n;switch(!0){case null===t:n=Nn;break;case t.type===Kt.SET_SITE_CONFIG:n=function(e){const t=["accountMapping"],n=(0,u.d9)(e);return t.forEach((e=>{delete n[e]})),n}(t.payload);break;default:return e}return n},Nn={};const gn=function(e=null,t){if(t.type===Kt.SET_UI_FOCUS)return t.payload;return e};const Sn=function(e={viewID:"",timestamp:0},t){let n;if(t.type!==Kt.SET_VIEW_RENDERED)return e;n=t.payload;return n};const mn=function(e=null,t){let n;if(t.type!==Kt.SET_VIEW_SCHEMA)return e;n=t.payload;return n};const Ln=function(e={viewID:"",timestamp:0},t){let n;if(t.type===Kt.SET_VIEW_TO_BUILD)return n={...t.payload,timestamp:Date.now()},n;return e};const Cn=function(e=yn,t){switch(t.type){case Kt.SET_WORKFLOW_DATA:return(0,u.RH)(e,t.payload);case Kt.CLEAR_WORKFLOW_DATA:return{...yn};default:return e}},yn={};const wn=function(e=Pn,t){let n;switch(t.type){case Kt.CLEAR_WORKFLOW_OPTIONS:return Pn;case Kt.SET_WORKFLOW_OPTIONS:return n={...e,...t.payload},n;default:return e}},Pn={};const Dn=(0,Wt.UY)({apiCallback:$t,appState:jt,bundlerStatus:qt,bundlerURL:Zt,clientErrors:zt,country:Xt,debugOptions:Jt,dynamicConfig:tn,globalConfig:on,guest:sn,guestChanges:an,guestControllerResponses:un,hideLoadingSpinnerOnce:ln,l10n:_n,language:fn,locale:In,mobileConfig:hn,mobileSDK:Tn,promptResult:On,siteConfig:Rn,uiElementFocus:gn,viewRendered:Sn,viewSchema:mn,viewToBuild:Ln,workflowData:Cn,workflowOptions:wn});function Un(e){const t="stateChangeListener",n={},o=e;let r=null,i=o.getState(),a=null,c=-1;return{add:function(e,t,o=!0){c+=1;const r=c;return n[r]={getNode:e,callback:t,ignoreNull:o},r},remove:function(e){delete n[e]},start:function(){s.debug(`${t}.start`),a=o.subscribe((()=>{!function(){r=i,i=o.getState();const e=Object.keys(n);if(!e.length)return;e.sort(),e.forEach((e=>{const t=n[e];if(!t)return;const o=t.getNode(r),s=t.getNode(i);if(o!==s){if(null===s&&t.ignoreNull)return;t.callback(s,o,i,r)}}))}()}))},stop:function(){s.debug(`${t}.stop`),a&&a(),a=null}}}let vn,kn;!function(){ce("inner");const e=ue()===se.QA;let t=null;t=e?(0,Wt.MT)(Dn,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()):(0,Wt.MT)(Dn,{});vn=Un(t),vn.start(),kn=t}();const bn=z("inner").then((e=>new ee(e,"inner"))),Gn=(window.location.host,{client_id:null,language_code:null,server_name:null});let Mn,Fn={};let Vn=!1;function xn(e,t){return new Promise((n=>{bn.then((o=>{const r=o.call("outer","get.cookie",V.SWID);Promise.all([r,Mn]).then((o=>{const r=o[0]||"",s={...Bn(),...Gn,...Fn,...t,authenticated_user:/{.+}/.test(r)?"Authenticated":"Not Authenticated",swid:r};if(!s.client_id)return console.error(new Error("Tealium called without clientId")),n();Vn&&(window.utag_events||(window.utag_events=[]),window.utag_events.push(s)),window.utag&&window.utag[e]&&window.utag[e](s),window.__dataLayer&&window.__dataLayer.publish(e,s),n()}))}))}))}function Bn(){const{workflowOptions:e}=kn.getState(),t=(0,u.U2)(e,"options.optionalConfigs.reporting"),n={};if(!t)return n;t.source&&(n.bu_name=t.source),t.context&&(n.client_context=t.context),t.experience&&(n.experience=t.experience),t.mid&&(n.mid=t.mid),t.conversationId&&(n.conversation_id=t.conversationId);for(let e=1;e<9;e++)(0,u.U2)(t,`custom${e}`)&&(n[`custom_attribute${e}`]=t[`custom${e}`]);return n}function Wn(e={}){var t;if(s.debug(JSON.stringify(e,null,2)),e.tealium===Kn.TEALIUM_VIEW&&(t=e,xn("view",{...t})),e.tealium===Kn.TEALIUM_LINK&&function(e){xn("link",{...e})}(e),e.newRelic){const t=(0,u.U2)(kn.getState(),"workflowOptions.rootWorkflow"),n=(0,u.U2)(kn.getState(),"workflowOptions.newRelicSubflowName");e.trace=pe(),e.reporting=function(){const{workflowOptions:e}=kn.getState();return(0,u.U2)(e,"options.optionalConfigs.reporting")}()||null,e.flow=(0,u.hK)(t),e.subflow=(0,u.hK)(n),te.then((t=>null===t||void 0===t?void 0:t.message("outer","newRelic.send",e)))}}const Kn={ACCOUNT_TYPE:"account_type",AGE_GATED_EVENT:"age_gated_event",AUTHENTICATED_USER:"authenticated_user",BACK_BUTTON:"back_button",BU_NAME:"bu_name",CLIENT_CONTEXT:"client_context",CLOSE_EVENT:"close_event",CONTINUE_SUCCESS:"continue_success",CONTINUE_MISSING_CREDENTIALS_FAILURE:"continue_missing_credentials_failure",CONTINUE_INVALID_CREDENTIALS_FAILURE:"continue_invalid_credentials_failure",CONTINUE_ANONYMIZATION_PENDING:"continue_anonymization_pending",CREATE_GALC:"create-galc",CREATE_GALC_ACTIVATE:"create_galc",CREATE_GUEST:"create_guest",CREATE_NRT_GALC:"create-nrt-galc",CREATE_NRT_GALC_ACTIVATE:"create_nrt_galc",CREATE_NRT_SUCCESS:"create-nrt-success",DETECTED_COUNTRY:"detected_country",DELETE_ACCOUNT:"account_delete_start",EDIT_ID_FLOW_EMAIL:"edit_id_flow_email",EXPERIENCE:"experience",EXTERNAL_DOMAIN:"external_url",FLOW_NAME_LICENSE_PLATE:"License Plate",FLOW_NAME_LOGIN:"login",FLOW_NAME_MARKETING_OPT_IN:"marketing opt in",FLOW_NAME_REGISTRATION:"registration",FLOW_NAME_MOBILE_VERIFICATION:"phone verify",FLOW_NAME:"flow_name",FORGOT_PASSWORD:"forgot_password",FORM_NAME_DOB:"dob",FORM_NAME_ADDRESS:"address",FORM_NAME_RECAPTCHA:"Google-reCAPTCHA",FORM_NAME:"form_name",FORM_VIEW:"form_view",IDENTITY_FLOW_START:"identity_flow_start",LEARN_MORE_EXPAND:"learn_more_expand",LEGACY_ENTRY_LINK:"legacy_entry_link",LEGAL_ASSERTIONS_ACCEPTED:"legal_assertions_accepted",LEGAL_CHECK_FAIL:"legal_check_fail",LICENSE_PLATE_ACTIVATION:"license-plate-activation",LIGHTBOX_DISMISS:"lightbox_dismiss",LIVE_USERNAME:"email_taken_notify",LOGIN_GUEST:"login_guest",LOGIN_START:"login_start",LOGIN_ATTEMPT_EXCEEDED_FAILURE:"login_attempt_exceeded_failure",LOGIN_INVALID_CREDENTIALS_FAILURE:"login_invalid_credentials_failure",LOGIN_MISSING_EMAIL_OR_USERNAME_FAILURE:"login_missing_email_or_username_failure",LOGIN_MISSING_PASSWORD_FAILURE:"login_missing_password_failure",LOGOUT_GUEST:"logout_guest",LPLATE_AUTHENTICATION:"lplate_authentication",LPLATE_START:"lplate_start",LPLATE_SUCCESS_SCREEN:"lplate_success_screen",MARKETING_CONTEXT:"marketing_context",MARKETING_DOB_OK:"marketing_dob_ok",MARKETING_LIST:"marketing_list",MARKETING_OPT_IN:"marketing_opt_in",MARKETING_OPT_OUT:"marketing_opt_out",MOBILE_NUMBER_CONFIRM_SUCCESS:"mobile_number_confirm_success",MASE_ENCOUNTER:"mase_encounter",NEW:"New",NEWSLETTERS:"newsletters",OPT_IN:"opt_in",OTP_CONTINUE_LOGIN:"otp_continue_login",OTP_LOGIN_ERROR:"otp_login_error",OTP_LOGIN_RECOVERY:"otp_login_recovery",OTP_LOGIN_START:"one_time_code_start",OTP_NRT_UPGRADE:"otp_nrt_upgrade",OTP_REASON:"otp_reason",OTP_REDEEM_SUCCESS:"otp_redeem_success",OTP_RESEND_CODE:"otp_resend_code",OTP_RESET_PASSWORD_SUCCESS:"otp_reset_password_success",OTP_RESET_PASSWORD:"otp_reset_password",PAGE_NAME:"page_name",PARENT_FLOW:"parent_flow",PASSWORD_CHECK_FAILURE:"password_check_failure",PASSWORD_CHECK_NEW_PASSWORD:"password_check_new_password",PASSWORD_CHECK_SET_PASSWORD_SUCCESSFUL:"password_check_set_password_successful",PASSWORD_RESET_START:"password_reset_start",PASSWORD_MISSING_EXPECTED_CHARS_FAILURE:"password_missing_expected_chars_failure",PASSWORD_TOO_COMMON_FAILURE:"password_too_common_failure",PASSWORD_TOO_LONG_FAILURE:"password_too_long_failure",PASSWORD_TOO_SHORT_FAILURE:"password_too_short_failure",PPU:"ppu",PPU_LOGOUT_POINT:"ppu_logout_point",PPU_SUCCESSFUL_UPDATE:"ppu_successful_update",PPU_VIEW:"ppu_view",PRIVACY_LINK_CLICKED:"privacy_link_clicked",PRIVACY_SOURCE:"privacy_source",PROGRESSIVE_MOBILE_COLLECTION:"progressive_mobile_collection",PROFILE_UPDATE:"profile_update",PROFILE_NOTE_FOUND:"profile_not_found",RECAPTCHA_FAILURE:"recaptcha_failure",RECOVERY_METHOD_EMAIL:"email_otp",RECOVERY_METHOD_SMS:"sms_otp",RECOVERY_METHOD:"recovery_method",REG_CANCEL_NO_INTERACT:"reg_cancel_no_interact",REG_FIELDS_LEFT_BLANK:"fields_left_blank_list",REGISTRATION_ATTEMPT_FAIL:"registration_attempt_fail",REGISTRATION_START:"registration_start",REGISTRATION:"registration",REAUTH:"reauth",REQUIRED_FIELDS_EMPTY_LIST:"required_fields_empty_list",REQUIRED_FIELDS_NON_EMPTY_LIST:"required_fields_non_empty_error",SHOW_PASSWORD_CLICK:"show_password_click",SMS_TOU_LINK_CLICKED:"sms_tou_link_clicked",SMS_TOU_SOURCE:"sms_tou_source",SOCIAL_LINK_COMPLETE:"social_link_complete",SOCIAL_PARTIAL_DATA_MISSING_LIST:"social_partial_data_missing_list",SOCIAL_PARTIAL_DATA_MISSING:"social_partial_data_missing",SWID:"swid",T_LOGIN_TYPE:"t_login_type",T_REGISTRATION_TYPE:"t_registration_type",TEALIUM_LINK:"link",TEALIUM_VIEW:"view",TEALIUM:"tealium",TOKEN_REFRESH:"token_refresh",TOTAL_LOGINS:"total_logins",TOU_LINK_CLICKED:"tou_link_clicked",TOU_SOURCE:"tou_source",TRACKED_LINKS:{AND_MORE_LINK:"and_more_link",VISIT_OUR_SUPPORT_CENTER_LINK:"visit_our_support_center_link"},VERIFY_CODE_ERROR:"verify_code_error",VERIFY_PHONE_START:"verify_phone_start"};function $n(e){return te.then((t=>t.call("responder","deviceID.read",e).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),function(e={}){Wn({...e,[Ie.NEW_RELIC]:!0})}({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(inner-lib-cookies-deviceId)",[Ie.STACK_TRACE]:t})}))))}function Hn(e,t){const n=new Date(Date.now());return e.token=t,e.token.created=n.toISOString(),e.token.lastChecked=e.token.created,e.token.expires=new Date(e.token.exp).toISOString(),e.token.refresh_expires=new Date(e.token.refresh_exp).toISOString(),Ct({guest:e,token:e.token},!0)}const jn=[{readToken:{stepExecution:function(e){return Ee().then((n=>n?(je("tokenData",n),Z(n)?(0,u.U2)(n,"refresh_token")?e("acquireMutex"):(je("logoutType","norefresh"),t(),void e("ensureLoggedOut")):(t(),e("emitRefreshEvent"))):e())).catch((()=>e()));function t(){je("mutexAttempt",0)}},results:{ensureLoggedOut:"ensureLoggedOut",acquireMutex:"acquireMutex",emitRefreshEvent:"emitRefreshEvent"}}},{ensureLoggedOut:{stepExecution:vt,results:{done:"releaseMutex"}}},{acquireMutex:{stepExecution:function(e){const t=Ye("mutexAttempts")+1||1;return je("mutexAttempts",t),t>le.MAX_MUTEX_ATTEMPTS?(s.debug("acquireMutex#max attempts reached"),n(),e("ensureGuestLoggedOut")):Ft().then((t=>{if(!t)return s.debug("acquireMutex#could not acquire"),setTimeout((()=>{e("readToken")}),le.MUTEX_WAIT_INTERVAL);n(),e("refreshToken")}));function n(){je("mutexAttempts",0)}},results:{readToken:"readToken",ensureGuestLoggedOut:"ensureLoggedOut",refreshToken:"refreshToken"}}},{refreshToken:{stepExecution:function(e){var t;const n=Ye("tokenData")||{},o=Ye("guest"),r=(null===o||void 0===o||null===(t=o.profile)||void 0===t?void 0:t.email)||"",s=xt();return $n(r).then((e=>Je.refreshAuthorization({refreshToken:n.refresh_token,deviceId:e}))).then((t=>{je("tokenRefreshResponse",t);const n=(0,u.U2)(t,"data.token")||{},o=(0,u.U2)(t,"parsedErrors")||{},r=200===t.status&&n.access_token&&n.refresh_token,i=s&&n.access_token&&n.refresh_token;return r||i?mt().then((t=>(je("tokenData",n),t?Hn(t,n).then((()=>e("emitRefreshEvent"))):Lt().then((e=>Hn(e,n))).then((()=>e("emitRefreshEvent")))))):o.isInvalidRefreshToken?(je("logoutType","norefresh"),je("logoutReason",wt.INVALID_REFRESH),e("ensureGuestLoggedOut")):o.isSecurityFlagged?(je("logoutType","securityFlagged"),e("ensureGuestLoggedOut")):o.isGating?s?e("ensureGuestLoggedOut"):te.then((t=>t.call("inner","runWorkflow",{name:"GATING",workflowData:{parsedErrors:o}}).then((()=>(ut.showLightbox(),e("ensureGuestLoggedOut")))))):o.isPPU?s?e("ensureGuestLoggedOut"):Promise.all([St(),te]).then((([n,r])=>r.call("inner","runWorkflow",{guest:n,name:"LOGIN",step:"ppuSubflow",workflowData:{parsedErrors:o,ppu:{errors:t.error.errors}}}).then((()=>{ut.showLightbox(),e()})))):void 0})).catch((()=>e("releaseMutex")))},results:{ensureGuestLoggedOut:"ensureLoggedOut",releaseMutex:"releaseMutex",emitRefreshEvent:"emitRefreshEvent"}}},{forceRefresh:{stepExecution:function(e){return Ee().then((t=>{if(!t)return e();je("tokenData",t),e("refreshToken")}))},results:{refreshToken:"refreshToken"}}},{emitRefreshEvent:{stepExecution:function(e){const t=Ye("tokenData");return Ue(Dt.REFRESH,t),te.then((n=>{n.message("inner","setGuest",{token:t}),e()})).catch(e)},results:{releaseMutex:"releaseMutex"}}},{releaseMutex:{stepExecution:function(e){O(Gt(),R.getCookieDomain(),bt),qe("tokenData"),e()},results:{}}}];function Yn(e){new fe("tokenRefresh",jn,void 0,(()=>e())).runWorkflow()}const qn={low:0,high:1};function Zn(){return new Promise((e=>{const{clientId:t}=F(),n=ue();te.then((o=>o.call("responder","get.cookie",`${t}-${n}.${V.TRUST_STATE}`).then((t=>{if(null===t)return e({state:!1});const n=Date.parse(t)-Date.now(),o=n<1?qn.low:qn.high;e({state:o,timeLeft:n})})).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-trustState)",[Ie.STACK_TRACE]:t})}))))}))}function zn(e=le.TRUST_TIMEOUT){const{clientId:t}=F(),n=ue(),o=new Date(Date.now()+e);return te.then((e=>e.call("responder","set.cookie",{key:`${t}-${n}.${V.TRUST_STATE}`,value:o.toISOString(),expires:o}).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-trustState)",[Ie.STACK_TRACE]:t})}))))}function Qn(){const{clientId:e}=F(),t=ue();return te.then((n=>n.call("responder","delete.cookie",{key:`${e}-${t}.${V.TRUST_STATE}`}).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-lib-cookies-trustState)",[Ie.STACK_TRACE]:t})}))))}const Xn=e=>Ct({guest:e,token:e.token},!0);function Jn(e){return function({guest:e,writeSWIDCookie:t,writeGuest:n,writeTrustStateCookie:o}){const r=new Date(Date.now()),s={...e,token:{...e.token,created:r.toISOString(),lastChecked:r.toISOString(),expires:new Date(e.token.exp).toISOString(),refresh_expires:new Date(e.token.refresh_exp).toISOString()}},i=(0,u.U2)(s,"profile.swid"),a=(0,u.U2)(s,"profile.ageBand")===Ve.CHILD;return Promise.all([t(i,a),n(s),o(1e3*s.token.high_trust_expires_in||void 0)])}({guest:e,writeSWIDCookie:x,writeGuest:Xn,writeTrustStateCookie:zn})}function eo(e,t){s.error(e),we({[Ie.ACTION_NAME]:Ie.EVENT_LOGIN_OBO,[Ie.ERROR_CATEGORY]:"Unknown",[Ie.INFO]:`substep(${t}),message(${(null===e||void 0===e?void 0:e.message)||""})`})}const to={CHANGE_EMAIL:"CHANGE_EMAIL",CHANGE_PASSWORD:"CHANGE_PASSWORD",DATE_OF_BIRTH_INTERSTITIAL:"DATE_OF_BIRTH_INTERSTITIAL",EMAIL_VERIFICATION:"EMAIL_VERIFICATION",EXPIRED_SESSION:"EXPIRED_SESSION",GALC:"GALC",GATING:"GATING",IDENTITY_FLOW:"IDENTITY_FLOW",LICENSE_PLATE:"LICENSE_PLATE",LOGIN:"LOGIN",MOBILE_VERIFICATION:"MOBILE_VERIFICATION",NEWSLETTERS:"NEWSLETTERS",OTP_LOGIN_RECOVERY:"OTP_LOGIN_RECOVERY",OTP_REQUEST_AND_REDEEM:"OTP_REQUEST_AND_REDEEM",PARTIAL_PROFILE_UPDATE:"PARTIAL_PROFILE_UPDATE",PPU_ADDRESS:"PPU_ADDRESS",PPU_DATE_OF_BIRTH:"PPU_DATE_OF_BIRTH",PPU_MARKETING:"PPU_MARKETING",PPU_PASSWORD:"PPU_PASSWORD",PPU_PROFILE_LEGAL:"PPU_PROFILE_LEGAL",PPU:"PPU",REAUTH:"REAUTH",REGISTRATION:"REGISTRATION",RELOAD_GUEST:"RELOAD_GUEST",SENT_GATING_PIL2:"SENT_GATING_PIL2",SERVICE_ERROR:"SERVICE_ERROR",SET_PPC:"SET_PPC",UPDATE_PROFILE:"UPDATE_PROFILE",REDEEM_SESSION_TRANSFER:"REDEEM_SESSION_TRANSFER",REDEEM_MAGIC_LINK_TOKEN:"REDEEM_MAGIC_LINK_TOKEN",LAUNCH_OTP:"LAUNCH_OTP",LAUNCH_LOGIN_BY_SWID:"LAUNCH_LOGIN_BY_SWID"};const no=[{cleanUpSession:{stepExecution:function(e){Ee().then((t=>{t&&(!function(){s.debug("[SESSION TOKEN] - Cookie deletion");const e=F(),t=ue();O(`${e&&e.clientId}-${t}.${V.TOKEN}`,N(),"/")}(),we({[Ie.ACTION_NAME]:Ie.EVENT_LOGOUT,[Ie.INFO]:`reason(${wt.OBO})`})),e("done")}))},results:{done:"attemptOBOLogin"}}},{attemptOBOLogin:{stepExecution:function(e){const t=T(V.LOWERCASE_SWID),n=It();s.debug("[OBO Login Attempt]: started obo: ",n," swid: ",t);const o=Ce(Ie.EVENT_LOGIN_OBO);return Je.oboLogin({swid:t,oboToken:n}).then((t=>(s.debug("[OBO Login Attempt]: response ",t),ht(),t.status>=400&&t.status<500||(e=>{var t;return((null===(t=e.error)||void 0===t?void 0:t.errors)||[]).some((e=>e.code===Ge.PPU_MARKETING))})(t)?(je("oboResponse",t),function(e){var t;we({[Ie.ACTION_NAME]:Ie.EVENT_LOGIN_OBO,[Ie.ERROR_CATEGORY]:(null===(t=e.error)||void 0===t?void 0:t.keyCategory)||"Unknown",[Ie.ERROR_CODES]:Ke(We(e))})}(t),void e("failed")):Jn(t.data).then((()=>{s.debug("[OBO Attempt] - Success create session"),o.send({[Ie.INFO]:"login_obo_success"}),e("success")})).catch((t=>{eo(t,"createSession"),e("failed")}))))).catch((t=>{eo(t,"oboLogin"),ht(),e("failed")}))},results:{failed:"parseErrors"}}},{parseErrors:{stepExecution:function(e){var t,n;const o=Ye("oboResponse")||{};return(null===o||void 0===o||null===(t=o.parsedErrors)||void 0===t?void 0:t.isPPU)?e("ppu"):(null===o||void 0===o||null===(n=o.parsedErrors)||void 0===n?void 0:n.isGating)?e("gating"):void e()},results:{ppu:"launchPPU",gating:"launchGating"}}},{launchPPU:{stepExecution:function(e){const t=Ye("oboResponse")||{};return te.then((n=>n.call("inner","runWorkflow",{guest:t.data,name:to.LOGIN,step:"ppuSubflow",workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{ut.showLightbox(),e()}))))},results:{}}},{launchGating:{stepExecution:function(e){const t=Ye("oboResponse")||{};return te.then((n=>n.call("inner","runWorkflow",{name:to.GATING,workflowData:{parsedErrors:t.parsedErrors}}).then((()=>{ut.showLightbox(),e()}))))},results:{}}},{windowReload:{stepExecution:function(e){s.debug("[OBO Reload] - this app will be reloaded in 2 seconds...");const t=window.location.reload.bind(window.location);setTimeout(t,2e3)},results:{}}}];const oo=[{anonymize:{stepExecution:function(e){B()||x((0,u.Vj)()),e("done")},results:{done:"checkForOBOToken"}}},{checkForOBOToken:{stepExecution:function(e){s.debug("[checkForOBOToken]: init");const t=It();if(!t)return s.debug("[checkForOBOToken]: no OBO Token"),e("notFound");s.debug("[checkForOBOToken]: OBO Token Found: ",t,t.isExpired),e("found")},results:{found:"oboSubflow",notFound:"readSession"}}},{readSession:{stepExecution:function(e){return Ee().then((t=>t?(je("tokenData",t),Y(t)?(s.info("Starting token refresh"),e("tokenRefresh")):void e("getGuestSubflow")):e()))},results:{getGuestSubflow:"getGuestSubflow",tokenRefresh:"tokenRefreshSubflow"}}},{getGuestSubflow:{stepExecution:function(e){const t=new fe("getGuest",kt,"readGuestFromLocalStorage",(()=>{const t=Ye("guest");if(t)return te.then((e=>e.message("inner","setGuest",t))).finally(e);e()}));t.runWorkflow()},results:{}}},{tokenRefreshSubflow:{stepExecution:Yn,results:{}}},{oboSubflow:{stepExecution:function(e){new fe("oboSubflow",no,void 0,(()=>e("done"))).runWorkflow()},results:{done:"readSession"}}}];function ro(e){je("guestFlowName","LOGIN_FLOW");const t=Ye("workflowOptions"),n=Ye("guestFlowCode");return te.then((o=>o.call("inner","runWorkflow",{name:"LOGIN",workflowData:{loginValue:Ye("guestFlowEmail")},workflowOptions:t,persistentTealiumData:{flow_name:"Guest Flow Login",guest_flow:n}}).then((()=>{ut.showLightbox(),e()})).catch((t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-workflows-guestFlow-launchLogin)",[Ie.STACK_TRACE]:n}),e()}))))}const so=[{validate:{stepExecution:function(e){const t=Ye("workflowOptions");let n=(0,u.U2)(t,"guestFlowEmail"),o=!1;if("string"===typeof n&&(n=n.trim().replace(/<|>/gim,""),o=_.test(n)),o)return je("guestFlowEmail",n),e("checkForAccount");qe("guestFlowEmail"),e("launchRegistration")},results:{checkForAccount:"checkForAccount",launchRegistration:"launchRegistration"}}},{checkForAccount:{stepExecution:function(e){const t=Ye("guestFlowEmail");return t?Je.guestFlow(t).then((t=>{const n=(0,u.U2)(t,"data.guestFlow")||"",o=n.match(p)?"launchLogin":"launchRegistration";je("guestFlowCode",n),e(o)})).catch((()=>e("launchRegistration"))):e("launchRegistration")},results:{launchLogin:"launchLogin",launchRegistration:"launchRegistration"}}},{launchRegistration:{stepExecution:function(e){je("guestFlowName","REGISTRATION_FLOW");const t=Ye("workflowOptions"),n=Ye("guestFlowEmail")||"",o=Ye("guestFlowCode"),r={profile:{email:n}};return te.then((n=>n.call("inner","runWorkflow",{name:"REGISTRATION",workflowOptions:t,guestChanges:r,persistentTealiumData:{flow_name:"Guest Flow Registration",guest_flow:o}}).then((()=>{ut.showLightbox(),e()})).catch((t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),we({[Ie.ACTION_NAME]:Ie.LOG_PATCHBAY_ERROR,[Ie.INFO]:"location(outer-workflows-guestFlow-launchRegistration)",[Ie.STACK_TRACE]:n}),e()}))))},results:{}}},{launchLogin:{stepExecution:ro,results:{}}}];function io(e){const t={data:{email:null,legal:[]},error_codes:null},n=Ye("workflowOptions")||{};t.data.campaignId=Ye("promotionID"),je("workflowOptions",{...n,fullPayloadRequested:!0});const o=new fe("getGuest",kt,null,(()=>{const n=Ye("guest");return n?(t.data.email=n.profile.email,je("responsePayload",t),e("guestIsLoggedIn")):(je("responsePayload",t),e("guestIsNotLoggedIn"))}));o.runWorkflow()}const ao={AGE_GATED:"AGE_GATED",ALREADY_OPT_IN:"ALREADY_OPT_IN",INVALID_EMAIL:"INVALID_EMAIL",INVALID_LOCATION:"INVALID_LOCATION",MISSING_OPT_IN:"MISSING_OPT_IN",NO_DATA:"NO_DATA",NO_VALID_CAMPAIGN:"NO_VALID_CAMPAIGN",SERVICE_ERROR:"SERVICE_ERROR"};function co(e){const t=e.errors[0];if("MISSING_VALUE"===t.code){const e=t.inputName.toUpperCase();return`${t.code}_${e}`}return t.code}function uo(e){const t=Ye("responsePayload");ve().then((n=>{const o=(0,u.U2)(n,"compliance.ageBands.ADULT.country");if("US"!==o)return t.data={},t.error_codes=ao.INVALID_LOCATION,je("responsePayload",t),e();je("defaultLegalCountry",o),e("getLegalData")}))}const lo=(e,t=!1)=>({code:e.name,content:e.text,subscribed:t,preselected:e.checked});function Eo(e){ve().then((t=>{const n=Ye("guest"),o=(0,u.U2)(n,"profile.region"),r=(0,u.U2)(n,"profile.countryCodeDetected"),s=(0,u.U2)(t,"compliance.defaultCountryCode");je("guestLocation",o||r||s||"US"),e("checkProfile")}))}function _o(e){const t=Ye("responsePayload"),n=Ye("guest"),o=Ye("workflowOptions"),r=function(e,t){if("CHILD"===(0,u.U2)(e,"profile.ageBand"))return ao.AGE_GATED;if("US"!==Ye("guestLocation"))return ao.INVALID_LOCATION;if(null!==t&&t!==(0,u.U2)(e,"profile.email"))return ao.INVALID_EMAIL;return!1}(n,(0,u.U2)(o,"buData.email")||null)||!1;if(r)return t.error_codes=r,t.data={},je("responsePayload",t),e();e("hasOptedIntoAnything")}const po=[{runGetGuestWorkflow:{stepExecution:io,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:uo,results:{getLegalData:"getLegalData"}}},{getLegalData:{stepExecution:function(e){const t=Ye("responsePayload");return Promise.all([ve(),te.then((e=>e.call("inner","config.getL10n"))).then(u._A)]).then((([n,o])=>{const r=(0,u.U2)(n,"legal.ADULT.disclosures"),s=[];r.forEach((e=>{s.push({code:e.disclosureCode,requiresActiveConsent:e.requiresActiveConsent,accepted:!e.requiresActiveConsent,content:o[`legal.${e.disclosureCode}_create`]})})),t.data.legal=s,je("responsePayload",t),e("getMarketingData")}))},results:{getMarketingData:"getMarketingData"}}},{getMarketingData:{stepExecution:function(e){const t=Ye("responsePayload"),n=Ye("promotionID");return ve().then((o=>{const r=(0,u.U2)(Ye("guest"),"profile.ageBand")||"ADULT",s=(0,u.U2)(o,`newsletters.${r}.${n}`),i=new Set,a=[];s.forEach((e=>{i.has(e.name)||(i.add(e.name),a.push(lo(e)))})),t.data.marketing=a,je("responsePayload",t),e()}))},results:{}}},{getGuestLegalCountry:{stepExecution:Eo,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:_o,results:{hasOptedIntoAnything:"hasOptedIntoAnything"}}},{hasOptedIntoAnything:{stepExecution:function(e){const t=Ye("guest");e((0,u.U2)(t,"marketing")?"filterOptedInMarketingLists":"getMarketingData")},results:{getMarketingData:"getMarketingData",filterOptedInMarketingLists:"filterOptedInMarketingLists"}}},{filterOptedInMarketingLists:{stepExecution:function(e){ve().then((t=>{const n=Ye("guest"),o=(0,u.U2)(n,"marketing"),r=(0,u.U2)(n,"profile.ageBand"),s=Ye("promotionID"),i=(0,u.U2)(t,`newsletters.${r}.${s}`),a=[];for(const e of i)a.push(...e.lists);const c=new Set(o.filter((e=>e.subscribed)).map((e=>e.code))),l=a.filter((e=>!c.has(e.name))),E=Ye("responsePayload");l.length?E.data.marketing=l.map((e=>lo(e))):(E.error_codes=ao.ALREADY_OPT_IN,E.data={}),je("responsePayload",E),e()}))},results:{}}}];const fo=[{runGetGuestWorkflow:{stepExecution:io,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:uo,results:{getLegalData:"prepareRequest"}}},{getGuestLegalCountry:{stepExecution:Eo,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:_o,results:{hasOptedIntoAnything:"prepareRequest"}}},{prepareRequest:{stepExecution:function(e){const t=(0,u.U2)(Ye("workflowOptions"),"buData"),n=(0,u.U2)(t,"legal"),o=(0,u.U2)(t,"marketing");if(!n||!o)return e();je("marketingParams",o);const r=(0,u.U2)(t,"campaignId"),s=Ye("guestLocation")||Ye("defaultLegalCountry");je("requestPayload",{profile:{email:t.email,countryCodeDetected:s,region:s},legalAssertions:n.filter((e=>e.accepted)).map((e=>e.code)),campaign:r}),e("prepareMarketingPayload")},results:{prepareMarketingPayload:"prepareMarketingPayload"}}},{prepareMarketingPayload:{stepExecution:function(e){const t=Ye("requestPayload"),{campaign:n}=t,o=Ye("marketingParams"),r=Ye("guest"),s=r&&r.marketing;s&&o.push(...r.marketing);const i=function(e){const t=e.filter((e=>e.subscribed)),n=new Set,o=[];return t.forEach((e=>{n.has(e.code)||(o.push(e),n.add(e.code))})),o}(o);ve().then((o=>{const a=(0,u.U2)(o,"newsletters.ADULT",n);let c=!1;const l=[];if(s){const e=[];a.forEach((t=>e.push(...t.lists)));const t={};e.forEach((e=>t[e.name]=e));for(const e of i){const n=t[e.code];if(!n){c=!0;break}l.push({code:n.name,subscribed:!0,textId:n.textId})}}else{const t={};a.forEach((e=>t[e.name]=e));for(const e of i){const n=t[e.code];if(!n){c=!0;break}{const e=n.lists.map((e=>({code:e.name,subscribed:!0,textId:n.textId})));l.push(...e)}}if(c)return je("responsePayload",{data:{},error_codes:"NO_VALID_CAMPAIGN"}),e()}t.marketing=l,je("requestPayload",t),e(r?"executeUpdate":"executeRequest")}))},results:{executeUpdate:"executeUpdate",executeRequest:"executeRequest"}}},{executeRequest:{stepExecution:function(e){const t=Ye("requestPayload");return Je.guestMarketingOptIn(t).then((t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?je("responsePayload",{data:{},error_codes:co(t.error)}):je("responsePayload",{data:"SUCCESS",error_codes:null}),e()})).catch((()=>{je("responsePayload",{data:{},error_codes:ao.SERVICE_ERROR}),e()}))},results:{}}},{executeUpdate:{stepExecution:function(e){const t=Ye("requestPayload"),{marketing:n}=t,o=Ye("guest"),r=(0,u.U2)(o,"profile.swid"),s=(0,u.U2)(o,"profile.email"),i=(0,u.U2)(o,"token.access_token"),a=Ie.SERVICE_UPDATE_GUEST,c={marketing:n};return $n(s).then((e=>Je.guestUpdateBySWID({guest:c,swid:r,accessToken:i,eventName:a,deviceId:e}))).then((t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?(je("responsePayload",{data:{},error_codes:co(t.error)}),e()):(je("responsePayload",{data:"SUCCESS",error_codes:null}),e("reloadGuest"))})).catch((()=>{je("responsePayload",{data:{},error_codes:ao.SERVICE_ERROR}),e()}))},results:{reloadGuest:"reloadGuest"}}},{reloadGuest:{stepExecution:function(e){const t=Ye("workflowOptions")||{};t.fullPayloadRequested=!0,t.forceRefresh=!0,je("workflowOptions",t),new fe("getGuest",kt,null,(()=>e())).runWorkflow()},results:{}}}],Io=["firstName","gender","lastName","middleName","prefix","suffix","languagePreference","pronunciationName","address.billing","address.home","address.school","address.shipping","address.work","phone.day","phone.mobile","phone.night","proposedDisplayName"],ho=["email","username","address.other","phone.fax","dateOfBirth","password","displayName","region"],To=["line1","line2","line3","city","stateProvince","postalCode","country","preferred"],Oo=["number","internationalPrefix","countryCode","extension","preferred"];function Ao(e,t){const n=Object.keys(e).filter((function(e){return 0===e.indexOf(`${t}.`)})).map((function(t){const n=t.split(".");return{type:n[1].toUpperCase(),field:n[2],value:e[t]}})).reduce((function(e,t){return(0,u.t8)(e,[t.type,t.field].join("."),t.value),e}),{});return Object.keys(n).map((function(e){return Object.assign(n[e],{type:e})}),[])}function Ro(e){e.forEach((e=>{Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]}))}))}function No(e,t,n){t.map((function(t){const o=(r=e,s=t.type,r.filter((e=>e.type===s)));var r,s;return o.length&&(t[n]=o[0][n]),t}))}function go(e){let t=!1;for(const n in e)"addressGuid"!==n&&"type"!==n&&"preferred"!==n&&(t=!0);return t}function So(e){if("string"===typeof e)return e.trim();if("object"===typeof e)for(const t in e)e[t]=So(e[t]);return e}function mo(e,t){const n={};for(const o in t)if(t.hasOwnProperty(o)){null!==e&&"object"===typeof e&&e.hasOwnProperty(o)||(n[o]=t[o]);if(null!==t[o]&&null!==e[o]&&!Array.isArray(t[o])&&!Array.isArray(e[o])&&"object"===typeof t[o]&&"object"===typeof e[o]){const r=mo(e[o],t[o]);Object.keys(r).length>0&&(n[o]=r)}else(e[o]!==t[o]||Array.isArray(t[o]))&&(n[o]=t[o]);null===e[o]&&""===t[o]&&delete n[o]}return n}function Lo(e,t){return t=(0,u.d9)(t),Object.keys(t||{}).forEach((function(n){null===(0,u.U2)(t,n)&&(0,u.U2)(e,n)&&(0,u.t8)(t,n,e[n])})),(0,u.t8)(e,"etag",(0,u.U2)(t,"etag")),e.profile=Co(e.profile,t.profile),e.displayName=Co(e.displayName,t.displayName),e.marketing=Co(e.marketing,t.marketing),e}function Co(e,t){if(null===t||"object"!==typeof t||Array.isArray(t))return t;for(const n in t)t.hasOwnProperty(n)&&((e=e||{})[n]=Co(e[n],t[n]));return e}const yo=[{runGetGuestWorkflow:{stepExecution:io,results:{guestIsLoggedIn:"parseInput",guestIsNotLoggedIn:{}}}},{parseInput:{stepExecution:function(e){const t=Ye("workflowData"),n=function(e){return Object.keys(e).filter((function(t){return!("string"!==typeof e[t]||!e[t].trim())})).filter((function(e){for(let t=0;t<ho.length;t++)if(e.startsWith(ho[t]))return;return!0})).reduce((function(t,n){return t[n]=e[n].trim(),t}),{})}((0,u.U2)(t,"guestData")||{}),o=function(e){return Object.keys(e).filter((function(e){return!e.includes("address.")&&!e.includes("phone.")&&"proposedDisplayName"!==e})).reduce((function(t,n){return t.profile[n]=e[n],t}),{profile:{}})}(n);o.profile.addresses=Ao(n,"address"),o.profile.phones=Ao(n,"phone"),n.proposedDisplayName&&(o.displayName={proposedDisplayName:n.proposedDisplayName}),(0,u.t8)(t,"parsedGuest",o),je("workflowData",t),e("success")},results:{success:"prepareUpdate",error:"close"}}},{prepareUpdate:{stepExecution:function(e){const t=Ye("workflowData"),n=(0,u.U2)(t,"parsedGuest"),o=(0,u.d9)(n),r=(0,u.U2)(t,"guest"),s=(0,u.U2)(r,"profile.addresses"),i=(0,u.U2)(r,"profile.phones"),a=(0,u.U2)(o,"profile.addresses"),c=(0,u.U2)(o,"profile.phones");Array.isArray(s)&&Array.isArray(a)&&No(s,a,"addressGuid"),Array.isArray(i)&&Array.isArray(c)&&No(i,c,"phoneGuid");const l=function(e,t){if("undefined"===typeof e||"undefined"===typeof t)return{};const n=So((0,u.d9)({profile:mo(e.profile||{},t.profile||{})||{},displayName:mo(e.displayName||{},t.displayName||{})||{}}));Object.keys(n.profile).forEach((function(e){""===n.profile[e]&&(n.profile[e]=null)})),Object.keys(n.displayName).forEach((function(e){""===n.displayName[e]&&(n.displayName[e]=null)})),(0,u.U2)(n.profile,"dateLastModified")&&delete n.profile.dateLastModified;(0,u.U2)(n.profile,"segmentDeletes")&&delete n.profile.segmentDeletes;return function(e,t,n){const o=["line1","line2","line3","postalCode","stateProvince","country","city","type"],r=(0,u.d9)((0,u.U2)(t,"profile.addresses")||[]),s=[],i={};((0,u.U2)(e,"profile.addresses")||[]).forEach((function(e){i[e.addressGuid]=e})),(0,u.U2)(n,"profile.addresses")&&delete n.profile.addresses;Array.isArray(r)&&r.length&&(r.forEach((function(e){const t=e.addressGuid,n={};o.forEach((function(t){n[t]=e[t]?e[t]:null})),"undefined"!==typeof(0,u.U2)(i,[t,"addressGuid"].join("."))&&(n.addressGuid=t,a(n).forEach((function(o){i[t][o]===e[o]&&delete n[o]}))),a(n).length&&s.push(n)})),s.length&&(0,u.t8)(n,"profile.addresses",s));function a(e){return Object.keys(e).filter((function(e){return-1===["preferred","addressGuid","type"].indexOf(e)}))}}(e,t,n),function(e,t,n){if(!(0,u.U2)(n,"profile"))return;"undefined"!==typeof(0,u.U2)(n,"profile.phones")&&delete n.profile.phones;if(Array.isArray((0,u.U2)(t,"profile.phones"))){const s=[];t.profile.phones.forEach((function(t){let n,i;t.phoneGuid&&!t.number?s.push({phoneGuid:t.phoneGuid}):t.number&&t.type&&(n=r(e,t),n?(i=mo(n,t),Object.keys(i).length>0&&(i.phoneGuid=t.phoneGuid,i.type=t.type,s.push(i))):s.push(o({number:t.number,type:t.type,internationalPrefix:t.internationalPrefix,countryCode:t.countryCode})))})),s.length&&(n.profile.phones=s)}function o(e){const t={};return Object.keys(e).forEach((function(n){let r;"object"===typeof e[n]?(r=o(e[n]),Object.keys(r).length>0&&(t[n]=r)):null!=e[n]&&(t[n]=e[n])})),t}function r(e,t){let n;const o=(0,u.U2)(e,"profile.phones");return t.phoneGuid&&o&&(n=o.filter((function(e){return e.phoneGuid===t.phoneGuid}))[0]),n}}(e,t,n),function(e,t,n){const o=(0,u.U2)(e,"marketing");let r=(0,u.U2)(t,"marketing");const s={};if((o||[]).forEach((function(e){s[e.code]=e})),Array.isArray(r)&&r.length&&(r=r.filter((function(e){return e.subscribed!==(0,u.U2)(s,[e.code,"subscribed"].join("."))})),r.length))return n.marketing=r,n.marketing}(e,t,n),function(e,t,n){const o=e.legalAssertions||[],r=[];(t.legalAssertions||[]).forEach((function(e){-1===o.indexOf(e)&&r.push(e)})),r.length>0&&(n.legalAssertions=r)}(e,t,n),Object.keys(n).forEach((function(e){"object"!==typeof n[e]||n[e]&&0!==Object.keys(n[e]).length||delete n[e]})),n}(r,o);if(Array.isArray((0,u.U2)(l,"profile.addresses"))){Ro(l.profile.addresses);const e=l.profile.addresses.filter(go);e.length>0?l.profile.addresses=e:delete l.profile.addresses}Array.isArray((0,u.U2)(l,"profile.phones"))&&Ro(l.profile.phones),(0,u.t8)(t,"modifiedGuest",l),je("workflowData",t),e("success")},results:{success:"execute"}}},{execute:{stepExecution:function(e){const t=Ye("workflowData"),n=(0,u.U2)(t,"guest"),o=(0,u.U2)(n,"profile.email"),r=(0,u.U2)(n,"etag"),s={...(0,u.U2)(t,"modifiedGuest"),etag:r},i=(0,u.U2)(n,"profile.swid"),a=(0,u.U2)(n,"token.access_token");return $n(o).then((e=>Je.guestUpdateBySWID({guest:s,swid:i,accessToken:a,etag:r,deviceId:e,eventName:Ie.API_SET_PPC}))).then((t=>{const o=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==o||je("workflowData",{...Ye("workflowData"),guest:Lo(n,t.data)}),je("workflowErrors",(0,u.U2)(t,"error.errors")),e()}),(t=>{je("workflowErrors",(0,u.U2)(t,"error.errors")),e()}))},results:{}}}];function wo(e,t){return(e=e||[]).reduce(((e,n)=>("undefined"===typeof e[n[t]]&&(e[n[t]]=n),e)),{})}function Po(e){if((e=e||{})&&"EDITABLE"===e.editable){const t=e.type||{};return Object.keys(t).reduce(((e,n)=>{const o=t[n]||{};return e[n]=Object.keys(o).reduce(((e,t)=>("EDITABLE"===o[t].editable&&"type"!==t&&(e[t]=null),e)),{}),e}),{})}return null}function Do(e){const t=e.existingProfile[e.type]||e.template[e.type]||e.template.DEFAULT||null,n=e.config[e.type]||e.config.DEFAULT||null;return t&&n&&Object.keys(t).forEach((o=>{if(e.allowedFields.indexOf(o)>-1){const r=e.fieldName.split(".");r.push(o);const s=r.join(".");e.editableProfile.data[s]=t[o]||null,e.editableProfile.required[s]=(n[o]||{}).required||!1}})),e.editableProfile}const Uo=[{runGetGuestWorkflow:{stepExecution:io,results:{guestIsLoggedIn:"getEditableAndRequiredFields",guestIsNotLoggedIn:{}}}},{getEditableAndRequiredFields:{stepExecution:function(e){const t=Ye("guest");let n={data:{},required:{}};try{ve().then((o=>{const r=Io,s=`compliance.ageBands.${t.profile.ageBand}.UPDATE`,i=(0,u.U2)(o,s),a=wo(t.profile.addresses,"type"),c=wo(t.profile.phones,"type"),l=Po((0,u.U2)(o,`${s}.addresses`)),E=Po((0,u.U2)(o,`${s}.phones`)),_=(0,u.U2)(o,"displayName"),d=(0,u.U2)(_,"enabled");for(const e of r){const o=(e.split(".")[1]||"").toUpperCase();e.includes("address")&&i.addresses?n=Do({existingProfile:a,template:l,config:i.addresses.type,allowedFields:To,fieldName:e,editableProfile:n,type:o}):e.includes("phone")&&i.phones?n=Do({existingProfile:c,template:E,config:i.phones.type,allowedFields:Oo,fieldName:e,editableProfile:n,type:o}):e.toLowerCase().includes("displayname")&&d?n.data[e]=(0,u.U2)(t,`displayName.${e}`):i[e]&&(n.data[e]=(0,u.U2)(t,`profile.${e}`),n.required[e]=(0,u.U2)(i,e).required||!1)}return je("editableFields",n),Promise.resolve(e())}))}catch(e){je("editableFields",{error_codes:Ge.UNKNOWN_ERROR,data:{}})}},results:{}}}];let vo;function ko(){return s.log("TrustState#watch"),Zn().then((e=>{if(bo(),(0,u.U2)(e,"state")===qn.low)return s.info("In low trust"),Go(),void Qn();!function(e=le.TRUST_TIMEOUT){vo=setTimeout((()=>{Go(),Qn()}),e)}((0,u.U2)(e,"timeLeft"))})).catch((()=>{Go(),bo()}))}function bo(){clearTimeout(vo),vo=void 0}function Go(){Ue(Dt.LOW_TRUST)}const Mo=[{checkState:{stepExecution:function(e){const t=()=>{if(!0===Ye("wasLoggedIn"))return e("syncLoggedOut");e()};return Ee().then((n=>n?(je("loggedIn",!0),!1===Ye("wasLoggedIn")?e("syncLoggedIn"):!q(n)||Z(n)?e("tokenRefresh"):void e()):t())).catch(t)},results:{syncLoggedIn:"syncLoggedIn",syncLoggedOut:"syncLoggedOut",tokenRefresh:"tokenRefreshSubflow"}}},{tokenRefreshSubflow:{stepExecution:Yn,results:{}}},{syncLoggedIn:{stepExecution:function(e){return Promise.all([St(),te]).then((([t,n])=>n.call("inner","setGuest",t).then((()=>{n.call("inner","reloadConfigFromBundlerIfChanged");const o=(0,u.U2)(t,"profile.ageBand")===Ve.CHILD;x((0,u.U2)(t,"profile.swid"),o),Ue(Dt.LOGIN,t),ko(),je("loggedIn",!0),e()})))).catch(e)},results:{}}},{syncLoggedOut:{stepExecution:function(e){const t=B();return te.then((n=>n.call("inner","guest.logout").then((()=>{bo(),t&&t.startsWith("{")&&x((0,u.Vj)()),Ut(wt.LOGGED_OUT_IN_OTHER_TAB),Ze(),je("loggedIn",!1),e()})).catch(e)))},results:{}}}];const Fo={CANCEL_BY_USER:"CANCEL_BY_USER",CODE_LOCKOUT:"CODE_LOCKOUT",EMAIL_VERIFICATION_CALLBACK:"EMAIL_VERIFICATION_CALLBACK",GUEST_LOGOUT:"GUEST_LOGOUT",LAUNCH_OTP_CALLBACK:"LAUNCH_OTP_CALLBACK",LICENSE_PLATE_CALLBACK:"LICENSE_PLATE_CALLBACK",PAGE_VIEW:"PAGE_VIEW",REAUTH_CALLBACK:"REAUTH_CALLBACK",REDEEM_SESSION_TRANSFER_CALLBACK:"REDEEM_SESSION_TRANSFER_CALLBACK",RUN_WORKFLOW:"runWorkflow"};const Vo=[{redeemSessionTransfer:{stepExecution:function(e){const t=Ye("workflowData"),n=(0,u.U2)(t,"sessionTransferKey")||"";return Je.authenticateViaSessionTransferKey({sessionTransferKey:n}).then((t=>{t&&je("redeemResponse",{...t});if(((0,u.U2)(t,"error.errors")||[]).length)return e("parseErrors");e("createSession")})).catch(e)},results:{createSession:"createSession",parseErrors:"parseErrors"}}},{parseErrors:{stepExecution:function(e){const t=Ye("redeemResponse")||{},n=t.parsedErrors||{};return n.isInvalidSessionTransferKeyError?e():n.isPPU&&200===t.status||200===t.status||n.isAdvisoryError?e("createSession"):n.isPPU&&400===t.status?e("ppu"):n.isGating?e("gatingSubflow"):n.isInvalidRefreshToken?e("reauth"):void e()},results:{ppu:"ppuSubflow",createSession:"createSession",gatingSubflow:"gatingSubflow"}}},{ppuSubflow:{stepExecution:function(e){const t=Ye("redeemResponse")||{};return m(Fo.REDEEM_SESSION_TRANSFER_CALLBACK,(()=>{L(Fo.REDEEM_SESSION_TRANSFER_CALLBACK),e()})),te.then((e=>{e.call("inner","runWorkflow",{apiCallback:{name:Fo.REDEEM_SESSION_TRANSFER_CALLBACK},name:to.LOGIN,step:"ppuSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{ut.showLightbox()}))}))},results:{}}},{createSession:{stepExecution:function(e){const t=Ye("redeemResponse").data;if(t)return Jn(t).then((()=>{je("redeemSuccess",!0),e()})).catch((t=>{const n=(0,u.U2)(t,"message")||"";s.error(`Error in session-transfer create session call: ${n}`),e("error")}))},results:{error:"parseErrors"}}},{gatingSubflow:{stepExecution:function(e){const t=Ye("redeemResponse")||{};return m(Fo.REDEEM_SESSION_TRANSFER_CALLBACK,(()=>{L(Fo.REDEEM_SESSION_TRANSFER_CALLBACK),e()})),te.then((e=>{e.call("inner","runWorkflow",{apiCallback:{name:Fo.REDEEM_SESSION_TRANSFER_CALLBACK},name:to.LOGIN,step:"gatingSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{ut.showLightbox()}))}))},results:{}}}];const xo=[{redeemMagicLinkToken:{stepExecution:function(e){const t=Ye("workflowData"),n=(0,u.U2)(t,"magicLinkToken")||"";return async function(e){const t=ue().toLocaleLowerCase(),n="prod"===t?"":"-qa",o=(await F()).clientId,r={prod:"PROD",stage:"STAGE"}[t]||"QA",i=`https://login${n}.disney.com/orchestration-adapter/v1/client`;try{const t=await fetch(`${i}/${o}-${r}/login/magic-link`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){s.error("Error:",e)}}(n).then((t=>t.data?(t=>(je("redeemResponse",(e=>{const{data:{oneIdGuest:t={},oneIdToken:n={}}={}}=e;return{data:{...t,token:{...n}}}})(t)),e("createSession")))(t):(t=>{const n=(0,u.U2)(t,"error.errors")||[];return s.error("Error: Fallback to login due to error:",n),e("launchLogin")})(t))).catch((()=>e("launchLogin")))},results:{createSession:"createSession",launchLogin:"launchLogin"}}},{launchLogin:{stepExecution:ro,results:{}}},{createSession:{stepExecution:function(e){const t=Ye("redeemResponse").data;if(t)return Jn(t).then((()=>{je("redeemSuccess",!0),e()})).catch((t=>{const n=(0,u.U2)(t,"message")||"";s.error(`Error in magic-link create session call: ${n}`),e("error")}))},results:{}}}],Bo={INITIALIZATION:oo,GET_GUEST:kt,GUEST_FLOW:so,GET_INLINE_NEWSLETTERS:po,SET_INLINE_NEWSLETTERS:fo,GET_EDITABLE_AND_REQUIRED_FIELDS:Uo,SESSION_STATE_TASKS:Mo,SET_PPC:yo,TOKEN_REFRESH:jn,REDEEM_SESSION_TRANSFER:Vo,REDEEM_MAGIC_LINK_TOKEN:xo};function Wo({name:e,step:t=null,workflowOptions:n=null,onComplete:o=null,persistWorkflowOptions:r=!1}){n&&je("workflowOptions",n);new fe(e,Bo[e],t,(()=>{r||qe("workflowOptions"),o&&o()})).runWorkflow()}const Ko={LOCAL:"https://qa.registerdisney.go.com/jgc/v8",DEV:"https://qa.registerdisney.go.com/jgc/v8",QA:"https://qa.registerdisney.go.com/jgc/v8",STAGE:"https://stg.registerdisney.go.com/jgc/v8",VALID:"https://val.registerdisney.go.com/jgc/v8",PROD:"https://registerdisney.go.com/jgc/v8"};let $o;function Ho(){je("sessionTimerPaused",!0),clearTimeout($o)}function jo(e){je("sessionTimerPaused",!1),je("loggedIn",e),Yo()}function Yo(){clearTimeout($o),je("wasLoggedIn",Ye("loggedIn")||!1),Wo({name:"SESSION_STATE_TASKS",onComplete:()=>{$o=setTimeout(Yo,le.SESSION_TIMER_POLL_INTERVAL)},persistWorkflowOptions:!0})}var qo=n(486),Zo=n.n(qo);const zo=9e4;let Qo,Xo,Jo;function er(e=""){s.debug(`api/init: innerVersion "${e}"`),s.debug(`api/init: window.ONEID_WEB_SDK_VERSION "${window.ONEID_WEB_SDK_VERSION}"`),Te.lightbox_version=e,e!==window.ONEID_WEB_SDK_VERSION&&we({[Ie.ACTION_NAME]:Ie.LOG_VERSION_MISMATCH,[Ie.INFO]:`outer(${window.ONEID_WEB_SDK_VERSION}),inner(${e})`}),Jo=!0,Xo()}function tr(){return Jo}function nr(){if(Jo){if(Ue(Dt.ERROR,ot.ALREADY_INITIALIZED),window.ONEID_WEB_SDK_MIGRATION){const e=Zo().defer();return e.reject(ot.ALREADY_INITIALIZED),e.promise}return Promise.reject(ot.ALREADY_INITIALIZED)}me({conversationId:(0,u.Vj)()});const e=Ce(Ie.API_INIT),t=pt(zo),n=function(){const e=new Promise((e=>{const t=ut.createInner();t.onload=()=>{e(t)}})),t=new Promise((e=>{const t=ut.createResponder();t.onload=()=>{e(t)}}));return Promise.all([e,t])}().then(or).then(rr),o=Promise.race([n,t]).then((()=>new Promise((n=>{((0,u.U2)(F(),"debug")||{}).tealiumDebug&&te.then((e=>e.message("inner","turnOnDebugTealiumTracking")));const o=ue()||"PROD",r=F()||{},{clientId:i}=r,a=r.langPref,c=Ko[o];var l;l={clientId:`${i}-${o}`,endpoint:c,language:a},Xe={...Xe,...l},Wo({name:"INITIALIZATION",onComplete:function(){t.cancel(),s.debug("OneID initialization complete"),e.send();const o=Ye("guest"),r={loggedIn:!!(o||{}).token,guest:o||null};var i;Ue(Dt.INIT,r),Ze(),i=r.loggedIn,s.log("SessionTimer#startTimer"),je("loggedIn",i),Yo(),r.loggedIn&&ko(),n(r)}.bind(this)})})))).catch((({errorCodes:t,errorCategory:n})=>(e.send({[Ie.ERROR_CATEGORY]:n||rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:t||ot.NOT_INITIALIZED}),Ue(Dt.ERROR,`${ot.NOT_INITIALIZED}: ${t}`),Promise.reject(`${ot.NOT_INITIALIZED}: ${t}`))));if(window.ONEID_WEB_SDK_MIGRATION){const e=Zo().defer();return o.then((t=>e.resolve(t))).catch((t=>e.reject(t))),e.promise}return o}function or([e,t]=frames){return new Promise(((n,o)=>{const r={frames:{outer:{window,origin:window.origin||window.location&&window.location.origin,channels:["inner","responder"]},inner:{window:e.contentWindow,origin:new URL(e.src).origin,channels:["outer","responder"]},responder:{window:t.contentWindow,origin:new URL(t.src).origin,channels:["inner","outer"]}}};Promise.all([Q(r),te]).then((()=>{s.debug("Cross frame communication initialized"),n()})).catch((()=>o({errorCodes:ot.CROSS_FRAME_COMMUNICATION_TIMEOUT})))}))}function rr(){return Qo}Qo=new Promise((e=>Xo=e)),Jo=!1;const sr={doNotDisturb:Rr({preConditions:[dr],method:function([e]){if("boolean"!==typeof e)return Promise.reject({errorCodes:ot.INVALID_ARGUMENT});return Bt(e),Promise.resolve()},actionName:Ie.API_SET_DO_NOT_DISTURB,logInfoKey:"flag"}),forceTokenRefresh:Rr({preConditions:[dr,Er],method:function([e]){qe("tokenRefreshResponse"),me(e);const t=Et(),n=new Promise((e=>{Wo({name:"TOKEN_REFRESH",step:"forceRefresh",onComplete:()=>{const t=Ye("tokenRefreshResponse"),n=(0,u.U2)(t,"data.token"),o=(0,u.U2)(t,"error.keyCategory")||"",r=[];((0,u.U2)(t,"error.errors")||[]).forEach((e=>{r.includes(e.code)||r.push(e.code)})),qe("tokenRefreshResponse"),e({errorCategory:o,errorCodes:r,newTokens:n})}})}));return Promise.race([n,t]).then((({errorCategory:e,errorCodes:n,newTokens:o})=>(t.cancel(),o?Promise.resolve(o):e||n.length?Promise.reject({errorCategory:e,errorCodes:n.join(",")}):(we({[Ie.ACTION_NAME]:Ie.LOG_APPLICATION_ERROR,[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.INFO]:"api(forceTokenRefresh),data(missing_tokens,no_errors)"}),Promise.reject({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:rt.UNKNOWN_ERROR})))))},actionName:Ie.API_FORCE_TOKEN_REFRESH}),getEditableProfileFields:Rr({preConditions:[dr,Er],method:function([e]){me(e);const t=Et(),n=dt().then(St).then((t=>t.profile&&0===Object.keys(t.profile).length?Promise.reject({errorCodes:ot.NO_PROFILE}):new Promise((n=>{Wo({name:"GET_EDITABLE_AND_REQUIRED_FIELDS",workflowOptions:ft(e,t),onComplete:n})})))).then((()=>{const e=Ye("editableFields");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()}));return Promise.race([n,t]).then((()=>{t.cancel();const e=Ye("editableFields");return Promise.resolve(e)}))},actionName:Ie.API_GET_PPC}),getGuest:Rr({preConditions:[dr,Er],method:function(e){const[t=!1,n={}]=e,o=!0===t;me(n);const r=Et(),s=dt().then((()=>new Promise(((e,t)=>{const r={forceRefresh:(0,u.U2)(n,"forceRefresh")||!1,fullPayloadRequested:!!o};Wo({name:"GET_GUEST",workflowOptions:ft(n,r),onComplete:()=>{const n=Ye("getGuestResponse");if(qe("getGuestResponse"),n){const o=(0,u.U2)(n,"error.keyCategory")||"FAILURE_BY_DESIGN";let s=[];return(0,u.U2)(n,"error.errors")&&(0,u.U2)(n,"error.errors").forEach((function(e){-1===s.indexOf(e.code)&&s.push(e.code)})),s=s.length?s.join(","):"UNABLE_TO_RETRIEVE_GUEST_DATA",r.localCopyReturned=!1,Ye("logoutType")?t({errorCodes:s,errorCategory:o,[Ie.INFO]:r}):(0,u.U2)(n,"data.profile")?e(Ye("guest")||null):t({errorCodes:s,errorCategory:o,[Ie.INFO]:r})}e(Ye("guest")||null)}})}))));return Promise.race([s,r]).then((e=>(r.cancel(),Promise.resolve(e))))},actionName:Ie.API_GET_GUEST_DATA,logInfoKey:"fullPayload"}),getGuestNewsletters:Rr({preConditions:[dr,Er],method:function([e]){me(e);const t=Et(),n=St().then((e=>(0,u.U2)(e,"marketing")||null));return Promise.race([n,t]).then((e=>(t.cancel(),Promise.resolve(e))))},actionName:Ie.API_GET_GUEST_NEWSLETTERS}),getInlineNewsletters:Rr({preConditions:[dr],method:function(e){const[t,n]=e;me(n);const o=Et(),r=ve().then((e=>e?_t(e,t)?Promise.resolve():Promise.reject({errorCodes:ot.NO_VALID_CAMPAIGN}):Promise.reject({errorCodes:ot.NO_SITE_CONFIG}))).then((()=>new Promise((e=>{je("promotionID",t),Wo({name:"GET_INLINE_NEWSLETTERS",workflowOptions:ft(n),onComplete:e})})))).then((()=>{const e=Ye("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()})).finally((()=>{qe("promotionID")}));return Promise.race([r,o]).then((()=>{o.cancel();const e=Ye("responsePayload");return Promise.resolve(e)}))},actionName:Ie.API_GET_INLINE_NEWSLETTERS,logInfoKey:"promotionId"}),getTrustStateStatus:Rr({preConditions:[dr,Er],method:function([e]){me(e);const t=Et();let n;const o=Zn().then((({state:e})=>n=e));return Promise.race([o,t]).then((()=>(t.cancel(),Promise.resolve(n))))},actionName:Ie.API_GET_TRUST_STATE_STATUS}),init:nr,getConfig:function(){return ir},getLicensePlateDataBag:Rr({preConditions:[dr],method:function([e={},t]){me(t);const{pairingCode:n=""}=e;if(!n||0===n.length)return Promise.reject({errorCodes:ot.MISSING_PAIRING_CODE});const o=ft(t);return je("workflowOptions",o),st(n)},actionName:Ie.API_GET_LICENSE_PLATE_DATA_BAG}),getLoggedInStatus:Rr({preConditions:[()=>Qo],method:pr,actionName:Ie.API_GET_LOGGED_IN_STATUS}),launchEmailVerification:Rr({preConditions:[dr,Er],method:function([e]){return me(e),new Promise(((t,n)=>{const o="EMAIL_ALREADY_VERIFIED";dt().then(St).then((t=>{if(t.profile.emailVerified)throw new Error(o);return te.then((n=>n.call("inner","runWorkflow",{apiCallback:{name:Fo.EMAIL_VERIFICATION_CALLBACK},guest:t,name:to.EMAIL_VERIFICATION,workflowOptions:ft(e)})))})).then((()=>{m(Fo.EMAIL_VERIFICATION_CALLBACK,(({errorCategory:e,errorCodes:o,wasSuccess:r})=>{L(Fo.EMAIL_VERIFICATION_CALLBACK),r?t():n({errorCategory:e,errorCodes:o})})),ut.showLightbox()})).catch((e=>{L(Fo.EMAIL_VERIFICATION_CALLBACK),e.message!==o?n(new Error(rt.UNKNOWN_ERROR)):t()}))}))},actionName:Ie.API_LAUNCH_EMAILVERIFICATION,newRelicFlowName:(0,u.hK)(to.EMAIL_VERIFICATION)}),launchGuestFlow:Rr({preConditions:[dr,_r],method:function([e,t]){me(t);const n=Et(),o=new Promise((n=>{Wo({name:"GUEST_FLOW",workflowOptions:ft(t,{guestFlowEmail:e}),onComplete:n})}));return Promise.race([o,n]).then((()=>{const e=`SUCCESS_LAUNCH_${Ye("guestFlowName")}_${Ye("guestFlowEmail")?"WITH":"WITH_OUT"}_EMAIL`;return n.cancel(),qe("guestFlowCode"),qe("guestFlowName"),qe("guestFlowEmail"),Promise.resolve(e)}))},actionName:Ie.API_LAUNCH_GUESTFLOW}),launchIdentityFlow:Rr({preConditions:[dr,_r],method:function([e,t]){me(t);const n=Et(),o=dt().then((()=>{const n=ft(t),o={name:to.IDENTITY_FLOW,workflowOptions:n},r=(0,u.U2)(t,"optionalConfigs.providedProfile");return r&&(o.guestChanges={profile:r}),o.workflowData={isIdentityFlow:!0},e&&(o.workflowData.loginValue=e,o.workflowData.skipPrompt=!0),te.then((e=>e.call("inner","runWorkflow",o)))}));return Promise.race([o,n]).then((()=>(n.cancel(),ut.showLightbox(),Promise.resolve())))},actionName:Ie.API_LAUNCH_IDENTITYFLOW,newRelicFlowName:(0,u.hK)(to.IDENTITY_FLOW)}),launchLicensePlate:Rr({preConditions:[dr],method:function([e={}]){me(e);const{pairingCode:t="",authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r=!0,showSuccessScreen:s}=e;if(!t||0===t.length)return Promise.reject({errorCodes:ot.MISSING_PAIRING_CODE});return new Promise(((i,a)=>{Ho(),dt().then(St).then((i=>te.then((a=>a.call("inner","runWorkflow",{apiCallback:{name:Fo.LICENSE_PLATE_CALLBACK},guest:i,name:to.LICENSE_PLATE,workflowData:{authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r,pairingCode:t,showSuccessScreen:s},workflowOptions:ft(e)}))))).then((()=>{m(Fo.LICENSE_PLATE_CALLBACK,(({errorCodes:e=Ge.UNKNOWN_ERROR,wasSuccess:t=!1})=>{if(L(Fo.LICENSE_PLATE_CALLBACK),pr().then((e=>jo(e))),t)return i();a({errorCategory:Fe.FAILURE_BY_DESIGN,errorCodes:e})})),ut.showLightbox()})).catch((()=>{pr().then((e=>jo(e))),a(new Error(rt.UNKNOWN_ERROR))}))}))},actionName:Ie.API_LAUNCH_LICENSE_PLATE,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(to.LICENSE_PLATE)}),launchLogin:Rr({preConditions:[dr,_r],method:function([e]){me(e);const t=Et(),n=dt().then((()=>{const t=ft(e),n={name:to.LOGIN,workflowOptions:t},o=(0,u.U2)(e,"optionalConfigs.email");return o&&(n.workflowData={loginValue:o}),te.then((e=>e.call("inner","runWorkflow",n)))}));return Promise.race([n,t]).then((()=>(t.cancel(),ut.showLightbox(),Promise.resolve())))},actionName:Ie.API_LAUNCH_LOGIN,newRelicFlowName:(0,u.hK)(to.LOGIN)}),launchNewsletters:Rr({preConditions:[dr],method:function(e){const[t,n]=e;me(n);const o=Et();let r;const s=St().then((e=>(r=e,ve()))).then((e=>e?_t(e,t)?Promise.resolve(t):Promise.reject({errorCodes:ot.INVALID_ARGUMENT}):Promise.reject({errorCodes:ot.NO_SITE_CONFIG}))).then((e=>te.then((t=>{const o=ft(n,{promotionId:e});t.call("inner","runWorkflow",{guest:r,name:to.NEWSLETTERS,workflowOptions:o})}))));return Promise.race([s,o]).then((()=>(o.cancel(),ut.showLightbox(),Promise.resolve())))},actionName:Ie.API_LAUNCH_NEWSLETTERS,logInfoKey:"promotionId",newRelicFlowName:(0,u.hK)(to.NEWSLETTERS)}),launchProfile:Rr({preConditions:[dr,Er],method:function([e]){me(e);const t=Et(),n=ft(e),o=dt().then(St).then((e=>te.then((t=>t.call("inner","runWorkflow",{guest:e,name:to.UPDATE_PROFILE,workflowOptions:n})))));return Promise.race([o,t]).then((()=>(t.cancel(),ut.showLightbox(),Promise.resolve())))},actionName:Ie.API_LAUNCH_PROFILE,newRelicFlowName:(0,u.hK)(to.UPDATE_PROFILE)}),launchReauth:Rr({preConditions:[dr,Er],method:function([e]){return me(e),new Promise(((t,n)=>{dt().then(St).then((t=>te.then((n=>n.call("inner","runWorkflow",{apiCallback:{name:Fo.REAUTH_CALLBACK},guest:t,name:to.REAUTH,workflowOptions:ft(e)}))))).then((()=>{m(Fo.REAUTH_CALLBACK,(({errorCodes:e=Ge.UNKNOWN_ERROR,wasSuccess:o=!1})=>{if(L(Fo.REAUTH_CALLBACK),o)return qe("tokenData"),St().then((e=>t(e)));n({errorCategory:Fe.FAILURE_BY_DESIGN,errorCodes:e})})),ut.showLightbox()})).catch((()=>n(new Error(rt.UNKNOWN_ERROR))))}))},actionName:Ie.API_LAUNCH_REAUTH,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(to.REAUTH)}),launchRegistration:Rr({preConditions:[dr,_r],method:Or,actionName:Ie.API_LAUNCH_REGISTRATION,newRelicFlowName:(0,u.hK)(to.REGISTRATION)}),logout:Rr({preConditions:[dr,pr],method:function(){const{clientId:e}=F(),t=ue(),n=Et();bo(),Ho();const o=St().then((n=>{Ze();const o=(0,u.U2)(n,"profile.swid"),r=(0,u.U2)(n,"token");return gt(),o&&r?(Qe().then((e=>{const{s2CookieName:t,s2Domain:n}=e,o=R.getCookieDomain();O(t,n,"/"),o&&O(t,o,"/")})),Pt(o,r).then((()=>te.then((n=>(n.message("inner","guest.logout"),x((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`))))))):(we({[Ie.ACTION_NAME]:Ie.LOG_MISSING_GUEST_DATA_ON_LOGOUT,[Ie.INFO]:`swid(${o?"present":"missing"}),tokens(${r?"present":"missing"})`}),te.then((n=>(n.message("inner","guest.logout"),x((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`)))))}));return Promise.race([o,n]).then((()=>(jo(!1),n.cancel(),Ut(wt.API),Promise.resolve())))},actionName:Ie.API_LOGOUT}),on:m,off:L,setEditableProfileFields:Rr({preConditions:[dr,Er],method:function(e){const[t,n]=e;if(me(n),0===e.length||t&&0===Object.keys(t).length)return Promise.reject({errorCodes:ot.NO_DATA});const o=/^phone\.mobile/;if(Object.keys(t).find((e=>o.test(e))))return Promise.reject({errorCodes:ot.PROFILE_UPDATE_INVALID});const r=Et(),s=dt().then(St).then((e=>e.profile&&0===Object.keys(e.profile).length?Promise.reject({errorCodes:ot.NO_PROFILE}):(je("workflowData",{guestData:t,guest:e}),new Promise((e=>{Wo({name:"SET_PPC",onComplete:e})}))))).then((()=>{const e=Ye("workflowErrors")||[];return e.length?Promise.reject({errorCodes:e[0].code}):Promise.resolve()}));return Promise.race([s,r]).then((()=>{r.cancel();const{guest:e}=Ye("workflowData");return Ct({guest:e,token:e.token},!0),{data:e}})).finally((()=>{qe("workflowErrors")}))},actionName:Ie.API_SET_PPC}),setInlineNewsletters:Rr({preConditions:[dr],method:function(e){const[t,n]=e;if(me(n),!e||!t)return Promise.reject({errorCodes:ot.NO_DATA});const o=Et(),r=ve().then((e=>e?_t(e,t.campaignId)?new Promise((e=>{Wo({name:"SET_INLINE_NEWSLETTERS",workflowOptions:ft(n,{buData:t}),onComplete:e})})):Promise.reject({errorCodes:ao.NO_VALID_CAMPAIGN}):Promise.reject({errorCodes:ot.NO_SITE_CONFIG}))).then((()=>{const e=Ye("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve(e)}));return Promise.race([r,o]).then((()=>(o.cancel(),Promise.resolve())))},actionName:Ie.API_SET_INLINE_NEWSLETTERS}),redeemSessionTransferKey:Rr({preConditions:[dr,_r],method:function([e,t]){if(me(t),!e)return Promise.reject({errorCodes:ot.INVALID_ARGUMENT});return new Promise(((n,o)=>{dt().then((()=>{je("workflowData",{sessionTransferKey:e});Wo({name:"REDEEM_SESSION_TRANSFER",workflowOptions:ft(t),onComplete:()=>{const e=Ye("redeemSuccess")||!1,t=Ye("redeemResponse");if(!(0,u.U2)(t,"data.profile")){const e=(0,u.U2)(t,"error.keyCategory")||rt.FAILURE_BY_DESIGN;let n=[];return(0,u.U2)(t,"error.errors")&&(0,u.U2)(t,"error.errors").forEach((function(e){n.includes(e.code)||n.push(e.code)})),n=n.length?n.join(","):Ge.UNKNOWN_ERROR,o({errorCategory:e,errorCodes:n})}if(e)return n({data:t.data});o({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:Ge.UNKNOWN_ERROR})}})})).catch((()=>{o(new Error(rt.UNKNOWN_ERROR))}))}))},actionName:Ie.API_REDEEM_SESSION_TRANSFER,newRelicFlowName:(0,u.hK)(to.REDEEM_SESSION_TRANSFER)}),redeemMagicLinkToken:Rr({preConditions:[dr,_r],method:function([e,t]){if(me(t),!e)return Promise.reject({errorCodes:ot.INVALID_ARGUMENT});return new Promise(((n,o)=>{dt().then((()=>{je("workflowData",{magicLinkToken:e});Wo({name:"REDEEM_MAGIC_LINK_TOKEN",workflowOptions:ft(t),onComplete:()=>{const e=Ye("redeemSuccess")||!1,t=Ye("redeemResponse");if(!(0,u.U2)(t,"data.profile")){const e=(0,u.U2)(t,"error.keyCategory")||rt.FAILURE_BY_DESIGN;let n=[];return(0,u.U2)(t,"error.errors")&&(0,u.U2)(t,"error.errors").forEach((function(e){n.includes(e.code)||n.push(e.code)})),n=n.length?n.join(","):Ge.UNKNOWN_ERROR,o({errorCategory:e,errorCodes:n})}if(e)return n({data:t.data});o({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:Ge.UNKNOWN_ERROR})}})})).catch((()=>{o(new Error(rt.UNKNOWN_ERROR))}))}))},actionName:Ie.API_REDEEM_MAGIC_LINK_TOKEN,newRelicFlowName:(0,u.hK)(to.REDEEM_MAGIC_LINK_TOKEN)}),launchOTP:Rr({preConditions:[dr,Er],method:function([e,t,n=!0]){return me(t),new Promise(((o,r)=>{dt().then((()=>te.then((o=>o.call("inner","runWorkflow",{apiCallback:{name:Fo.LAUNCH_OTP_CALLBACK},name:to.LAUNCH_OTP,step:"isGuestEmailLoaded",workflowData:{onDemandOTP:{reason:e,forceOTP:n}},workflowOptions:ft(t)}))))).then((()=>{m(Fo.LAUNCH_OTP_CALLBACK,(({errorCodes:e=Ge.UNKNOWN_ERROR,wasSuccess:t=!1,recoveryToken:n})=>{if(L(Fo.LAUNCH_OTP_CALLBACK),t&&n)return o(n);r({errorCategory:Fe.FAILURE_BY_DESIGN,errorCodes:e})})),ut.showLightbox()})).catch((()=>{r(new Error(rt.UNKNOWN_ERROR))}))}))},actionName:Ie.API_LAUNCH_OTP_ONDEMAND,newRelicFlowName:(0,u.hK)(to.LAUNCH_OTP)}),launchLoginBySWID:Rr({preConditions:[dr],method:function([e,t]){if(me(t),!e)return Promise.reject({errorCodes:ot.MISSING_SWID});return new Promise(((n,o)=>{dt().then((()=>te.then((n=>n.call("inner","runWorkflow",{apiCallback:{name:Fo.LAUNCH_LOGIN_BY_SWID_CALLBACK},name:to.OTP_LOGIN_RECOVERY,step:"executeRecoveryMethodsBySWID",workflowData:{OTPLoginBySWID:{swid:e}},workflowOptions:ft(t)}))))).then((()=>{m(Fo.LAUNCH_LOGIN_BY_SWID_CALLBACK,(({errorCodes:e=Ge.UNKNOWN_ERROR,wasSuccess:t=!1})=>{if(L(Fo.LAUNCH_LOGIN_BY_SWID_CALLBACK),t)return n();o({errorCategory:Fe.FAILURE_BY_DESIGN,errorCodes:e})})),ut.showLightbox()})).catch((()=>{o(new Error(rt.UNKNOWN_ERROR))}))}))},actionName:Ie.API_LAUNCH_LOGIN_BY_SWID,newRelicFlowName:(0,u.hK)(to.LAUNCH_LOGIN_BY_SWID)}),displayViewPreview:Rr({preConditions:[dr],method:function([e,t={},n={}]){const o=Et(),r=dt().then((()=>te.then((o=>o.call("inner","displayViewPreview",{viewID:e,guest:t,workflowData:n})))));return Promise.race([r,o]).then((()=>(o.cancel(),ut.showLightbox(),Promise.resolve())))}}),setLogLevel:function(t,n){if("string"!==typeof t||!e[t.toUpperCase()])return void s.warn(ot.INVALID_ARGUMENT);const o=e[t.toUpperCase()];i(o),te.then((e=>e.broadcast("config.setLogLevel",o))),n&&o!==e.OFF?A(h.LOG_LEVEL,t,null,"/"):n&&o!==e.OFF||O(h.LOG_LEVEL,null,"/")}};let ir;const ar={get:Ir},cr={get:(ur=Ir,lr=ot.DISNEYID_DEPRECATED,"function"===typeof ur?function(...e){return s.warn(lr),ur.apply(this,e)}:ur)};var ur,lr;function Er(){return new Promise(((e,t)=>{pr().then((n=>{if(n)return e();t({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:ot.SESSION_NOT_ESTABLISHED})}))}))}function _r(){return new Promise(((e,t)=>{pr().then((n=>{if(!n)return e();t({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:ot.SESSION_ESTABLISHED})}))}))}function dr(){return new Promise(((e,t)=>{if(tr())return e();t({errorCategory:rt.FAILURE_BY_DESIGN,errorCodes:ot.NOT_INITIALIZED})}))}function pr(){return Ee().then((e=>!!e&&!Y(e))).catch((()=>!1))}function fr(e){return"string"!==typeof e||!e.length}function Ir(e){s.debug("JS SDK get() was called with the following configuration:",e);const t=!!F(),n=(0,u.d9)(e),o=[];if(n&&t)throw new Error(ot.CONFIG_SET);if(!t){if(!n||!Object.keys(n).length)throw new Error(ot.NO_CONFIG_OPTIONS);if(!n.clientId||"string"!==typeof n.clientId)throw new Error(ot.NO_CLIENT_ID);if(!n.responderPage)throw new Error(ot.NO_RESPONDER_PAGE);let e="";try{e=new URL(n.responderPage)}catch(e){throw new Error(`${ot.INVALID_ARGUMENT}: responderPage`)}const t=(0,u.KT)(window.location.hostname),c=(0,u.KT)(e.hostname);t!==c&&(s.warn("responder page domain does not match the top window domain. responder domain:",c),o.push("responderPage")),n.hasOwnProperty("langPref")&&(fr(a=n.langPref)||!d.test(a))&&(s.warn("invalid config.langPref passed to get(config) - it is being ignored."),o.push("langPref"),delete n.langPref),n.cssOverride&&("string"!==typeof(i=n.cssOverride)||!i.startsWith("http")&&0!==i.length)&&(s.warn("invalid config.cssOverride passed to get(config) - it is being ignored."),o.push("cssOverride"),delete n.cssOverride),n.hasOwnProperty("experience")&&(fr(r=n.experience)||!/^[A-Z0-9.\-_]+.EXP$/.test(r))&&(s.warn("invalid config.experience passed to get(config) - it is being ignored."),o.push("experience"),delete n.experience),f.test(n.clientId)&&(s.warn("passing environment as part of the Client ID is deprecated - it is being ignored."),o.push("clientId"),n.clientId=n.clientId.replace(f,"")),function(e){G=(0,u._A)((0,u.d9)({...M,...e}))}(n),ir=(0,u._A)((0,u.d9)(n)),function(e){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"experience");t&&!Pe(t)&&(s.warn("optionalConfigs.reporting does not pass validation, values will be ignored"),t=null),n&&!De(n)&&(s.warn("experience does not pass validation, values will be ignored"),n=null),(t||n)&&(Re={reporting:t,...n&&{experience:n}})}(ir),n.initialize&&nr(),o.length&&we({[Ie.ACTION_NAME]:Ie.LOG_INVALID_OID_CONFIG,[Ie.INFO]:o.join(",")})}var r,i,a;window.ONEID_WEB_SDK_MIGRATION&&(sr.launchSocialRegistration=Rr({preConditions:[dr,_r],method:Or,actionName:Ie.API_LAUNCH_SOCIAL_REGISTRATION}),sr.getInlineNewsletters=hr,sr.setInlineNewsletters=Tr);const c=(0,u.d9)(sr),{clientId:l}=F(),E=(0,u.U2)(F(),"debug.launchOTPEnabled")||!1,_=(0,u.U2)(F(),"debug.displayViewPreviewEnabled")||!1;return s.debug(`Is LaunchOTP Enabled ${E} for client-id ${l}?`),E||delete c.launchOTP,s.debug(`Is LaunchCustomFlow Enabled ${_} for client-id ${l}?`),_||delete c.displayViewPreview,m(Dt.ERROR,(e=>s.error(e))),c}function hr(e,t){const n=Ce(Ie.API_GET_INLINE_NEWSLETTERS),o=`promotionId(${e})`;if(me(t),!tr())return n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NOT_INITIALIZED,[Ie.INFO]:o}),Ue(Dt.ERROR,ot.NOT_INITIALIZED),Promise.reject({data:{},error_codes:ot.NOT_INITIALIZED});const r=Nr(n,o,ot.INNER_APP_TIMEOUT),s=ve().then((t=>t?_t(t,e)?Promise.resolve():(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NO_VALID_CAMPAIGN,[Ie.INFO]:o}),Ue(Dt.ERROR,ot.NO_VALID_CAMPAIGN),Promise.reject({data:{},error_codes:ao.NO_VALID_CAMPAIGN})):(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NO_SITE_CONFIG,[Ie.INFO]:o}),Ue(Dt.ERROR,ot.NO_SITE_CONFIG),Promise.reject({data:{},error_codes:ot.NO_SITE_CONFIG})))).then((()=>new Promise((n=>{Wo({name:"GET_INLINE_NEWSLETTERS",workflowOptions:ft(t,{promotionId:e}),onComplete:n})})))).then((()=>{const e=Ye("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:e.error_codes,[Ie.INFO]:o}),Ue(Dt.ERROR,e.error_codes),e.data={},Promise.reject(e)):Promise.resolve()}));return Promise.race([s,r]).then((()=>{r.cancel(),n.send({[Ie.INFO]:o});const e=Ye("responsePayload");return Promise.resolve(e)}))}function Tr(e,t){const n=Ce(Ie.API_SET_INLINE_NEWSLETTERS);if(me(t),!tr())return n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NOT_INITIALIZED}),Ue(Dt.ERROR,ot.NOT_INITIALIZED),Promise.reject({data:{},error_codes:ot.NOT_INITIALIZED});if(!e)return n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NO_DATA}),Ue(Dt.ERROR,ot.NO_DATA),Promise.reject({data:{},error_codes:ao.NO_DATA});const o=Nr(n,void 0,{data:{},error_codes:ot.INNER_APP_TIMEOUT}),r=ve().then((t=>t?_t(t,e.campaignId)?Promise.resolve():(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ao.NO_VALID_CAMPAIGN}),Promise.reject({data:{},error_codes:ao.NO_VALID_CAMPAIGN})):(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.NO_SITE_CONFIG}),Ue(Dt.ERROR,ot.NO_SITE_CONFIG),Promise.reject({data:{},error_codes:ot.NO_SITE_CONFIG})))).then((()=>new Promise((n=>{Wo({name:"SET_INLINE_NEWSLETTERS",workflowOptions:ft(t,{buData:e}),onComplete:n})})))).then((()=>{const e=Ye("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:e.error_codes}),Ue(Dt.ERROR,e.error_codes),Promise.reject(e)):Promise.resolve(e)}));return Promise.race([r,o]).then((()=>{o.cancel();const e=Ye("responsePayload");return Promise.resolve(e)}))}function Or(e){const[t]=e;me(t);const n=Et(),o=ft(t),r={name:to.REGISTRATION,workflowOptions:o},s=(0,u.U2)(t,"optionalConfigs.providedProfile");s&&(r.guestChanges={profile:s});const i=dt().then((()=>te.then((e=>{e.call("inner","runWorkflow",r)}))));return Promise.race([i,n]).then((()=>(n.cancel(),ut.showLightbox(),Promise.resolve())))}function Ar(e){return(0,e[0])().then((()=>{if(e.shift(),e.length)return Ar(e)}))}function Rr({preConditions:e=[()=>Promise.resolve()],method:t,actionName:n,newRelicFlowName:o,logInfoKey:r="",sendAfterPreconditions:s=!1}){return(...i)=>{const a=Ce(n),c={};o&&(c[Ie.FLOW]=o),r&&(c[Ie.INFO]=`${r}(${i[0]})`);const l=new Promise(((n,o)=>{Ar((0,u.d9)(e)).then((()=>{s&&a.send(c),t(i).then((e=>{s||a.send(c),n(e)})).catch((({errorCategory:e,errorCodes:t})=>{s||a.send({[Ie.ERROR_CATEGORY]:e||rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:t,...c}),Ue(Dt.ERROR,t),o(t)}))})).catch((({errorCategory:e,errorCodes:t})=>{a.send({[Ie.ERROR_CATEGORY]:e,[Ie.ERROR_CODES]:t,...c}),Ue(Dt.ERROR,t),o(t)}))}));if(window.ONEID_WEB_SDK_MIGRATION){const e=Zo().defer();return l.then((t=>e.resolve(t))).catch((t=>e.reject(t))),e.promise}return l}}function Nr(e,t,n){let o;const r=new Promise(((r,s)=>{o=setTimeout((()=>{const o={[Ie.ERROR_CATEGORY]:rt.FAILURE_BY_DESIGN,[Ie.ERROR_CODES]:ot.INNER_APP_TIMEOUT};t&&(o[Ie.INFO]=t),e.send(o),s(n)}),le.LAUNCH_METHOD_TIMEOUT)}));return r.cancel=()=>(clearTimeout(o),this),r}function gr(e){if(!e)return null;const t=localStorage.getItem(e);try{const n=JSON.parse(t);if(!n._expiry)return n;const o=new Date(n._expiry);if(delete n._expiry,o>new Date)return n;localStorage.removeItem(e)}catch(e){return t}}function Sr({key:e,value:t,expires:n}){const o=JSON.stringify({...t,_expiry:n},function(){const e=new Map;return(t,n)=>n?"object"!==typeof n?n:e.has(n)?void 0:(e.set(n,!0),n):n}());localStorage.setItem(e,o)}function mr(){je("loggedIn",!0),ko()}function Lr(){je("loggedIn",!1)}function Cr({key:e,value:t,expires:n,secure:o=!1}){A(e,t,R.getCookieDomain(),"/",n,o)}window.ONEID_WEB_SDK_VERSION="4.4.186",window.ONEID_WEB_SDK_MIGRATION=!1,i(e[T(h.LOG_LEVEL)]||e.INFO),s.debug("MOUI (outer) initializing..."),te.then((e=>{e.addHandler("ui.hideLightbox",ut.hideLightbox),e.addHandler("ui.showLightbox",ut.showLightbox),e.addHandler("init.setInitialized",er),e.addHandler("get.localStorage",gr),e.addHandler("set.localStorage",Sr),e.addHandler("get.cookie",T),e.addHandler("set.cookie",Cr),e.addHandler("newRelic.send",(e=>{we({...e,...Te})})),e.addHandler("api.callback",(e=>{const{name:t,...n}=e;C(t,n)})),e.addHandler("api.emitEvent",(({eventName:e,eventPayload:t,additionalInfo:n})=>Ue(e,t,n))),e.addHandler("guest.write",(e=>Ct(e,!0))),e.addHandler("guest.read",St),e.addHandler("session.loggedIn",mr),e.addHandler("session.loggedOut",Lr),e.addHandler("set.s2cookie",ze)})),window.OneID||(window.OneID=ar),window.DisneyID||(window.DisneyID=cr),ce()})()})();